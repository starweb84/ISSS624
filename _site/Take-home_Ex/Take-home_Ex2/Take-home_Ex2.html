<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-12-09">

<title>ISSS624 - Take-home Exercise 2: Applied Spatial Interaction Models: A case study of Singapore public bus commuter flows</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">ISSS624</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Hands-on Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercise">    
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex1/Hands-on_Ex1.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex1a/Hands-on_Ex1a.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 1a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex2/Hands-on_Ex2.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex2a/Hands-on_Ex2a.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 2a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex2b/Hands-on_Ex2b.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 2b</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex3/Hands-on_Ex3.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 3</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">In-class Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercise">    
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex1/In-class_Ex1.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex2/In-class_Ex2.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex2a/In-class_Ex2a.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 2a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex2b/In-class_Ex2b.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 2b</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex3/In-class_Ex3.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex4/In-class_Ex4.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex4a/In-class_Ex4a.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 4a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex4a/In-class_Ex5.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 5</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Take-home Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercise">    
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Take-home_Ex1/Take-home_Ex1.html" rel="" target="">
 <span class="dropdown-text">Take-home Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Take-home_Ex2/Take-home_Ex2.html" rel="" target="">
 <span class="dropdown-text">Take-home Exercise 2</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><strong>1. Overview</strong></a>
  <ul class="collapse">
  <li><a href="#motivation-and-objective" id="toc-motivation-and-objective" class="nav-link" data-scroll-target="#motivation-and-objective"><strong>1.1 Motivation and Objective</strong></a></li>
  <li><a href="#the-task" id="toc-the-task" class="nav-link" data-scroll-target="#the-task"><strong>1.2 The Task</strong></a>
  <ul class="collapse">
  <li><a href="#geospatial-data-science" id="toc-geospatial-data-science" class="nav-link" data-scroll-target="#geospatial-data-science"><strong>Geospatial Data Science</strong></a></li>
  <li><a href="#spatial-interaction-modelling" id="toc-spatial-interaction-modelling" class="nav-link" data-scroll-target="#spatial-interaction-modelling"><strong>Spatial Interaction Modelling</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#the-data" id="toc-the-data" class="nav-link" data-scroll-target="#the-data"><strong>2. The Data</strong></a>
  <ul class="collapse">
  <li><a href="#open-government-data" id="toc-open-government-data" class="nav-link" data-scroll-target="#open-government-data"><strong>2.1 Open Government Data</strong></a></li>
  <li><a href="#specially-collected-data" id="toc-specially-collected-data" class="nav-link" data-scroll-target="#specially-collected-data"><strong>2.2 Specially collected data</strong></a></li>
  </ul></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started"><strong>3 Getting Started</strong></a>
  <ul class="collapse">
  <li><a href="#setting-the-analytical-tools" id="toc-setting-the-analytical-tools" class="nav-link" data-scroll-target="#setting-the-analytical-tools"><strong>3.1 Setting the Analytical Tools</strong></a></li>
  </ul></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation"><strong>4 Data Preparation</strong></a>
  <ul class="collapse">
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data"><strong>4.1 Data</strong></a>
  <ul class="collapse">
  <li><a href="#importing-data-for-create-the-map-shape" id="toc-importing-data-for-create-the-map-shape" class="nav-link" data-scroll-target="#importing-data-for-create-the-map-shape">4.1.1 Importing data for create the map shape</a></li>
  <li><a href="#importing-the-origin-destination-od-data" id="toc-importing-the-origin-destination-od-data" class="nav-link" data-scroll-target="#importing-the-origin-destination-od-data"><strong>4.1.2 Importing the Origin-Destination (OD) data</strong></a></li>
  <li><a href="#extracting-the-od-study-data" id="toc-extracting-the-od-study-data" class="nav-link" data-scroll-target="#extracting-the-od-study-data"><strong>4.1.3 Extracting the OD study data</strong></a></li>
  <li><a href="#creating-the-flow-lines" id="toc-creating-the-flow-lines" class="nav-link" data-scroll-target="#creating-the-flow-lines">4,1,4 Creating the flow lines</a></li>
  <li><a href="#attractiveness-variables" id="toc-attractiveness-variables" class="nav-link" data-scroll-target="#attractiveness-variables"><strong>4.1.5 Attractiveness Variables</strong></a></li>
  <li><a href="#deriving-schoool-information" id="toc-deriving-schoool-information" class="nav-link" data-scroll-target="#deriving-schoool-information"><strong>4.1.6 Deriving Schoool information</strong></a></li>
  <li><a href="#propulsiveness-variables" id="toc-propulsiveness-variables" class="nav-link" data-scroll-target="#propulsiveness-variables"><strong>4.1.6 Propulsiveness variables</strong></a></li>
  <li><a href="#generating-distance-table" id="toc-generating-distance-table" class="nav-link" data-scroll-target="#generating-distance-table"><strong>4.1.7 Generating distance table</strong></a></li>
  <li><a href="#combining-the-data" id="toc-combining-the-data" class="nav-link" data-scroll-target="#combining-the-data">4.1.8 Combining the data</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#visualizing-spatial-interactions" id="toc-visualizing-spatial-interactions" class="nav-link" data-scroll-target="#visualizing-spatial-interactions"><strong>5 Visualizing Spatial Interactions</strong></a>
  <ul class="collapse">
  <li><a href="#charting-for-trips-vs.-distance" id="toc-charting-for-trips-vs.-distance" class="nav-link" data-scroll-target="#charting-for-trips-vs.-distance">5.1 Charting for TRIPS vs.&nbsp;DISTANCE</a></li>
  <li><a href="#visualizing-propulsive-forces" id="toc-visualizing-propulsive-forces" class="nav-link" data-scroll-target="#visualizing-propulsive-forces">5.2 Visualizing propulsive forces</a></li>
  <li><a href="#visualizing-attractive-forces" id="toc-visualizing-attractive-forces" class="nav-link" data-scroll-target="#visualizing-attractive-forces">5.3 Visualizing attractive forces</a></li>
  </ul></li>
  <li><a href="#spatial-interaction-modelling-1" id="toc-spatial-interaction-modelling-1" class="nav-link" data-scroll-target="#spatial-interaction-modelling-1">6 Spatial Interaction Modelling</a>
  <ul class="collapse">
  <li><a href="#generating-models" id="toc-generating-models" class="nav-link" data-scroll-target="#generating-models">6.1 Generating Models</a></li>
  <li><a href="#model-comparison" id="toc-model-comparison" class="nav-link" data-scroll-target="#model-comparison">6.2 Model Comparison</a></li>
  <li><a href="#visualising-the-fitted-values" id="toc-visualising-the-fitted-values" class="nav-link" data-scroll-target="#visualising-the-fitted-values">6.3 Visualising the fitted values</a></li>
  </ul></li>
  <li><a href="#conclusion-and-future-work" id="toc-conclusion-and-future-work" class="nav-link" data-scroll-target="#conclusion-and-future-work"><strong>7. Conclusion and future work</strong></a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">8. References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Take-home Exercise 2: Applied Spatial Interaction Models: A case study of Singapore public bus commuter flows</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 9, 2023</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">December 17, 2023</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="overview" class="level1">
<h1><strong>1. Overview</strong></h1>
<p>Commute behaviors are influenced by various factors, posing challenges for transport operators and urban managers. Understanding these dynamics traditionally involves costly and time-consuming commuter surveys, presenting drawbacks such as delayed data analysis and outdated information upon report completion. The impact of removing a public bus service along a route raises questions about how commuters, particularly those residing along the corridor, adapt to such changes.</p>
<p>In the context of evolving digital urban infrastructures, the widespread integration of technologies like GPS in vehicles and SMART cards for public transport payments generates vast geospatially-referenced datasets. These datasets offer a valuable framework for tracking movement patterns over space and time. However, the rapid growth of such data has outpaced planners’ capabilities to efficiently utilize and derive meaningful insights from it. This inefficiency hampers the return on investment in data collection and management, hindering the potential benefits that could be gained from understanding urban mobility patterns and addressing commuter needs effectively. Striking a balance between technological advancement and analytical capacity becomes crucial for unlocking the full potential of digital urban infrastructure data in shaping more responsive and efficient urban transportation systems.</p>
<section id="motivation-and-objective" class="level2">
<h2 class="anchored" data-anchor-id="motivation-and-objective"><strong>1.1 Motivation and Objective</strong></h2>
<p>This take-home exercise is motivated by two main reasons. Firstly, while there is a growing abundance of open data accessible to the public, there has been limited practical research demonstrating the effective integration, analysis, and modeling of these diverse data sources to inform policymaking decisions.</p>
<p>Secondly, there is an absence of practical research illustrating the application of geospatial data science and analysis (GDSA) in facilitating decision-making.</p>
<p>Hence, for this take-home exercise, we are conducting a case study to demonstrate the potential value of GDSA to integrate publicly available data from multiple sources for building a spatial interaction models to determine factors affecting urban mobility patterns of public bus transit.</p>
</section>
<section id="the-task" class="level2">
<h2 class="anchored" data-anchor-id="the-task"><strong>1.2 The Task</strong></h2>
<p>The specific tasks of this take-home exercise are as follows:</p>
<section id="geospatial-data-science" class="level3">
<h3 class="anchored" data-anchor-id="geospatial-data-science"><strong>Geospatial Data Science</strong></h3>
<ul>
<li><p>Derive an analytical hexagon data of 375m (this distance is the perpendicular distance between the centre of the hexagon and its edges) to represent the <a href="https://tmg.utoronto.ca/files/Reports/Traffic-Zone-Guidance_March-2021_Final.pdf">traffic analysis zone (TAZ)</a>.</p></li>
<li><p>With reference to the time intervals provided in the table below, construct an O-D matrix of commuter flows for a time interval of your choice by integrating <em>Passenger Volume by Origin Destination Bus Stops</em> and <em>Bus Stop Location</em> from <a href="https://datamall.lta.gov.sg/content/datamall/en.html">LTA DataMall</a>. The O-D matrix must be aggregated at the analytics hexagon level. <strong>For purposes of this take home exercise, we will focus on analyzing the commuter flows for Weekday Morning Peak only.</strong></p>
<table class="table">
<thead>
<tr class="header">
<th>Peak hour period</th>
<th>Bus tap on time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Weekday morning peak</td>
<td>6am to 9am</td>
</tr>
<tr class="even">
<td>Weekday afternoon peak</td>
<td>5pm to 8pm</td>
</tr>
<tr class="odd">
<td>Weekend/holiday morning peak</td>
<td>11am to 2pm</td>
</tr>
<tr class="even">
<td>Weekend/holiday evening peak</td>
<td>4pm to 7pm</td>
</tr>
</tbody>
</table></li>
<li><p>Display the O-D flows of the passenger trips by using appropriate geovisualisation methods (not more than 5 maps).</p></li>
<li><p>Describe the spatial patterns revealed by the geovisualisation (not more than 100 words per visual).</p></li>
<li><p>Assemble at least three propulsive and three attractiveness variables by using aspatial and geospatial from publicly available sources.</p></li>
<li><p>Compute a distance matrix by using the analytical hexagon data derived earlier.</p></li>
</ul>
</section>
<section id="spatial-interaction-modelling" class="level3">
<h3 class="anchored" data-anchor-id="spatial-interaction-modelling"><strong>Spatial Interaction Modelling</strong></h3>
<ul>
<li><p>Calibrate spatial interactive models to determine factors affecting urban commuting flows at the selected time interval.</p></li>
<li><p>Present the modelling results by using appropriate geovisualisation and graphical visualisation methods. (Not more than 5 visuals)</p></li>
<li><p>With reference to the Spatial Interaction Model output tables, maps and data visualisation prepared, describe the modelling results. (not more than 100 words per visual).</p></li>
</ul>
</section>
</section>
</section>
<section id="the-data" class="level1">
<h1><strong>2. The Data</strong></h1>
<section id="open-government-data" class="level2">
<h2 class="anchored" data-anchor-id="open-government-data"><strong>2.1 Open Government Data</strong></h2>
<p>For the purpose of this assignment, data from several open government sources will be used:</p>
<ul>
<li><p><em>Passenger Volume by Origin Destination Bus Stops</em>, <em>Bus Stop Location</em>, <em>Train Station</em> and <em>Train Station Exit Point</em>, just to name a few of them, from <a href="https://datamall.lta.gov.sg/content/datamall/en.html">LTA DataMall</a>.</p></li>
<li><p><em>Master Plan 2019 Subzone Boundary</em>, <em>HDB Property Information</em>, <em>School Directory and Information</em> and other relevant data from <a href="https://beta.data.gov.sg/">Data.gov.sg</a>.</p></li>
</ul>
</section>
<section id="specially-collected-data" class="level2">
<h2 class="anchored" data-anchor-id="specially-collected-data"><strong>2.2 Specially collected data</strong></h2>
<ul>
<li><p><em>Business</em>, <em>entertn</em>, <em>F&amp;B</em>, <em>FinServ</em>, <em>Leisure&amp;Recreation</em> and <em>Retails</em> are geospatial data sets of the locations of business establishments, entertainments, food and beverage outlets, financial centres, leisure and recreation centres, retail and services stores/outlets compiled for urban mobility study. These have been extracted from elearn Take-home Exercise 2 data folder provided by the course instructor.</p></li>
<li><p>HDB: This data set is the geocoded version of <em>HDB Property Information</em> data from data.gov. The data set is prepared using September 2021 data.</p></li>
</ul>
<p>Important: These data sets are specially prepared by the course instructor for teaching purposes. These data sets should not be used beyond ISSS624 without getting permission from the course instructor.</p>
</section>
</section>
<section id="getting-started" class="level1">
<h1><strong>3 Getting Started</strong></h1>
<section id="setting-the-analytical-tools" class="level2">
<h2 class="anchored" data-anchor-id="setting-the-analytical-tools"><strong>3.1 Setting the Analytical Tools</strong></h2>
<p>The code chunk below installs and loads <strong>tmap</strong>, <strong>sf</strong>, sfdep, spdep, <strong>performance</strong>, <strong>knitr</strong>, <strong>ggpubr</strong>, <strong>tidyverse</strong>, <strong>httr</strong> packages into R environment.</p>
<p>For this exercise, in the following code chunk,&nbsp;<code>p_load()</code>&nbsp;from&nbsp;<strong>pacman</strong>&nbsp;package is used to install and load the following R packages into the R environment:</p>
<ul>
<li><p><strong>sf/sp</strong> for importing, managing, and processing geospatial data,</p></li>
<li><p><strong>tmap</strong> for creating thematic maps,</p></li>
<li><p><strong>tidyverse</strong> for performing data science tasks such as importing, wrangling and visualising data,</p></li>
<li><p><strong>knitr</strong> for creating html table.</p></li>
<li><p><strong>stplanr</strong> for generating flow lines</p></li>
<li><p><strong>reshape</strong> for generating pivot tables from matrix,</p></li>
<li><p><strong>performance</strong> for for model comparisons</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#label: setup</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(sf, sp, tmap, tidyverse, knitr, stplanr, reshape2, performance)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_style</span>(<span class="st">"natural"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="data-preparation" class="level1">
<h1><strong>4 Data Preparation</strong></h1>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data"><strong>4.1 Data</strong></h2>
<section id="importing-data-for-create-the-map-shape" class="level3">
<h3 class="anchored" data-anchor-id="importing-data-for-create-the-map-shape">4.1.1 Importing data for create the map shape</h3>
<p>We will import the Master Plan 2019 Subzone Boundary data set. We will only keep the SUBZONE_N column and the geometry to use this as the base for our visualizations.</p>
<p><strong>Singapore Boundary Data</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>mpsz <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"data/geospatial"</span>,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">layer =</span> <span class="st">"MPSZ-2019"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(SUBZONE_N)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `MPSZ-2019' from data source 
  `D:\starweb84\ISSS624\Take-home_Ex\Take-home_Ex2\data\geospatial' 
  using driver `ESRI Shapefile'
Simple feature collection with 332 features and 6 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 103.6057 ymin: 1.158699 xmax: 104.0885 ymax: 1.470775
Geodetic CRS:  WGS 84</code></pre>
</div>
</div>
<p>This data frame uses the global GPS standard, WGS84. We will convert this to SVY21 projection.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>mpsz <span class="ot">&lt;-</span> mpsz <span class="sc">%&gt;%</span> <span class="fu">st_transform</span>(<span class="at">crs=</span><span class="dv">3414</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we import the bus stop data to generate the honeycomb grid based on locations with bus stops.</p>
<p><strong>Bus Stop data</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>busstops <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"data/geospatial"</span>,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">layer =</span> <span class="st">"BusStop"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `BusStop' from data source 
  `D:\starweb84\ISSS624\Take-home_Ex\Take-home_Ex2\data\geospatial' 
  using driver `ESRI Shapefile'
Simple feature collection with 5159 features and 3 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 3970.122 ymin: 26482.1 xmax: 48284.56 ymax: 52983.82
Projected CRS: SVY21</code></pre>
</div>
</div>
<p>We would want to use SVY21 as the projection for this study. Hence we check the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(busstops)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: SVY21 
  wkt:
PROJCRS["SVY21",
    BASEGEOGCRS["WGS 84",
        DATUM["World Geodetic System 1984",
            ELLIPSOID["WGS 84",6378137,298.257223563,
                LENGTHUNIT["metre",1]],
            ID["EPSG",6326]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["Degree",0.0174532925199433]]],
    CONVERSION["unnamed",
        METHOD["Transverse Mercator",
            ID["EPSG",9807]],
        PARAMETER["Latitude of natural origin",1.36666666666667,
            ANGLEUNIT["Degree",0.0174532925199433],
            ID["EPSG",8801]],
        PARAMETER["Longitude of natural origin",103.833333333333,
            ANGLEUNIT["Degree",0.0174532925199433],
            ID["EPSG",8802]],
        PARAMETER["Scale factor at natural origin",1,
            SCALEUNIT["unity",1],
            ID["EPSG",8805]],
        PARAMETER["False easting",28001.642,
            LENGTHUNIT["metre",1],
            ID["EPSG",8806]],
        PARAMETER["False northing",38744.572,
            LENGTHUNIT["metre",1],
            ID["EPSG",8807]]],
    CS[Cartesian,2],
        AXIS["(E)",east,
            ORDER[1],
            LENGTHUNIT["metre",1,
                ID["EPSG",9001]]],
        AXIS["(N)",north,
            ORDER[2],
            LENGTHUNIT["metre",1,
                ID["EPSG",9001]]]]</code></pre>
</div>
</div>
<p>We see EPSG value is 9001, which correspond to WGS84. We have to fix the projection by transforming to EPSG value of 3414, which corresponds to SVY21.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>busstops <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(busstops, <span class="at">crs =</span> <span class="dv">3414</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can do a visual check to confirm if the map has been imported as expected.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_options</span>(<span class="at">check.and.fix =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mpsz) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"grey"</span>, <span class="at">title =</span> <span class="st">"Singapore Boundary"</span>) <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Map of bus stops in Singapore"</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="fl">1.0</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.4</span>, </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">0.4</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(busstops) <span class="sc">+</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="fl">0.005</span>, <span class="at">title =</span> <span class="st">"Bus Stops"</span>) <span class="sc">+</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>() <span class="sc">+</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The map shows that there are bus stops that are outside Singapore bounds (grey area). We will remove them as we are only interested in bus stops within Singapore. We will remove the points outside Singapore from our busstops data by using st_intersection(). We will just retain the BUS_STOP_N to remove the columns we do not need, and check the map again.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>busstops <span class="ot">&lt;-</span> busstops <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_intersection</span>(mpsz) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(BUS_STOP_N,)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_options</span>(<span class="at">check.and.fix =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mpsz) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"grey"</span>, <span class="at">title =</span> <span class="st">"Singapore Boundary"</span>) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Bus stops in Singapore"</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="fl">1.0</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.4</span>, </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">0.4</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(busstops) <span class="sc">+</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="fl">0.005</span>, <span class="at">title =</span> <span class="st">"Bus Stops"</span>) <span class="sc">+</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>() <span class="sc">+</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We now save to the data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(mpsz, <span class="st">"data/rds/mpsz.rds"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(busstops, <span class="st">"data/rds/busstops.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Creating the honeycomb grid Next, we create the honeycomb grid using st_make_grid(), providing cellsize of 750m.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>honeycomb <span class="ot">&lt;-</span> busstops <span class="sc">%&gt;%</span> <span class="fu">st_make_grid</span>(<span class="at">cellsize =</span> <span class="dv">750</span>,</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">what=</span><span class="st">"polygons"</span>,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">square =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_sf</span>() <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">lengths</span>(<span class="fu">st_intersects</span>(geometry, busstops)) <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can plot the hexagon grid as follow:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mpsz) <span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"grey"</span>, <span class="at">title =</span> <span class="st">"Singapore Boundary"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(honeycomb) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">title =</span> <span class="st">"Hexagons"</span>, <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Honeycomb grid with bus stops"</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="fl">1.0</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.4</span>, </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">0.4</span>,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">bg.color =</span> <span class="st">"white"</span>, <span class="at">bg.alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">bg.color =</span> <span class="st">"white"</span>, <span class="at">bg.alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(busstops) <span class="sc">+</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="fl">0.001</span>, <span class="at">title =</span> <span class="st">"Bus Stops"</span>) <span class="sc">+</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Assigning id to each hexagon We will assign id for each hexagon to be used as a unique identifier. We will store this id under the hexagon_id column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>honeycomb<span class="sc">$</span>hexagon_id <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"H%04d"</span>, <span class="fu">seq_len</span>(<span class="fu">nrow</span>(honeycomb))) <span class="sc">%&gt;%</span> <span class="fu">as.factor</span>()</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(honeycomb))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">geometry</th>
<th style="text-align: left;">hexagon_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">POLYGON ((3970.122 27348.13…</td>
<td style="text-align: left;">H0001</td>
</tr>
<tr class="even">
<td style="text-align: left;">POLYGON ((4345.122 27997.65…</td>
<td style="text-align: left;">H0002</td>
</tr>
<tr class="odd">
<td style="text-align: left;">POLYGON ((4345.122 30595.72…</td>
<td style="text-align: left;">H0003</td>
</tr>
<tr class="even">
<td style="text-align: left;">POLYGON ((4720.122 28647.16…</td>
<td style="text-align: left;">H0004</td>
</tr>
<tr class="odd">
<td style="text-align: left;">POLYGON ((4720.122 29946.2,…</td>
<td style="text-align: left;">H0005</td>
</tr>
<tr class="even">
<td style="text-align: left;">POLYGON ((4720.122 31245.24…</td>
<td style="text-align: left;">H0006</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We save this main geometry</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(honeycomb, <span class="st">"data/rds/honeycomb.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importing-the-origin-destination-od-data" class="level3">
<h3 class="anchored" data-anchor-id="importing-the-origin-destination-od-data"><strong>4.1.2 Importing the Origin-Destination (OD) data</strong></h3>
<p>We will start by loading the relevant datasets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>mpsz <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/mpsz.rds"</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>honeycomb <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/honeycomb.rds"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>busstops <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/busstops.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we will import the <em>Passenger Volume by Origin Destination Bus Stops</em> data set downloaded from LTA DataMall by using <code>read_csv()</code> of <strong>readr</strong> package. For this hands-on we will use data captured in Oct 2023.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>odbus <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/aspatial/origin_destination_bus_202310.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will check odbus tibble data table by using the code chunk below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(odbus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 5,694,297
Columns: 7
$ YEAR_MONTH          &lt;chr&gt; "2023-10", "2023-10", "2023-10", "2023-10", "2023-…
$ DAY_TYPE            &lt;chr&gt; "WEEKENDS/HOLIDAY", "WEEKDAY", "WEEKENDS/HOLIDAY",…
$ TIME_PER_HOUR       &lt;dbl&gt; 16, 16, 14, 14, 17, 17, 17, 7, 14, 14, 10, 20, 20,…
$ PT_TYPE             &lt;chr&gt; "BUS", "BUS", "BUS", "BUS", "BUS", "BUS", "BUS", "…
$ ORIGIN_PT_CODE      &lt;chr&gt; "04168", "04168", "80119", "80119", "44069", "2028…
$ DESTINATION_PT_CODE &lt;chr&gt; "10051", "10051", "90079", "90079", "17229", "2014…
$ TOTAL_TRIPS         &lt;dbl&gt; 3, 5, 3, 5, 4, 1, 24, 2, 1, 7, 3, 2, 5, 1, 1, 1, 1…</code></pre>
</div>
</div>
<p>A quick check of odbus tibble data frame shows that the values in OROGIN_PT_CODE and DESTINATON_PT_CODE are char type. Hence no further conversion is required.</p>
</section>
<section id="extracting-the-od-study-data" class="level3">
<h3 class="anchored" data-anchor-id="extracting-the-od-study-data"><strong>4.1.3 Extracting the OD study data</strong></h3>
<p>For the purpose of this exercise, <strong>we will focus on analyzing the commuter flows for Weekday Morning Peak only.</strong> Hence we will extract commuting flows on weekday and between 6 and 9 o’clock.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>odbus6_9 <span class="ot">&lt;-</span> odbus <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DAY_TYPE <span class="sc">==</span> <span class="st">"WEEKDAY"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TIME_PER_HOUR <span class="sc">&gt;=</span> <span class="dv">6</span> <span class="sc">&amp;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>           TIME_PER_HOUR <span class="sc">&lt;=</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ORIGIN_PT_CODE,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>           DESTINATION_PT_CODE) <span class="sc">%&gt;%</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">TRIPS =</span> <span class="fu">sum</span>(TOTAL_TRIPS)) <span class="sc">%&gt;%</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ORIG_BUS_STOP_N =</span> ORIGIN_PT_CODE,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">DEST_BUS_STOP_N =</span> DESTINATION_PT_CODE)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(odbus6_9)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 242,208
Columns: 3
Groups: ORIG_BUS_STOP_N [5,029]
$ ORIG_BUS_STOP_N &lt;chr&gt; "01012", "01012", "01012", "01012", "01012", "01012", …
$ DEST_BUS_STOP_N &lt;chr&gt; "01112", "01113", "01121", "01211", "01311", "07371", …
$ TRIPS           &lt;dbl&gt; 290, 118, 77, 118, 165, 14, 30, 16, 35, 26, 2, 8, 1, 2…</code></pre>
</div>
</div>
<p>Creating lookup table to link bus stop to hexagon Next, we want to link the trip data to the their corresponding hexagon. We will create a lookup table via st_intersection().</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>busstop_hex <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(busstops, honeycomb) <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(BUS_STOP_N, hexagon_id))</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(busstop_hex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 5,154
Columns: 2
$ BUS_STOP_N &lt;chr&gt; "25059", "25751", "26379", "26369", "25741", "26399", "2638…
$ hexagon_id &lt;fct&gt; H0001, H0002, H0003, H0003, H0004, H0005, H0005, H0005, H00…</code></pre>
</div>
</div>
<p>Next, we want to associate each origin bus stop and destination bus stop to their respective hexagons. First, we do a check on odbus6_9 and busstop_hex data to find out if there is any difference in bus stops listed in the 2 sets of data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  odbus6_9<span class="sc">$</span>ORIG_BUS_STOP_N[<span class="sc">!</span>(odbus6_9<span class="sc">$</span>ORIG_BUS_STOP_N <span class="sc">%in%</span> busstop_hex<span class="sc">$</span>BUS_STOP_N)],</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  odbus6_9<span class="sc">$</span>DEST_BUS_STOP_N[<span class="sc">!</span>(odbus6_9<span class="sc">$</span>DEST_BUS_STOP_N <span class="sc">%in%</span> busstop_hex<span class="sc">$</span>BUS_STOP_N)]</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 62</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(busstop_hex<span class="sc">$</span>BUS_STOP_N) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5139</code></pre>
</div>
</div>
<p>We note that 62 bus stops in odbus6_9 that are not in busstop_hex. This can be attributed to the bus stops we removed in the data preparation due to them being outside Singapore or also because the BusStops data set did not having complete information.</p>
<p>As the effort required to manually map all of them (using google, LTA data) can be quite substantial and missing information consists of only approximately 1% of the odbus6_9 dataset, for the purposes of the study, we will remove these bus stops from our analysis as we do not have the geospatial data to associate to the hexagons from the data sets made available to us.</p>
<p>we will use inner_join to keep only the observations in trips with the matching bus stops in busstop_hex.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>odbus6_9_hex <span class="ot">&lt;-</span> odbus6_9 <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(busstop_hex,</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ORIG_BUS_STOP_N"</span> <span class="ot">=</span> <span class="st">"BUS_STOP_N"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">ORIG_HEX_ID =</span> hexagon_id) <span class="sc">%&gt;%</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(busstop_hex,</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"DEST_BUS_STOP_N"</span> <span class="ot">=</span> <span class="st">"BUS_STOP_N"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">DEST_HEX_ID =</span> hexagon_id)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(odbus6_9_hex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 238,953
Columns: 5
Groups: ORIG_BUS_STOP_N [4,965]
$ ORIG_BUS_STOP_N &lt;chr&gt; "01012", "01012", "01012", "01012", "01012", "01012", …
$ DEST_BUS_STOP_N &lt;chr&gt; "01112", "01113", "01121", "01211", "01311", "07371", …
$ TRIPS           &lt;dbl&gt; 290, 118, 77, 118, 165, 14, 30, 16, 35, 26, 2, 8, 1, 2…
$ ORIG_HEX_ID     &lt;fct&gt; H0515, H0515, H0515, H0515, H0515, H0515, H0515, H0515…
$ DEST_HEX_ID     &lt;fct&gt; H0527, H0527, H0550, H0550, H0561, H0561, H0551, H0573…</code></pre>
</div>
</div>
<p>Next, we will sum up the no. of trips at hexagon level by aggregate using ORIG_HEX_ID and DEST_HEX_ID.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>od6_9hex <span class="ot">&lt;-</span> odbus6_9_hex <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ORIG_HEX_ID, DEST_HEX_ID) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">TRIPS =</span> <span class="fu">sum</span>(TRIPS))</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(od6_9hex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 65,591
Columns: 3
Groups: ORIG_HEX_ID [814]
$ ORIG_HEX_ID &lt;fct&gt; H0001, H0001, H0001, H0001, H0001, H0001, H0002, H0002, H0…
$ DEST_HEX_ID &lt;fct&gt; H0005, H0008, H0016, H0027, H0032, H0033, H0001, H0005, H0…
$ TRIPS       &lt;dbl&gt; 1, 1, 4, 3, 93, 1, 1, 2, 1, 2, 3, 1, 2, 40, 1, 1, 3, 2, 2,…</code></pre>
</div>
</div>
<p>We will save the output.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(busstop_hex, <span class="st">"data/rds/busstop_hex.rds"</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(od6_9hex, <span class="st">"data/rds/od6_9hex.rds"</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(odbus6_9, <span class="st">"data/rds/odbus6_9.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creating-the-flow-lines" class="level3">
<h3 class="anchored" data-anchor-id="creating-the-flow-lines">4,1,4 Creating the flow lines</h3>
<p>We will create the flow lines as follow using the below code chunk.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>flowlines <span class="ot">&lt;-</span> od6_9hex <span class="sc">%&gt;%</span> <span class="fu">od2line</span>(</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  honeycomb,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">zone_code =</span> <span class="st">"hexagon_id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we will do a check of the flow lines.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mpsz) <span class="sc">+</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"grey"</span>, <span class="at">title =</span> <span class="st">"Singapore Boundary"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(honeycomb) <span class="sc">+</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">title =</span> <span class="st">"Hexagons"</span>, <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(flowlines) <span class="sc">+</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">lwd =</span> <span class="st">"TRIPS"</span>,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">style =</span> <span class="st">"quantile"</span>,</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">col =</span> <span class="st">"red"</span>,</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">scale =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>),</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">title.lwd =</span> <span class="st">"# of bus trips"</span>,</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Bus Passenger flow for Weekday morning peak 6AM - 9AM (October 2023)"</span>,</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="fl">1.0</span>,</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.4</span>, </span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">0.4</span>,</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">bg.color =</span> <span class="st">"white"</span>, <span class="at">bg.alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">bg.color =</span> <span class="st">"white"</span>, <span class="at">bg.alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The above flowlines are very messy and highly skewed. Let us do a filter for trips &gt; 5000 to identify the trips that are more significant.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mpsz) <span class="sc">+</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"grey"</span>, <span class="at">title =</span> <span class="st">"Singapore Boundary"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(honeycomb) <span class="sc">+</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">title =</span> <span class="st">"Hexagons"</span>, <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(flowlines <span class="sc">%&gt;%</span> <span class="fu">filter</span>(TRIPS <span class="sc">&gt;=</span> <span class="dv">5000</span>)) <span class="sc">+</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">lwd =</span> <span class="st">"TRIPS"</span>,</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">style =</span> <span class="st">"quantile"</span>,</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">col =</span> <span class="st">"red"</span>,</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">scale =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>),</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">title.lwd =</span> <span class="st">"# of bus trips"</span>,</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Bus Passenger flow for Weekday morning peak 6AM - 9AM (October 2023)"</span>,</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="fl">1.0</span>,</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.4</span>, </span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">0.4</span>,</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">bg.color =</span> <span class="st">"white"</span>, <span class="at">bg.alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">bg.color =</span> <span class="st">"white"</span>, <span class="at">bg.alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We will save the flowlines output in rds format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(flowlines, <span class="st">"data/rds/flowlines.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, let us look determine the variables for attractiveness and propulsiveness</p>
</section>
<section id="attractiveness-variables" class="level3">
<h3 class="anchored" data-anchor-id="attractiveness-variables"><strong>4.1.5 Attractiveness Variables</strong></h3>
<p>We first initiate attractiveness from honeycomb.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>attractiveness <span class="ot">&lt;-</span> honeycomb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For all the variables, we will use a combination of lengths() and st_intersects() to derive the count for the number of each location types for each hexagon.{</p>
<p><strong>For Bus Stops:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>attractiveness<span class="sc">$</span>BUS_STOP_COUNT <span class="ot">&lt;-</span> <span class="fu">lengths</span>(</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_intersects</span>(attractiveness, busstops))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>For Train Exit Stations</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>train_exits <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"data/geospatial"</span>, <span class="at">layer =</span> <span class="st">"Train_Station_Exit_Layer"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `Train_Station_Exit_Layer' from data source 
  `D:\starweb84\ISSS624\Take-home_Ex\Take-home_Ex2\data\geospatial' 
  using driver `ESRI Shapefile'
Simple feature collection with 565 features and 2 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 6134.086 ymin: 27499.7 xmax: 45356.36 ymax: 47865.92
Projected CRS: SVY21</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">#EPSG value is 9001, which correspond to WGS84. To fix the projection, we have to transform to EPSG value of 3414, which corresponds to SVY21.</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>train_exits <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(train_exits, <span class="at">crs =</span> <span class="dv">3414</span>)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>attractiveness<span class="sc">$</span>TRAIN_EXITS_COUNT <span class="ot">&lt;-</span> <span class="fu">lengths</span>(<span class="fu">st_intersects</span>(attractiveness, train_exits))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>For FinServ</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>FinServ <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"data/geospatial"</span>, <span class="at">layer =</span> <span class="st">"FinServ"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `FinServ' from data source 
  `D:\starweb84\ISSS624\Take-home_Ex\Take-home_Ex2\data\geospatial' 
  using driver `ESRI Shapefile'
Simple feature collection with 3320 features and 3 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 4881.527 ymin: 25171.88 xmax: 46526.16 ymax: 49338.02
Projected CRS: SVY21 / Singapore TM</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">#EPSG value is 9001, which correspond to WGS84. To fix the projection, we have to transform to EPSG value of 3414, which corresponds to SVY21.</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>FinServ  <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(FinServ , <span class="at">crs =</span> <span class="dv">3414</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>attractiveness<span class="sc">$</span>FinServ_COUNT <span class="ot">&lt;-</span> <span class="fu">lengths</span>(<span class="fu">st_intersects</span>(attractiveness, FinServ ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>For Business`</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>Business <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"data/geospatial"</span>, <span class="at">layer =</span> <span class="st">"Business"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `Business' from data source 
  `D:\starweb84\ISSS624\Take-home_Ex\Take-home_Ex2\data\geospatial' 
  using driver `ESRI Shapefile'
Simple feature collection with 6550 features and 3 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 3669.148 ymin: 25408.41 xmax: 47034.83 ymax: 50148.54
Projected CRS: SVY21 / Singapore TM</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co">#EPSG value is 9001, which correspond to WGS84. To fix the projection, we have to transform to EPSG value of 3414, which corresponds to SVY21.</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>Business  <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(Business , <span class="at">crs =</span> <span class="dv">3414</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>attractiveness<span class="sc">$</span>Business_COUNT <span class="ot">&lt;-</span> <span class="fu">lengths</span>(<span class="fu">st_intersects</span>(attractiveness, Business ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>For Pre-Schools</strong> We will import Pre-Schools Locations kml file from data.gov.sg. This variable is potentially one of the attractiveness of our destinations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>preschool <span class="ot">=</span> <span class="fu">st_read</span>(<span class="st">'data/geospatial/PreschoolsLocation.kml'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(preschool, <span class="at">crs=</span><span class="dv">3414</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `PRESCHOOLS_LOCATION' from data source 
  `D:\starweb84\ISSS624\Take-home_Ex\Take-home_Ex2\data\geospatial\PreSchoolsLocation.kml' 
  using driver `KML'
Simple feature collection with 2290 features and 2 fields
Geometry type: POINT
Dimension:     XYZ
Bounding box:  xmin: 103.6878 ymin: 1.247759 xmax: 103.9897 ymax: 1.462134
z_range:       zmin: 0 zmax: 0
Geodetic CRS:  WGS 84</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>attractiveness<span class="sc">$</span>preschool_COUNT <span class="ot">&lt;-</span> <span class="fu">lengths</span>(<span class="fu">st_intersects</span>(attractiveness, preschool ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(attractiveness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 831
Columns: 7
$ geometry          &lt;POLYGON [m]&gt; POLYGON ((3970.122 27348.13..., POLYGON ((43…
$ hexagon_id        &lt;fct&gt; H0001, H0002, H0003, H0004, H0005, H0006, H0007, H00…
$ BUS_STOP_COUNT    &lt;int&gt; 1, 1, 2, 1, 4, 1, 1, 1, 4, 2, 1, 3, 2, 5, 2, 1, 1, 5…
$ TRAIN_EXITS_COUNT &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ FinServ_COUNT     &lt;int&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ Business_COUNT    &lt;int&gt; 0, 5, 4, 1, 50, 27, 3, 3, 66, 52, 4, 10, 23, 41, 2, …
$ preschool_COUNT   &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…</code></pre>
</div>
</div>
<p>We note attractiveness is still missing HDB_COUNT. As we note that additional processing is needed to derive that, we will save this data first.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(attractiveness, <span class="st">"data/rds/attractiveness_no_hdb.rds"</span>)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(train_exits, <span class="st">"data/rds/train_exits.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="derive-passengers-alighting-from-bus-stop" class="level4">
<h4 class="anchored" data-anchor-id="derive-passengers-alighting-from-bus-stop"><strong>4.1.5.1 Derive Passengers Alighting from Bus Stop</strong></h4>
<p>For this section, we first read the two database below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>busstop_hex <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/busstop_hex.rds"</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>odbus6_9 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/odbus6_9.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will aggregate the trips at destination at hexagon level and save as rds as it contains the data for propulsiveness variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>destbushex <span class="ot">&lt;-</span> odbus6_9 <span class="sc">%&gt;%</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(busstop_hex,</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">by =</span> <span class="fu">join_by</span>(DEST_BUS_STOP_N <span class="sc">==</span> BUS_STOP_N)) <span class="sc">%&gt;%</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hexagon_id) <span class="sc">%&gt;%</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">TRIPS =</span> <span class="fu">sum</span>(TRIPS))</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(destbushex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 816
Columns: 2
$ hexagon_id &lt;fct&gt; H0001, H0002, H0003, H0004, H0005, H0006, H0007, H0008, H00…
$ TRIPS      &lt;dbl&gt; 474, 2260, 2558, 530, 5999, 2777, 844, 132, 3623, 2207, 4, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(destbushex, <span class="st">"data/rds/destbushex.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="derive-train-passenger-data" class="level4">
<h4 class="anchored" data-anchor-id="derive-train-passenger-data"><strong>4.1.5.2 Derive Train Passenger Data</strong></h4>
<p>For this section, we first read the two database below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>honeycomb <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/honeycomb.rds"</span>)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>train_exits <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/train_exits.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will next import that datasets for train passenger data, station code and names.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>od_train <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/aspatial/origin_destination_train_202310.csv"</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>stationcodes_names <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/aspatial/TrainStationCodesandChineseNames.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Firstly we extract the station code and names so that we can connect the passenger data and train_exits data, given only ne has train station code and the other only have station name.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>stationcodes_names <span class="ot">&lt;-</span> stationcodes_names <span class="sc">%&gt;%</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(stn_code, mrt_station_english)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we extract for weekday 6AM - 9AM, and the columns DESTINATION_PT_CODE and TOTAL_TRIPS since we are only interested in passengers leaving the train station.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>od_train_trips <span class="ot">&lt;-</span> od_train <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DAY_TYPE <span class="sc">==</span> <span class="st">"WEEKDAY"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>( TIME_PER_HOUR <span class="sc">&gt;=</span> <span class="dv">6</span> <span class="sc">&amp;</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>            TIME_PER_HOUR <span class="sc">&lt;</span> <span class="dv">9</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>          ) <span class="sc">%&gt;%</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(DESTINATION_PT_CODE) <span class="sc">%&gt;%</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">TRIPS =</span> <span class="fu">sum</span>(TOTAL_TRIPS)) <span class="sc">%&gt;%</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">TRAIN_ST_CODE =</span> DESTINATION_PT_CODE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s check the data we extracted so far.</p>
<p><strong>Stationcodes_names</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(stationcodes_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 203
Columns: 2
$ stn_code            &lt;chr&gt; "NS1", "NS2", "NS3", "NS4", "NS5", "NS7", "NS8", "…
$ mrt_station_english &lt;chr&gt; "Jurong East", "Bukit Batok", "Bukit Gombak", "Cho…</code></pre>
</div>
</div>
<p>We note the station names are not capitalized. For the station names, we will capitalize the names as the names are also capitalized in train_exits.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>stationcodes_names <span class="ot">&lt;-</span> stationcodes_names <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stn_name =</span> <span class="fu">toupper</span>(mrt_station_english))</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(stationcodes_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 203
Columns: 3
$ stn_code            &lt;chr&gt; "NS1", "NS2", "NS3", "NS4", "NS5", "NS7", "NS8", "…
$ mrt_station_english &lt;chr&gt; "Jurong East", "Bukit Batok", "Bukit Gombak", "Cho…
$ stn_name            &lt;chr&gt; "JURONG EAST", "BUKIT BATOK", "BUKIT GOMBAK", "CHO…</code></pre>
</div>
</div>
<p><strong>od_train_trips</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(od_train_trips)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 171
Columns: 2
$ TRAIN_ST_CODE &lt;chr&gt; "BP10", "BP11", "BP12", "BP13", "BP2", "BP3", "BP4", "BP…
$ TRIPS         &lt;dbl&gt; 7672, 6307, 11422, 2738, 5953, 6438, 30931, 8105, 163178…</code></pre>
</div>
</div>
<p>We note that there are multiple station codes in TRAIN_ST_CODE column. However, in station_codes_names, the stn_code column only has 1 station code. We have to separate these station codes into their own rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>od_train_trips <span class="ot">&lt;-</span> od_train_trips <span class="sc">%&gt;%</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(TRAIN_ST_CODE, <span class="at">sep=</span><span class="st">"/"</span>)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(od_train_trips)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 203
Columns: 2
$ TRAIN_ST_CODE &lt;chr&gt; "BP10", "BP11", "BP12", "BP13", "BP2", "BP3", "BP4", "BP…
$ TRIPS         &lt;dbl&gt; 7672, 6307, 11422, 2738, 5953, 6438, 30931, 8105, 163178…</code></pre>
</div>
</div>
<p>We check with both data frames now have the same noumber of rows to be mapped.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(stationcodes_names) <span class="sc">==</span> <span class="fu">nrow</span>(od_train_trips)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p><strong>train_exits</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(train_exits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 565
Columns: 3
$ stn_name  &lt;chr&gt; "MACPHERSON MRT STATION", "MACPHERSON MRT STATION", "MACPHER…
$ exit_code &lt;chr&gt; "Exit A", "Exit B", "Exit C", "Exit B", "Exit A", "Exit A", …
$ geometry  &lt;POINT [m]&gt; POINT (34285.07 34322.99), POINT (34382.15 34231.9), P…</code></pre>
</div>
</div>
<p>We note that station names in train_exits have MRT STATION or LRT STATION in their names which is not present in station_code_names. In order to ensure that we can join the tables properly. we will remove this part of the station name.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>train_exits <span class="ot">&lt;-</span> train_exits <span class="sc">%&gt;%</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stn_name_short =</span> <span class="fu">gsub</span>(<span class="st">" [ML]RT STATION$"</span> , <span class="st">""</span>, stn_name))</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(train_exits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 565
Columns: 4
$ stn_name       &lt;chr&gt; "MACPHERSON MRT STATION", "MACPHERSON MRT STATION", "MA…
$ exit_code      &lt;chr&gt; "Exit A", "Exit B", "Exit C", "Exit B", "Exit A", "Exit…
$ geometry       &lt;POINT [m]&gt; POINT (34285.07 34322.99), POINT (34382.15 34231.…
$ stn_name_short &lt;chr&gt; "MACPHERSON", "MACPHERSON", "MACPHERSON", "TONGKANG", "…</code></pre>
</div>
</div>
<p>Next, let us look at joining the table for station_code_names and od_train_trips using the below code chunk.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>od_train_trips_with_name <span class="ot">&lt;-</span> stationcodes_names <span class="sc">%&gt;%</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(od_train_trips,</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(stn_code <span class="sc">==</span> TRAIN_ST_CODE)) <span class="sc">%&gt;%</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(stn_name, TRIPS) <span class="sc">%&gt;%</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(od_train_trips_with_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 171
Columns: 2
$ stn_name &lt;chr&gt; "JURONG EAST", "BUKIT BATOK", "BUKIT GOMBAK", "CHOA CHU KANG"…
$ TRIPS    &lt;dbl&gt; 482713, 119936, 48451, 152682, 96331, 119073, 65880, 213784, …</code></pre>
</div>
</div>
<p>Next, we will join the train_exits to the previous table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>od_train_exits <span class="ot">&lt;-</span> train_exits <span class="sc">%&gt;%</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(od_train_trips_with_name,</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(stn_name_short <span class="sc">==</span> stn_name)) <span class="sc">%&gt;%</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">STN_NAME =</span> stn_name) <span class="sc">%&gt;%</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">EXIT_CODE =</span> exit_code) <span class="sc">%&gt;%</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(STN_NAME, EXIT_CODE, TRIPS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we can aggregate the trips at a hexagon level.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>od_train_hex <span class="ot">&lt;-</span> honeycomb <span class="sc">%&gt;%</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_join</span>(od_train_exits,</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">left =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hexagon_id) <span class="sc">%&gt;%</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">TRIPS =</span> <span class="fu">sum</span>(TRIPS))</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(od_train_hex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 184
Columns: 3
$ hexagon_id &lt;fct&gt; H0028, H0032, H0038, H0051, H0065, H0100, H0117, H0145, H01…
$ TRIPS      &lt;dbl&gt; 73740, 136714, 143032, 123218, 501924, 221924, 1497738, 380…
$ geometry   &lt;POLYGON [m]&gt; POLYGON ((6220.122 35142.35..., POLYGON ((6595.122 …</code></pre>
</div>
</div>
<p>We will save this dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(od_train_hex, <span class="st">"data/rds/od_train_hex.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="deriving-hdb-population" class="level4">
<h4 class="anchored" data-anchor-id="deriving-hdb-population"><strong>4.1.5.3 Deriving HDB population</strong></h4>
<p>For this section, we will look at the following dataframes</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>mpsz <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/mpsz.rds"</span>)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>honeycomb <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/honeycomb.rds"</span>)</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>attractiveness <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/attractiveness_no_hdb.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To derive population data for each zone, we first initialize data to store hdb_vars from honeycomb.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>hdb_vars <span class="ot">&lt;-</span> honeycomb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we import the aspatial data hdb.csv</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>hdb_csv <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/aspatial/hdb.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There appears to be geospatial information on lattidue and longtitude within the fields. Let us convert this into a sf data type, which uses SVY21.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>hdb_sf <span class="ot">&lt;-</span> hdb_csv <span class="sc">%&gt;%</span> <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"lng"</span>, <span class="st">"lat"</span>),</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">%&gt;%</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="at">crs =</span> <span class="dv">3414</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let’s add the HDB_COUNT column on hdb_vars dataframe using the below code chunk, and join it to the attractiveness dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>hdb_vars<span class="sc">$</span>HDB_COUNT <span class="ot">&lt;-</span> <span class="fu">lengths</span>(<span class="fu">st_intersects</span>(hdb_vars, hdb_sf))</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>attractiveness <span class="ot">&lt;-</span> <span class="fu">left_join</span>(attractiveness,</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">st_drop_geometry</span>(hdb_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We note that some of the dwellings are not listed as residential. For purposes of calculating population estimate, we will focus on residential properties, and use the dataframe below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>hdb_filtered_sf <span class="ot">&lt;-</span> hdb_sf <span class="sc">%&gt;%</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(residential <span class="sc">==</span> <span class="st">"Y"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(total_dwelling_units)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Given HDB count can be a variable used, there should be consideration that HDB blocks are different sizes. Research noted that according to the 2022 information from Department of Statistics, the average household size is 3.09 person. As we do not have information of how many persons actually live in each househould, we will use total_dwelling_units multiplied by the average - 3.09 - to improve our population estimate, using the code chunk below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>hdb_vars <span class="ot">&lt;-</span> hdb_vars <span class="sc">%&gt;%</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_intersection</span>(hdb_filtered_sf, hdb_vars) <span class="sc">%&gt;%</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(hexagon_id) <span class="sc">%&gt;%</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">HDB_RESIDENT_COUNT =</span> <span class="fu">sum</span>(total_dwelling_units))</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(hdb_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 831
Columns: 4
$ hexagon_id         &lt;fct&gt; H0001, H0002, H0003, H0004, H0005, H0006, H0007, H0…
$ HDB_COUNT          &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ HDB_RESIDENT_COUNT &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ geometry           &lt;POLYGON [m]&gt; POLYGON ((3970.122 27348.13..., POLYGON ((4…</code></pre>
</div>
</div>
</section>
</section>
<section id="deriving-schoool-information" class="level3">
<h3 class="anchored" data-anchor-id="deriving-schoool-information"><strong>4.1.6 Deriving Schoool information</strong></h3>
<p>We will import the Schools general information in csv format , downloaded from School Directory and Information from data.gov.sg. It contains location (implicitly in the form of the field ‘POSTAL_CODE’) of the MOE kindergartens, Primary Schools , Secondary Schools and junior colleges. It does not contain ITEs , Polytechnics and Universities locations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>school <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'data/aspatial/Generalinformationofschools.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Geocoding the schools location We will use the OneMap API to retrieve the longitude (X) and latitude (Y) coordinates using the ‘POSTAL_CODE’ field. First load the httr package which works in a TIDY manner.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">'httr'</span>)</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">'https://www.onemap.gov.sg/api/common/elastic/search'</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>postcodes <span class="ot">&lt;-</span> school<span class="sc">$</span><span class="st">`</span><span class="at">postal_code</span><span class="st">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we create 2 frames to contain the results.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>found <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>not_found <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(postcode <span class="cf">in</span> postcodes) {</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  query <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">'searchVal'</span> <span class="ot">=</span> postcode, <span class="st">'returnGeom'</span> <span class="ot">=</span> <span class="st">'Y'</span>, <span class="st">'getAddrDetails'</span> <span class="ot">=</span> <span class="st">'Y'</span>, <span class="st">'pageNum'</span> <span class="ot">=</span> <span class="st">'1'</span>)</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">GET</span>(url, <span class="at">query=</span>query)</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>((<span class="fu">content</span>(res)<span class="sc">$</span>found)<span class="sc">!=</span><span class="dv">0</span>){</span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>    found<span class="ot">&lt;-</span><span class="fu">rbind</span>(found, <span class="fu">data.frame</span>(<span class="fu">content</span>(res))[<span class="dv">4</span><span class="sc">:</span><span class="dv">13</span>])</span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span>{</span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>    not_found <span class="ot">=</span> <span class="fu">data.frame</span>(postcode)</span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>merged <span class="ot">=</span> <span class="fu">merge</span>(school, found, <span class="at">by.x =</span> <span class="st">'postal_code'</span> , <span class="at">by.y=</span><span class="st">'results.POSTAL'</span>, <span class="at">all=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We next write a merged into a csv file and manually add the longitude and latitude (1.3887, 103.7652 ) of Zhenghua Secondary into the csv file. After manual edit, we save out the file as schools_geocoded1.csv and reload the schools_geocoded.csv file in R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(merged, <span class="at">file =</span> <span class="st">'data/aspatial/schools_geocoded.csv'</span>)</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(not_found, <span class="at">file =</span> <span class="st">'data/aspatial/not_found.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>sch <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'data/aspatial/schools_geocoded1.csv'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(postal_code, school_name, results.LONGITUDE, results.LATITUDE )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we convert the data into sf point object in SVY21 format.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>sch_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(sch,</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">'results.LONGITUDE'</span>,<span class="st">'results.LATITUDE'</span>),</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">crs=</span><span class="dv">4326</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="at">crs=</span><span class="dv">3414</span>)</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>attractiveness<span class="sc">$</span>School_COUNT <span class="ot">&lt;-</span> <span class="fu">lengths</span>(<span class="fu">st_intersects</span>(attractiveness, sch_sf))</span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>attractiveness <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(School_COUNT)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 6 features and 8 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 15220.12 ymin: 31894.76 xmax: 37720.12 ymax: 42503.57
Projected CRS: SVY21 / Singapore TM
  hexagon_id BUS_STOP_COUNT TRAIN_EXITS_COUNT FinServ_COUNT Business_COUNT
1      H0210              1                 0             0              0
2      H0435              4                 1             1              0
3      H0707             11                 0             1              0
4      H0145              9                 3             5              0
5      H0169             11                 0             1              0
6      H0189             11                 4            14              0
  preschool_COUNT HDB_COUNT School_COUNT                       geometry
1               2        11            4 POLYGON ((18970.12 40338.51...
2               2         0            4 POLYGON ((27595.12 33193.8,...
3               2         5            4 POLYGON ((37345.12 31894.76...
4               2        12            3 POLYGON ((15595.12 35791.87...
5               4        12            3 POLYGON ((17470.12 36441.39...
6              12        66            3 POLYGON ((18220.12 41637.55...</code></pre>
</div>
</div>
<p>We will save the data at this stage.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(hdb_vars, <span class="st">"data/rds/hdb_vars.rds"</span>)</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(attractiveness, <span class="st">"data/rds/attractiveness.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="propulsiveness-variables" class="level3">
<h3 class="anchored" data-anchor-id="propulsiveness-variables"><strong>4.1.6 Propulsiveness variables</strong></h3>
<p>Let’s begin this section by loading the following data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>honeycomb <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/honeycomb.rds"</span>)</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>hdb_vars <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/hdb_vars.rds"</span>)</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>destbushex <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/destbushex.rds"</span>)</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>od_train_hex <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/od_train_hex.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We initiate propulsiveness dataframe from honeycomb</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>propulsiveness <span class="ot">&lt;-</span> honeycomb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We then add pasenger and population values that we have previously derived using the below code chunk:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>propulsiveness <span class="ot">&lt;-</span> propulsiveness <span class="sc">%&gt;%</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">st_drop_geometry</span>(hdb_vars)) <span class="sc">%&gt;%</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hexagon_id, HDB_RESIDENT_COUNT)</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>propulsiveness <span class="ot">&lt;-</span> propulsiveness <span class="sc">%&gt;%</span></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">st_drop_geometry</span>(destbushex)) <span class="sc">%&gt;%</span></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">BUS_ALIGHT_COUNT =</span> TRIPS)</span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>propulsiveness <span class="ot">&lt;-</span> propulsiveness <span class="sc">%&gt;%</span></span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">st_drop_geometry</span>(od_train_hex)) <span class="sc">%&gt;%</span></span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">TRAIN_ALIGHT_COUNT =</span> TRIPS)</span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(propulsiveness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 831
Columns: 5
$ hexagon_id         &lt;fct&gt; H0001, H0002, H0003, H0004, H0005, H0006, H0007, H0…
$ HDB_RESIDENT_COUNT &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ BUS_ALIGHT_COUNT   &lt;dbl&gt; 474, 2260, 2558, 530, 5999, 2777, 844, 132, 3623, 2…
$ TRAIN_ALIGHT_COUNT &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ geometry           &lt;POLYGON [m]&gt; POLYGON ((3970.122 27348.13..., POLYGON ((4…</code></pre>
</div>
</div>
<p>We noted that there are NA values. We will set these to 0.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>propulsiveness[<span class="fu">is.na</span>(propulsiveness)] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will now save this dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(propulsiveness, <span class="st">"data/rds/propulsiveness.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="generating-distance-table" class="level3">
<h3 class="anchored" data-anchor-id="generating-distance-table"><strong>4.1.7 Generating distance table</strong></h3>
<p>Now we can generate the distance table. Let us load the following dataframe first.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>honeycomb <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/honeycomb.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will generate the distance matrix using the following code chunk.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>dist_mat <span class="ot">&lt;-</span> <span class="fu">spDists</span>(<span class="fu">as</span>(honeycomb, <span class="st">"Spatial"</span>),</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">longlat =</span> <span class="cn">FALSE</span>)</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dist_mat) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(honeycomb<span class="sc">$</span>hexagon_id)</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(dist_mat) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(honeycomb<span class="sc">$</span>hexagon_id)</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(dist_mat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:831, 1:831] 0 750 3269 1500 2704 ...
 - attr(*, "dimnames")=List of 2
  ..$ : chr [1:831] "H0001" "H0002" "H0003" "H0004" ...
  ..$ : chr [1:831] "H0001" "H0002" "H0003" "H0004" ...</code></pre>
</div>
</div>
<p>Next we will generate a pivot table from our distance matrix and rename the columns as follow:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>dist_tbl <span class="ot">&lt;-</span> <span class="fu">melt</span>(dist_mat) <span class="sc">%&gt;%</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">DISTANCE =</span> value) <span class="sc">%&gt;%</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">ORIG_hexagon_id =</span> Var1) <span class="sc">%&gt;%</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">DEST_hexagon_id =</span> Var2)</span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(dist_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 690,561
Columns: 3
$ ORIG_hexagon_id &lt;fct&gt; H0001, H0002, H0003, H0004, H0005, H0006, H0007, H0008…
$ DEST_hexagon_id &lt;fct&gt; H0001, H0001, H0001, H0001, H0001, H0001, H0001, H0001…
$ DISTANCE        &lt;dbl&gt; 0.000, 750.000, 3269.174, 1500.000, 2704.163, 3968.627…</code></pre>
</div>
</div>
<section id="dealing-with-intra-zonal-distances" class="level4">
<h4 class="anchored" data-anchor-id="dealing-with-intra-zonal-distances"><strong>4.1.7.1 Dealing with intra-zonal distances</strong></h4>
<p>Intra-zonal distances are currently at 0. This may be a result of passengers taking a short bus ride to the next stop. We would have to set these to a value other than 0, as in the latter part where we are using log-based Poisson models, log operations will be undefined if the variable is zero. Given the distance between centroids of adjacent hexagons is 750m and is 375m to their edges, we decided to adopt a percentile apporach where we would take 50% of 375m (188m - rounded up) as an estimate of average intra-zonal distance.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>dist_tbl<span class="sc">$</span>DISTANCE[dist_tbl<span class="sc">$</span>ORIG_HEX_ID <span class="sc">==</span> dist_tbl<span class="sc">$</span>DEST_HEX_ID] <span class="ot">&lt;-</span> <span class="dv">188</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dist_tbl<span class="sc">$</span>DISTANCE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      0    8250   13269   14118   18929   44680 </code></pre>
</div>
</div>
<p>We will save this distribution table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(dist_tbl, <span class="st">"data/rds/dist_tbl.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="combining-the-data" class="level3">
<h3 class="anchored" data-anchor-id="combining-the-data">4.1.8 Combining the data</h3>
<p>Now we can combine the information to form the SIM_data set for modelling in the later stage. Let us load the needed data as follow:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>honeycomb <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/honeycomb.rds"</span>)</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>flowlines <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/flowlines.rds"</span>)</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>dist_tbl <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/dist_tbl.rds"</span>)</span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>attractiveness <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/attractiveness.rds"</span>)</span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>propulsiveness <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/propulsiveness.rds"</span>)</span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(honeycomb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 831
Columns: 2
$ geometry   &lt;POLYGON [m]&gt; POLYGON ((3970.122 27348.13..., POLYGON ((4345.122 …
$ hexagon_id &lt;fct&gt; H0001, H0002, H0003, H0004, H0005, H0006, H0007, H0008, H00…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(flowlines)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 65,591
Columns: 4
$ ORIG_HEX_ID &lt;fct&gt; H0001, H0001, H0001, H0001, H0001, H0001, H0002, H0002, H0…
$ DEST_HEX_ID &lt;fct&gt; H0005, H0008, H0016, H0027, H0032, H0033, H0001, H0005, H0…
$ TRIPS       &lt;dbl&gt; 1, 1, 4, 3, 93, 1, 1, 2, 1, 2, 3, 1, 2, 40, 1, 1, 3, 2, 2,…
$ geometry    &lt;LINESTRING [m]&gt; LINESTRING (3970.122 27781...., LINESTRING (397…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(dist_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 690,561
Columns: 3
$ ORIG_hexagon_id &lt;fct&gt; H0001, H0002, H0003, H0004, H0005, H0006, H0007, H0008…
$ DEST_hexagon_id &lt;fct&gt; H0001, H0001, H0001, H0001, H0001, H0001, H0001, H0001…
$ DISTANCE        &lt;dbl&gt; 0.000, 750.000, 3269.174, 1500.000, 2704.163, 3968.627…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(attractiveness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 831
Columns: 9
$ hexagon_id        &lt;fct&gt; H0001, H0002, H0003, H0004, H0005, H0006, H0007, H00…
$ BUS_STOP_COUNT    &lt;int&gt; 1, 1, 2, 1, 4, 1, 1, 1, 4, 2, 1, 3, 2, 5, 2, 1, 1, 5…
$ TRAIN_EXITS_COUNT &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ FinServ_COUNT     &lt;int&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ Business_COUNT    &lt;int&gt; 0, 5, 4, 1, 50, 27, 3, 3, 66, 52, 4, 10, 23, 41, 2, …
$ preschool_COUNT   &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ HDB_COUNT         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ geometry          &lt;POLYGON [m]&gt; POLYGON ((3970.122 27348.13..., POLYGON ((43…
$ School_COUNT      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(propulsiveness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 831
Columns: 5
$ hexagon_id         &lt;fct&gt; H0001, H0002, H0003, H0004, H0005, H0006, H0007, H0…
$ HDB_RESIDENT_COUNT &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ BUS_ALIGHT_COUNT   &lt;dbl&gt; 474, 2260, 2558, 530, 5999, 2777, 844, 132, 3623, 2…
$ TRAIN_ALIGHT_COUNT &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ geometry           &lt;POLYGON [m]&gt; POLYGON ((3970.122 27348.13..., POLYGON ((4…</code></pre>
</div>
</div>
<p>As flowlines contain the geometry of flowlines and TRIPS data, we will use it to initialize the SIM_data table We also adjust the column names to ensure joining is possible.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>flowlines <span class="ot">&lt;-</span> flowlines <span class="sc">%&gt;%</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">ORIG_hexagon_id =</span> ORIG_HEX_ID,</span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">DEST_hexagon_id =</span> DEST_HEX_ID)</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(flowlines)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 65,591
Columns: 4
$ ORIG_hexagon_id &lt;fct&gt; H0001, H0001, H0001, H0001, H0001, H0001, H0002, H0002…
$ DEST_hexagon_id &lt;fct&gt; H0005, H0008, H0016, H0027, H0032, H0033, H0001, H0005…
$ TRIPS           &lt;dbl&gt; 1, 1, 4, 3, 93, 1, 1, 2, 1, 2, 3, 1, 2, 40, 1, 1, 3, 2…
$ geometry        &lt;LINESTRING [m]&gt; LINESTRING (3970.122 27781...., LINESTRING …</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>SIM_data <span class="ot">&lt;-</span> flowlines</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we carry out the joining of the remaining tables.</p>
<p>For propulsives and attractives, we add a prefix O_ and D_ to denote that propulsiveness columns are for origins and D are for destination</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>SIM_data <span class="ot">&lt;-</span> SIM_data <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(dist_tbl)</span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(SIM_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 65,591
Columns: 5
$ ORIG_hexagon_id &lt;fct&gt; H0001, H0001, H0001, H0001, H0001, H0001, H0002, H0002…
$ DEST_hexagon_id &lt;fct&gt; H0005, H0008, H0016, H0027, H0032, H0033, H0001, H0005…
$ TRIPS           &lt;dbl&gt; 1, 1, 4, 3, 93, 1, 1, 2, 1, 2, 3, 1, 2, 40, 1, 1, 3, 2…
$ DISTANCE        &lt;dbl&gt; 2704.163, 2250.000, 1984.313, 6873.864, 7611.669, 8842…
$ geometry        &lt;LINESTRING [m]&gt; LINESTRING (3970.122 27781...., LINESTRING …</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>propulsiveness <span class="ot">&lt;-</span> propulsiveness<span class="sc">%&gt;%</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_with</span>(<span class="sc">~</span><span class="fu">paste</span>(<span class="st">"O_"</span>, .x, <span class="at">sep =</span> <span class="st">""</span>))</span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span> (propulsiveness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 831
Columns: 4
$ O_hexagon_id         &lt;fct&gt; H0001, H0002, H0003, H0004, H0005, H0006, H0007, …
$ O_HDB_RESIDENT_COUNT &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ O_BUS_ALIGHT_COUNT   &lt;dbl&gt; 474, 2260, 2558, 530, 5999, 2777, 844, 132, 3623,…
$ O_TRAIN_ALIGHT_COUNT &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co">#join propulsiveness</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>SIM_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>  SIM_data,</span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>  propulsiveness, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ORIG_hexagon_id"</span><span class="ot">=</span><span class="st">"O_hexagon_id"</span>))</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(SIM_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 65,591
Columns: 8
$ ORIG_hexagon_id      &lt;fct&gt; H0001, H0001, H0001, H0001, H0001, H0001, H0002, …
$ DEST_hexagon_id      &lt;fct&gt; H0005, H0008, H0016, H0027, H0032, H0033, H0001, …
$ TRIPS                &lt;dbl&gt; 1, 1, 4, 3, 93, 1, 1, 2, 1, 2, 3, 1, 2, 40, 1, 1,…
$ DISTANCE             &lt;dbl&gt; 2704.163, 2250.000, 1984.313, 6873.864, 7611.669,…
$ O_HDB_RESIDENT_COUNT &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ O_BUS_ALIGHT_COUNT   &lt;dbl&gt; 474, 474, 474, 474, 474, 474, 2260, 2260, 2260, 2…
$ O_TRAIN_ALIGHT_COUNT &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ geometry             &lt;LINESTRING [m]&gt; LINESTRING (3970.122 27781...., LINEST…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>attractiveness <span class="ot">&lt;-</span> attractiveness<span class="sc">%&gt;%</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_with</span>(<span class="sc">~</span><span class="fu">paste</span>(<span class="st">"D_"</span>, .x, <span class="at">sep =</span> <span class="st">""</span>))</span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span> (attractiveness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 831
Columns: 8
$ D_hexagon_id        &lt;fct&gt; H0001, H0002, H0003, H0004, H0005, H0006, H0007, H…
$ D_BUS_STOP_COUNT    &lt;int&gt; 1, 1, 2, 1, 4, 1, 1, 1, 4, 2, 1, 3, 2, 5, 2, 1, 1,…
$ D_TRAIN_EXITS_COUNT &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ D_FinServ_COUNT     &lt;int&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ D_Business_COUNT    &lt;int&gt; 0, 5, 4, 1, 50, 27, 3, 3, 66, 52, 4, 10, 23, 41, 2…
$ D_preschool_COUNT   &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ D_HDB_COUNT         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ D_School_COUNT      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>SIM_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>  SIM_data,</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>  attractiveness, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ORIG_hexagon_id"</span><span class="ot">=</span><span class="st">"D_hexagon_id"</span>))</span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(SIM_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 65,591
Columns: 15
$ ORIG_hexagon_id      &lt;fct&gt; H0001, H0001, H0001, H0001, H0001, H0001, H0002, …
$ DEST_hexagon_id      &lt;fct&gt; H0005, H0008, H0016, H0027, H0032, H0033, H0001, …
$ TRIPS                &lt;dbl&gt; 1, 1, 4, 3, 93, 1, 1, 2, 1, 2, 3, 1, 2, 40, 1, 1,…
$ DISTANCE             &lt;dbl&gt; 2704.163, 2250.000, 1984.313, 6873.864, 7611.669,…
$ O_HDB_RESIDENT_COUNT &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ O_BUS_ALIGHT_COUNT   &lt;dbl&gt; 474, 474, 474, 474, 474, 474, 2260, 2260, 2260, 2…
$ O_TRAIN_ALIGHT_COUNT &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ D_BUS_STOP_COUNT     &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2…
$ D_TRAIN_EXITS_COUNT  &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ D_FinServ_COUNT      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ D_Business_COUNT     &lt;int&gt; 0, 0, 0, 0, 0, 0, 5, 5, 5, 5, 5, 5, 5, 5, 4, 4, 4…
$ D_preschool_COUNT    &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ D_HDB_COUNT          &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ D_School_COUNT       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ geometry             &lt;LINESTRING [m]&gt; LINESTRING (3970.122 27781...., LINEST…</code></pre>
</div>
</div>
<p>We do a check of the consolidated data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(SIM_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> ORIG_hexagon_id DEST_hexagon_id     TRIPS            DISTANCE    
 H0725  :  295   H0515  :  354   Min.   :    1.0   Min.   :    0  
 H0518  :  294   H0501  :  335   1st Qu.:    7.0   1st Qu.: 2704  
 H0515  :  293   H0537  :  325   Median :   38.0   Median : 5408  
 H0527  :  283   H0525  :  296   Mean   :  387.4   Mean   : 6283  
 H0678  :  280   H0518  :  295   3rd Qu.:  180.0   3rd Qu.: 8842  
 H0648  :  278   H0489  :  290   Max.   :77433.0   Max.   :24784  
 (Other):63868   (Other):63696                                    
 O_HDB_RESIDENT_COUNT O_BUS_ALIGHT_COUNT O_TRAIN_ALIGHT_COUNT D_BUS_STOP_COUNT
 Min.   :   0         Min.   :     3     Min.   :      0      Min.   : 1.000  
 1st Qu.:   0         1st Qu.: 16894     1st Qu.:      0      1st Qu.: 5.000  
 Median : 932         Median : 33608     Median :      0      Median : 8.000  
 Mean   :1849         Mean   : 55206     Mean   : 177740      Mean   : 7.911  
 3rd Qu.:3351         3rd Qu.: 65414     3rd Qu.:  92732      3rd Qu.:10.000  
 Max.   :7946         Max.   :477992     Max.   :6777452      Max.   :19.000  
                                                                              
 D_TRAIN_EXITS_COUNT D_FinServ_COUNT   D_Business_COUNT D_preschool_COUNT
 Min.   : 0.00       Min.   :  0.000   Min.   : 0.000   Min.   : 0.000   
 1st Qu.: 0.00       1st Qu.:  1.000   1st Qu.: 0.000   1st Qu.: 1.000   
 Median : 0.00       Median :  3.000   Median : 1.000   Median : 3.000   
 Mean   : 1.26       Mean   :  7.882   Mean   : 6.519   Mean   : 3.923   
 3rd Qu.: 2.00       3rd Qu.:  9.000   3rd Qu.: 6.000   3rd Qu.: 6.000   
 Max.   :13.00       Max.   :139.000   Max.   :97.000   Max.   :21.000   
                                                                         
  D_HDB_COUNT     D_School_COUNT           geometry    
 Min.   :  0.00   Min.   :0.000   LINESTRING   :65591  
 1st Qu.:  0.00   1st Qu.:0.000   epsg:3414    :    0  
 Median : 11.00   Median :0.000   +proj=tmer...:    0  
 Mean   : 20.76   Mean   :0.561                        
 3rd Qu.: 36.00   3rd Qu.:1.000                        
 Max.   :103.00   Max.   :4.000                        
                                                       </code></pre>
</div>
</div>
<p>In order to ensure the data is compatible with modelling, we need to remove the 0’s as we will apply log function to them, which would result to undefined. We will set these to 0.99 so we are aware that .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>replace_zeroes <span class="ot">&lt;-</span> <span class="cf">function</span>(data, col_name) {</span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>  data[[col_name]][data[[col_name]] <span class="sc">==</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="fl">0.99</span></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>  data</span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>SIM_data <span class="ot">&lt;-</span> SIM_data <span class="sc">%&gt;%</span></span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_zeroes</span>(<span class="st">"O_HDB_RESIDENT_COUNT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_zeroes</span>(<span class="st">"O_BUS_ALIGHT_COUNT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_zeroes</span>(<span class="st">"O_TRAIN_ALIGHT_COUNT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb140-10"><a href="#cb140-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_zeroes</span>(<span class="st">"D_BUS_STOP_COUNT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb140-11"><a href="#cb140-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_zeroes</span>(<span class="st">"D_TRAIN_EXITS_COUNT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb140-12"><a href="#cb140-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_zeroes</span>(<span class="st">"D_HDB_COUNT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb140-13"><a href="#cb140-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_zeroes</span>(<span class="st">"D_FinServ_COUNT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb140-14"><a href="#cb140-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_zeroes</span>(<span class="st">"D_preschool_COUNT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb140-15"><a href="#cb140-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_zeroes</span>(<span class="st">"D_School_COUNT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb140-16"><a href="#cb140-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_zeroes</span>(<span class="st">"D_Business_COUNT"</span>)</span>
<span id="cb140-17"><a href="#cb140-17" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(SIM_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> ORIG_hexagon_id DEST_hexagon_id     TRIPS            DISTANCE    
 H0725  :  295   H0515  :  354   Min.   :    1.0   Min.   :    0  
 H0518  :  294   H0501  :  335   1st Qu.:    7.0   1st Qu.: 2704  
 H0515  :  293   H0537  :  325   Median :   38.0   Median : 5408  
 H0527  :  283   H0525  :  296   Mean   :  387.4   Mean   : 6283  
 H0678  :  280   H0518  :  295   3rd Qu.:  180.0   3rd Qu.: 8842  
 H0648  :  278   H0489  :  290   Max.   :77433.0   Max.   :24784  
 (Other):63868   (Other):63696                                    
 O_HDB_RESIDENT_COUNT O_BUS_ALIGHT_COUNT O_TRAIN_ALIGHT_COUNT D_BUS_STOP_COUNT
 Min.   :   0.99      Min.   :     3     Min.   :      1      Min.   : 1.000  
 1st Qu.:   0.99      1st Qu.: 16894     1st Qu.:      1      1st Qu.: 5.000  
 Median : 932.00      Median : 33608     Median :      1      Median : 8.000  
 Mean   :1849.09      Mean   : 55206     Mean   : 177741      Mean   : 7.911  
 3rd Qu.:3351.00      3rd Qu.: 65414     3rd Qu.:  92732      3rd Qu.:10.000  
 Max.   :7946.00      Max.   :477992     Max.   :6777452      Max.   :19.000  
                                                                              
 D_TRAIN_EXITS_COUNT D_FinServ_COUNT  D_Business_COUNT D_preschool_COUNT
 Min.   : 0.990      Min.   :  0.99   Min.   : 0.990   Min.   : 0.990   
 1st Qu.: 0.990      1st Qu.:  1.00   1st Qu.: 0.990   1st Qu.: 1.000   
 Median : 0.990      Median :  3.00   Median : 1.000   Median : 3.000   
 Mean   : 1.888      Mean   :  8.12   Mean   : 6.965   Mean   : 4.101   
 3rd Qu.: 2.000      3rd Qu.:  9.00   3rd Qu.: 6.000   3rd Qu.: 6.000   
 Max.   :13.000      Max.   :139.00   Max.   :97.000   Max.   :21.000   
                                                                        
  D_HDB_COUNT     D_School_COUNT           geometry    
 Min.   :  0.99   Min.   :0.990   LINESTRING   :65591  
 1st Qu.:  0.99   1st Qu.:0.990   epsg:3414    :    0  
 Median : 11.00   Median :0.990   +proj=tmer...:    0  
 Mean   : 21.11   Mean   :1.183                        
 3rd Qu.: 36.00   3rd Qu.:1.000                        
 Max.   :103.00   Max.   :4.000                        
                                                       </code></pre>
</div>
</div>
<p>We now save the data frames.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(flowlines, <span class="st">"data/rds/flowlines.rds"</span>)</span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(SIM_data, <span class="st">"data/rds/SIM_data.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="visualizing-spatial-interactions" class="level1">
<h1><strong>5 Visualizing Spatial Interactions</strong></h1>
<p>Let us load the dataframes for the purpose of this section:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>mpsz <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/mpsz.rds"</span>)</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>honeycomb <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/honeycomb.rds"</span>)</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>flowlines <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/flowlines.rds"</span>)</span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>SIM_data <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/SIM_data.rds"</span>)</span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a>propulsiveness <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/propulsiveness.rds"</span>)</span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a>attractiveness <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/attractiveness.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>First we remove the intra-zonal flows to reduce no. of flow lines.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>flowlines_no_intra <span class="ot">&lt;-</span> flowlines <span class="sc">%&gt;%</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ORIG_hexagon_id <span class="sc">!=</span> DEST_hexagon_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we reviewed the quantile range, and noted that at 99%, there are some insights from the flows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(flowlines_no_intra<span class="sc">$</span>TRIPS,</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.85</span>, <span class="fl">0.9</span>, <span class="fl">0.95</span>, <span class="fl">0.99</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     85%      90%      95%      99%     100% 
  393.00   664.00  1417.00  6096.35 77433.00 </code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mpsz) <span class="sc">+</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"grey"</span>, <span class="at">title =</span> <span class="st">"Singapore Boundary"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(honeycomb) <span class="sc">+</span></span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">title =</span> <span class="st">"Hexagons"</span>, <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(flowlines_no_intra <span class="sc">%&gt;%</span> <span class="fu">filter</span>(TRIPS <span class="sc">&gt;</span> <span class="dv">6096</span>)) <span class="sc">+</span></span>
<span id="cb147-8"><a href="#cb147-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">lwd =</span> <span class="st">"TRIPS"</span>,</span>
<span id="cb147-9"><a href="#cb147-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">style =</span> <span class="st">"quantile"</span>,</span>
<span id="cb147-10"><a href="#cb147-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">col =</span> <span class="st">"red"</span>,</span>
<span id="cb147-11"><a href="#cb147-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">scale =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>),</span>
<span id="cb147-12"><a href="#cb147-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">title.lwd =</span> <span class="st">"# of bus trips"</span>,</span>
<span id="cb147-13"><a href="#cb147-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb147-14"><a href="#cb147-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb147-15"><a href="#cb147-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Top 1% Bus Passenger flow for Weekday 6am to 9am (October 2023)"</span>,</span>
<span id="cb147-16"><a href="#cb147-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb147-17"><a href="#cb147-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="fl">1.0</span>,</span>
<span id="cb147-18"><a href="#cb147-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.4</span>, </span>
<span id="cb147-19"><a href="#cb147-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">0.4</span>,</span>
<span id="cb147-20"><a href="#cb147-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb147-21"><a href="#cb147-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb147-22"><a href="#cb147-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">bg.color =</span> <span class="st">"white"</span>, <span class="at">bg.alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb147-23"><a href="#cb147-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">bg.color =</span> <span class="st">"white"</span>, <span class="at">bg.alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb147-24"><a href="#cb147-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-93-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The high flows are identified at the major transport hubs, such as Boon Lay, Bedok, Tampines, Clementi, and Woodlands interchange. In particular we see a concentration of lines around these areas, indicating usage of feeder services to likely reach the interchange or to their work locations in the mornings.While majority are rather short lines between circa 15km of each concentrated area, We do see people travel in longer distances such as that between tampines and woodlands. While bus rides are more preferred for relatively short distance travels, there are some longer distance lines which we can investigate further.</p>
<section id="charting-for-trips-vs.-distance" class="level2">
<h2 class="anchored" data-anchor-id="charting-for-trips-vs.-distance">5.1 Charting for TRIPS vs.&nbsp;DISTANCE</h2>
<p>Let us plot a chart for TRIPS vs.&nbsp;DISTANCE to assess further.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(SIM_data,</span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> DISTANCE, <span class="at">y =</span> TRIPS)) <span class="sc">+</span></span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1417</span>, <span class="at">color =</span> <span class="st">"green"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">20000</span>,</span>
<span id="cb148-6"><a href="#cb148-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="dv">600</span>, <span class="at">label =</span> <span class="st">"95th percentile"</span>,</span>
<span id="cb148-7"><a href="#cb148-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">color =</span> <span class="st">"green"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb148-8"><a href="#cb148-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">6096</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb148-9"><a href="#cb148-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">20000</span>,</span>
<span id="cb148-10"><a href="#cb148-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="dv">1800</span>, <span class="at">label =</span> <span class="st">"99th percentile"</span>,</span>
<span id="cb148-11"><a href="#cb148-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb148-12"><a href="#cb148-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of Trips as a Function of Distance"</span>,</span>
<span id="cb148-13"><a href="#cb148-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Distance (m)"</span>,</span>
<span id="cb148-14"><a href="#cb148-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of Trips"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-94-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(SIM_data,</span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">log</span>(DISTANCE), <span class="at">y =</span> <span class="fu">log</span>(TRIPS))) <span class="sc">+</span></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-95-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>As expected, maximum number of trips exponentially decrease as the distance increases. By and large, the further the distance, the less trips there are.</p>
<p>Some outliers can be observed where zone pairs with almost 20km distance between them at near 99th percentile of TRIP values. There could be strong propulsive or attractive forces in these zones that attract passengers to ride the bus between those zones.</p>
</section>
<section id="visualizing-propulsive-forces" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-propulsive-forces">5.2 Visualizing propulsive forces</h2>
<p>Let us plot the top 1% busiest flows, while looking at HDB population, transfers from train and buses to investigate their relationship with bus flows.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>plot_propulsive <span class="ot">&lt;-</span> <span class="cf">function</span>(var_name, title_comp) {</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(mpsz) <span class="sc">+</span></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"grey"</span>, <span class="at">title =</span> <span class="st">"Singapore Boundary"</span>) <span class="sc">+</span></span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Adding this layer underneath propulsiveness as we removed 0s. from the map</span></span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># so it won't skew the legend</span></span>
<span id="cb150-7"><a href="#cb150-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(honeycomb) <span class="sc">+</span></span>
<span id="cb150-8"><a href="#cb150-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">"grey"</span>) <span class="sc">+</span></span>
<span id="cb150-9"><a href="#cb150-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb150-10"><a href="#cb150-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(propulsiveness <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">if_any</span>(var_name, <span class="sc">~</span>. <span class="sc">&gt;=</span> <span class="dv">1</span>))) <span class="sc">+</span></span>
<span id="cb150-11"><a href="#cb150-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(var_name, <span class="at">palette =</span> <span class="st">"Blues"</span>, <span class="at">style =</span> <span class="st">"quantile"</span>) <span class="sc">+</span></span>
<span id="cb150-12"><a href="#cb150-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb150-13"><a href="#cb150-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(flowlines_no_intra <span class="sc">%&gt;%</span> <span class="fu">filter</span>(TRIPS <span class="sc">&gt;</span> <span class="dv">6096</span>)) <span class="sc">+</span></span>
<span id="cb150-14"><a href="#cb150-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">lwd =</span> <span class="st">"TRIPS"</span>,</span>
<span id="cb150-15"><a href="#cb150-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">style =</span> <span class="st">"quantile"</span>,</span>
<span id="cb150-16"><a href="#cb150-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">col =</span> <span class="st">"red"</span>,</span>
<span id="cb150-17"><a href="#cb150-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">scale =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb150-18"><a href="#cb150-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">title.lwd =</span> <span class="st">"# of bus trips"</span>,</span>
<span id="cb150-19"><a href="#cb150-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">n =</span> <span class="dv">6</span>,</span>
<span id="cb150-20"><a href="#cb150-20" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb150-21"><a href="#cb150-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb150-22"><a href="#cb150-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="fu">paste</span>(<span class="st">"Top 1% Bus Passenger Flows and"</span>, title_comp),</span>
<span id="cb150-23"><a href="#cb150-23" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb150-24"><a href="#cb150-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="fl">1.0</span>,</span>
<span id="cb150-25"><a href="#cb150-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.35</span>, </span>
<span id="cb150-26"><a href="#cb150-26" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">0.35</span>,</span>
<span id="cb150-27"><a href="#cb150-27" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb150-28"><a href="#cb150-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb150-29"><a href="#cb150-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">bg.color =</span> <span class="st">"white"</span>, <span class="at">bg.alpha =</span> <span class="fl">0.7</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb150-30"><a href="#cb150-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">bg.color =</span> <span class="st">"white"</span>,</span>
<span id="cb150-31"><a href="#cb150-31" aria-hidden="true" tabindex="-1"></a>             <span class="at">bg.alpha =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb150-32"><a href="#cb150-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb150-33"><a href="#cb150-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"*Passenger data from weekday 6AM - 9AM (October 2023)"</span>,</span>
<span id="cb150-34"><a href="#cb150-34" aria-hidden="true" tabindex="-1"></a>             <span class="at">bg.color =</span> <span class="st">"white"</span>, <span class="at">bg.alpha =</span> <span class="fl">0.7</span>,</span>
<span id="cb150-35"><a href="#cb150-35" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>))</span>
<span id="cb150-36"><a href="#cb150-36" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>HDB Population v Bus Passenger flows</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_propulsive</span>(<span class="st">"HDB_RESIDENT_COUNT"</span>, <span class="st">"HDB Population"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-97-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Train transfers v Bus Passenger flows</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_propulsive</span>(<span class="st">"TRAIN_ALIGHT_COUNT"</span>, <span class="st">"Potential Transfers from Train"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-98-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Bus Transfers vs Bus Passenger flows</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_propulsive</span>(<span class="st">"BUS_ALIGHT_COUNT"</span>, <span class="st">"Potential Transfers from Bus"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-99-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We observe that both the HDB population and train exits appear to align closely to our flow lines. This is likely due to the fact that majority of persons are travelling from their residences to work during this period, where majority of them also alight at train stations. However we do note that for those areas with a higher indication, they also have other facilities near the train stations, such as entertaininment malls close to the vicinity where it may have led to higher counts.</p>
</section>
<section id="visualizing-attractive-forces" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-attractive-forces">5.3 Visualizing attractive forces</h2>
<p>Let us plot the top 1% busiest flows, while looking at HDB count, entertainment, F%B, Leisure and Recreation, Bus stops and Train stations to investigate their relationship with bus flows.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>plot_attractive <span class="ot">&lt;-</span> <span class="cf">function</span>(var_name, title_comp) {</span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(mpsz) <span class="sc">+</span></span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"grey"</span>, <span class="at">title =</span> <span class="st">"Singapore Boundary"</span>) <span class="sc">+</span></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Adding this layer underneath attractiveness as we removed 0s. from the map</span></span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># so it won't skew the legend</span></span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(honeycomb) <span class="sc">+</span></span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">"grey"</span>) <span class="sc">+</span></span>
<span id="cb154-9"><a href="#cb154-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb154-10"><a href="#cb154-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(attractiveness <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">if_any</span>(var_name, <span class="sc">~</span>. <span class="sc">&gt;=</span> <span class="dv">1</span>))) <span class="sc">+</span></span>
<span id="cb154-11"><a href="#cb154-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(var_name, <span class="at">palette =</span> <span class="st">"Purples"</span>, <span class="at">style =</span> <span class="st">"quantile"</span>) <span class="sc">+</span></span>
<span id="cb154-12"><a href="#cb154-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb154-13"><a href="#cb154-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(flowlines_no_intra <span class="sc">%&gt;%</span> <span class="fu">filter</span>(TRIPS <span class="sc">&gt;</span> <span class="dv">6096</span>)) <span class="sc">+</span></span>
<span id="cb154-14"><a href="#cb154-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">lwd =</span> <span class="st">"TRIPS"</span>,</span>
<span id="cb154-15"><a href="#cb154-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">style =</span> <span class="st">"quantile"</span>,</span>
<span id="cb154-16"><a href="#cb154-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">col =</span> <span class="st">"red"</span>,</span>
<span id="cb154-17"><a href="#cb154-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">scale =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb154-18"><a href="#cb154-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">title.lwd =</span> <span class="st">"# of bus trips"</span>,</span>
<span id="cb154-19"><a href="#cb154-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">n =</span> <span class="dv">6</span>,</span>
<span id="cb154-20"><a href="#cb154-20" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb154-21"><a href="#cb154-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb154-22"><a href="#cb154-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="fu">paste</span>(<span class="st">"Top 1% Bus Passenger Flows and"</span>, title_comp),</span>
<span id="cb154-23"><a href="#cb154-23" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb154-24"><a href="#cb154-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="fl">1.0</span>,</span>
<span id="cb154-25"><a href="#cb154-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.35</span>, </span>
<span id="cb154-26"><a href="#cb154-26" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">0.35</span>,</span>
<span id="cb154-27"><a href="#cb154-27" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb154-28"><a href="#cb154-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb154-29"><a href="#cb154-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">bg.color =</span> <span class="st">"white"</span>, <span class="at">bg.alpha =</span> <span class="fl">0.7</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb154-30"><a href="#cb154-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">bg.color =</span> <span class="st">"white"</span>,</span>
<span id="cb154-31"><a href="#cb154-31" aria-hidden="true" tabindex="-1"></a>             <span class="at">bg.alpha =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb154-32"><a href="#cb154-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb154-33"><a href="#cb154-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"*Passenger data from Weekday 6am to 9am (October 2023)"</span>,</span>
<span id="cb154-34"><a href="#cb154-34" aria-hidden="true" tabindex="-1"></a>             <span class="at">bg.color =</span> <span class="st">"white"</span>, <span class="at">bg.alpha =</span> <span class="fl">0.7</span>,</span>
<span id="cb154-35"><a href="#cb154-35" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>))</span>
<span id="cb154-36"><a href="#cb154-36" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>HDB Count v Bus Passenger flows</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_attractive</span>(<span class="st">"BUS_STOP_COUNT"</span>, <span class="st">"Number of Bus Stops"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-101-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Train transfers v Bus Passenger flows</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_attractive</span>(<span class="st">"TRAIN_EXITS_COUNT"</span>, <span class="st">"Number of Train Stations"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-102-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>No.&nbsp;of HDB blocks v Bus Passenger flows</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_attractive</span>(<span class="st">"HDB_COUNT"</span>, <span class="st">"Number of HDB blocks"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-103-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>No.&nbsp;of Entertainment location v Bus Passenger flows</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_attractive</span>(<span class="st">"preschool_COUNT"</span>, <span class="st">"Number of Preschool Locations"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-104-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>No.&nbsp;of F&amp;B Outlets v Bus Passenger flows</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_attractive</span>(<span class="st">"School_COUNT"</span>, <span class="st">"Number of School Locations"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-105-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>No.&nbsp;of FinServ locations v Bus Passenger flows</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_attractive</span>(<span class="st">"FinServ_COUNT"</span>, <span class="st">"Number of Financial Services Locations"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-106-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>No.&nbsp;of Business locations v Bus Passenger flows</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_attractive</span>(<span class="st">"Business_COUNT"</span>, <span class="st">"Number of Business Locations"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-107-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Observations note that passengers often most of the flows surround areas with higher concentration of business, financial services, preschools and schools which is aligned to destinations we expect. We also note that a large no. of business concentration is identified in the western part of Singapore, where we saw some flows to. However, given that is quite sparse, it may indicate other forms of transport used to reach these locations. Interestingly, we do not see thick lines or flows into the city area where the financial services are congregated during this period. Further investigation into potential reasons,such as higher occurrences of traffic jams on the road, should be explored to determine if there is any correlation to the bus flows being not as high.</p>
<p>We will now save the flowline data excluding the intraflows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(SIM_data, <span class="st">"data/rds/flowlines_no_intra.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="spatial-interaction-modelling-1" class="level1">
<h1>6 Spatial Interaction Modelling</h1>
<p>For this section, we will start by loading the following table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>SIM_data <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/SIM_data.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will use 4 log-based Poisson gravity models to perform our spatial interaction modelling, as detailed below with the respective formula</p>
<p>Unconstrained: This will model the TRIPS using all the independent model components.</p>
<p>origin constrained: This will model the TRIPS without the attractive forces.</p>
<p>Destination constrained: This will model the TRIPS without the propulsive forces.</p>
<p>Doubly constrained: This will model the TRIPS without the attractive and propulsive forces.</p>
<section id="generating-models" class="level2">
<h2 class="anchored" data-anchor-id="generating-models">6.1 Generating Models</h2>
<p>For this part, first, we remove intra-zonal zones pairs from SIM_data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>SIM_data_no_intra <span class="ot">&lt;-</span> SIM_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(ORIG_hexagon_id <span class="sc">!=</span> DEST_hexagon_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will also use the following function to calculate the goodness of fit, or R-squared. This will calculate how the observed data fits our model by comparing the observed values to the values generated by our models.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>calc_r_squared <span class="ot">&lt;-</span> <span class="cf">function</span>(model) {</span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(model<span class="sc">$</span>data<span class="sc">$</span>TRIPS, model<span class="sc">$</span>fitted.values)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Unconstrained</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>uncSIM <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="at">formula =</span> TRIPS <span class="sc">~</span> </span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(O_HDB_RESIDENT_COUNT) <span class="sc">+</span></span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(O_BUS_ALIGHT_COUNT) <span class="sc">+</span></span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(O_TRAIN_ALIGHT_COUNT) <span class="sc">+</span></span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_BUS_STOP_COUNT) <span class="sc">+</span></span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_preschool_COUNT) <span class="sc">+</span></span>
<span id="cb166-7"><a href="#cb166-7" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_School_COUNT) <span class="sc">+</span></span>
<span id="cb166-8"><a href="#cb166-8" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_TRAIN_EXITS_COUNT) <span class="sc">+</span></span>
<span id="cb166-9"><a href="#cb166-9" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_HDB_COUNT) <span class="sc">+</span></span>
<span id="cb166-10"><a href="#cb166-10" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_FinServ_COUNT) <span class="sc">+</span></span>
<span id="cb166-11"><a href="#cb166-11" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_Business_COUNT) <span class="sc">+</span></span>
<span id="cb166-12"><a href="#cb166-12" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(DISTANCE),</span>
<span id="cb166-13"><a href="#cb166-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">family =</span> <span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>),</span>
<span id="cb166-14"><a href="#cb166-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> SIM_data_no_intra,</span>
<span id="cb166-15"><a href="#cb166-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">na.action =</span> na.exclude)</span>
<span id="cb166-16"><a href="#cb166-16" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(uncSIM, <span class="st">"data/rds/uncSIM.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>uncSIM <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/uncSIM.rds"</span>)</span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>uncSIM</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:  glm(formula = TRIPS ~ log(O_HDB_RESIDENT_COUNT) + log(O_BUS_ALIGHT_COUNT) + 
    log(O_TRAIN_ALIGHT_COUNT) + log(D_BUS_STOP_COUNT) + log(D_preschool_COUNT) + 
    log(D_School_COUNT) + log(D_TRAIN_EXITS_COUNT) + log(D_HDB_COUNT) + 
    log(D_FinServ_COUNT) + log(D_Business_COUNT) + log(DISTANCE), 
    family = poisson(link = "log"), data = SIM_data_no_intra, 
    na.action = na.exclude)

Coefficients:
              (Intercept)  log(O_HDB_RESIDENT_COUNT)  
                13.212789                  -0.013101  
  log(O_BUS_ALIGHT_COUNT)  log(O_TRAIN_ALIGHT_COUNT)  
                 0.344613                  -0.003919  
    log(D_BUS_STOP_COUNT)     log(D_preschool_COUNT)  
                 0.068811                   0.100805  
      log(D_School_COUNT)   log(D_TRAIN_EXITS_COUNT)  
                -0.170770                   0.047620  
         log(D_HDB_COUNT)       log(D_FinServ_COUNT)  
                 0.284174                  -0.083182  
    log(D_Business_COUNT)              log(DISTANCE)  
                -0.127259                  -1.447621  

Degrees of Freedom: 64965 Total (i.e. Null);  64954 Residual
Null Deviance:      97690000 
Residual Deviance: 50660000     AIC: 51010000</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">calc_r_squared</span>(uncSIM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Origin constrained</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>orcSIM <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="at">formula =</span> TRIPS <span class="sc">~</span> </span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>                ORIG_hexagon_id <span class="sc">+</span></span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_BUS_STOP_COUNT) <span class="sc">+</span></span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_preschool_COUNT) <span class="sc">+</span></span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_School_COUNT) <span class="sc">+</span></span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_TRAIN_EXITS_COUNT) <span class="sc">+</span></span>
<span id="cb170-7"><a href="#cb170-7" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_HDB_COUNT) <span class="sc">+</span></span>
<span id="cb170-8"><a href="#cb170-8" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_FinServ_COUNT) <span class="sc">+</span></span>
<span id="cb170-9"><a href="#cb170-9" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(D_Business_COUNT) <span class="sc">+</span></span>
<span id="cb170-10"><a href="#cb170-10" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(DISTANCE),</span>
<span id="cb170-11"><a href="#cb170-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">family =</span> <span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>),</span>
<span id="cb170-12"><a href="#cb170-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> SIM_data_no_intra,</span>
<span id="cb170-13"><a href="#cb170-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">na.action =</span> na.exclude)</span>
<span id="cb170-14"><a href="#cb170-14" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(orcSIM, <span class="st">"data/rds/orcSIM.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>orcSIM <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/orcSIM.rds"</span>)</span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>orcSIM</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:  glm(formula = TRIPS ~ ORIG_hexagon_id + log(D_BUS_STOP_COUNT) + 
    log(D_preschool_COUNT) + log(D_School_COUNT) + log(D_TRAIN_EXITS_COUNT) + 
    log(D_HDB_COUNT) + log(D_FinServ_COUNT) + log(D_Business_COUNT) + 
    log(DISTANCE), family = poisson(link = "log"), data = SIM_data_no_intra, 
    na.action = na.exclude)

Coefficients:
             (Intercept)      ORIG_hexagon_idH0002      ORIG_hexagon_idH0003  
               14.375274                 -2.140122                 -1.116284  
    ORIG_hexagon_idH0004      ORIG_hexagon_idH0005      ORIG_hexagon_idH0006  
               -1.266924                  0.792590                 -2.046793  
    ORIG_hexagon_idH0007      ORIG_hexagon_idH0008      ORIG_hexagon_idH0009  
               -0.471030                 -0.255140                  1.359481  
    ORIG_hexagon_idH0010      ORIG_hexagon_idH0011      ORIG_hexagon_idH0012  
               -0.358423                 -1.610647                 -0.686542  
    ORIG_hexagon_idH0013      ORIG_hexagon_idH0014      ORIG_hexagon_idH0015  
                0.270653                  2.564989                 -1.366102  
    ORIG_hexagon_idH0016      ORIG_hexagon_idH0017      ORIG_hexagon_idH0018  
                1.748980                 -0.888586                 -0.859077  
    ORIG_hexagon_idH0019      ORIG_hexagon_idH0020      ORIG_hexagon_idH0021  
               -0.115417                 -0.379187                 -0.528405  
    ORIG_hexagon_idH0022      ORIG_hexagon_idH0023      ORIG_hexagon_idH0024  
                1.474232                  2.072887                 -0.254727  
    ORIG_hexagon_idH0025      ORIG_hexagon_idH0026      ORIG_hexagon_idH0027  
               -0.872615                 -0.269142                  2.480902  
    ORIG_hexagon_idH0028      ORIG_hexagon_idH0029      ORIG_hexagon_idH0030  
               -0.483321                  0.374359                  0.954277  
    ORIG_hexagon_idH0031      ORIG_hexagon_idH0032      ORIG_hexagon_idH0033  
               -0.275798                  2.055875                  3.157074  
    ORIG_hexagon_idH0034      ORIG_hexagon_idH0035      ORIG_hexagon_idH0036  
               -1.239190                 -0.706476                 -1.463118  
    ORIG_hexagon_idH0037      ORIG_hexagon_idH0038      ORIG_hexagon_idH0039  
               -0.509930                  3.468220                  0.900507  
    ORIG_hexagon_idH0040      ORIG_hexagon_idH0041      ORIG_hexagon_idH0042  
               -1.665739                 -0.500648                 -1.343584  
    ORIG_hexagon_idH0043      ORIG_hexagon_idH0044      ORIG_hexagon_idH0045  
               -0.692003                  0.247272                  0.010134  
    ORIG_hexagon_idH0046      ORIG_hexagon_idH0047      ORIG_hexagon_idH0048  
                0.437347                 -0.636363                 -0.304104  
    ORIG_hexagon_idH0049      ORIG_hexagon_idH0050      ORIG_hexagon_idH0051  
               -2.850312                 -0.667719                  2.383742  
    ORIG_hexagon_idH0052      ORIG_hexagon_idH0053      ORIG_hexagon_idH0054  
               -0.880462                  0.113697                  0.727894  
    ORIG_hexagon_idH0055      ORIG_hexagon_idH0056      ORIG_hexagon_idH0057  
                0.871640                 -0.736769                 -0.218779  
    ORIG_hexagon_idH0058      ORIG_hexagon_idH0059      ORIG_hexagon_idH0060  
                0.606949                  0.872783                  0.222824  
    ORIG_hexagon_idH0061      ORIG_hexagon_idH0062      ORIG_hexagon_idH0063  
               -0.769115                  0.396848                  0.716565  
    ORIG_hexagon_idH0064      ORIG_hexagon_idH0065      ORIG_hexagon_idH0066  
               -0.235258                  4.302445                  0.516277  
    ORIG_hexagon_idH0067      ORIG_hexagon_idH0068      ORIG_hexagon_idH0069  
                1.100894                 -1.498121                  0.482213  
    ORIG_hexagon_idH0070      ORIG_hexagon_idH0071      ORIG_hexagon_idH0072  
               -0.394360                 -0.424208                  1.252045  
    ORIG_hexagon_idH0073      ORIG_hexagon_idH0074      ORIG_hexagon_idH0075  
               -0.035598                 -0.479734                  0.599641  
    ORIG_hexagon_idH0076      ORIG_hexagon_idH0077      ORIG_hexagon_idH0079  
                3.324418                  1.083666                  0.567514  
    ORIG_hexagon_idH0080      ORIG_hexagon_idH0081      ORIG_hexagon_idH0082  
                1.100892                  3.654524                  1.848684  
    ORIG_hexagon_idH0084      ORIG_hexagon_idH0085      ORIG_hexagon_idH0086  
                0.029985                 -2.507377                  2.115587  
    ORIG_hexagon_idH0087      ORIG_hexagon_idH0088      ORIG_hexagon_idH0089  
                2.639047                 -2.180657                 -0.095238  
    ORIG_hexagon_idH0090      ORIG_hexagon_idH0091      ORIG_hexagon_idH0092  
                0.203401                  0.624808                  1.702833  
    ORIG_hexagon_idH0093      ORIG_hexagon_idH0094      ORIG_hexagon_idH0095  
                4.167681                  0.676486                  0.258138  
    ORIG_hexagon_idH0096      ORIG_hexagon_idH0097      ORIG_hexagon_idH0098  
               -1.931172                 -0.674473                  0.582946  
    ORIG_hexagon_idH0099      ORIG_hexagon_idH0100      ORIG_hexagon_idH0101  
                0.333704                  3.995050                  4.322602  
    ORIG_hexagon_idH0102      ORIG_hexagon_idH0103      ORIG_hexagon_idH0104  
                0.541922                 -1.707986                 -1.713529  
    ORIG_hexagon_idH0105      ORIG_hexagon_idH0106      ORIG_hexagon_idH0107  
               -4.292925                 -0.683227                  1.450822  
    ORIG_hexagon_idH0108      ORIG_hexagon_idH0109      ORIG_hexagon_idH0110  
                0.714668                  4.002192                  3.225100  
    ORIG_hexagon_idH0111      ORIG_hexagon_idH0112      ORIG_hexagon_idH0114  
               -1.145080                  0.843571                 -2.896182  
    ORIG_hexagon_idH0115      ORIG_hexagon_idH0116      ORIG_hexagon_idH0117  
               -0.450006                  0.871155                  4.716488  
    ORIG_hexagon_idH0118      ORIG_hexagon_idH0119      ORIG_hexagon_idH0120  
                3.432935                 -1.613332                 -1.509745  
    ORIG_hexagon_idH0121      ORIG_hexagon_idH0122      ORIG_hexagon_idH0123  
               -2.351602                  1.073319                 -0.033365  
    ORIG_hexagon_idH0124      ORIG_hexagon_idH0125      ORIG_hexagon_idH0126  
                0.667465                  0.372106                  3.350958  
    ORIG_hexagon_idH0127      ORIG_hexagon_idH0128      ORIG_hexagon_idH0129  
               -0.080998                 -1.182094                 -2.910412  
    ORIG_hexagon_idH0130      ORIG_hexagon_idH0131      ORIG_hexagon_idH0132  
               -0.812540                  0.260021                  1.065572  
    ORIG_hexagon_idH0133      ORIG_hexagon_idH0134      ORIG_hexagon_idH0135  
                3.794874                  0.368777                 -0.241852  
    ORIG_hexagon_idH0136      ORIG_hexagon_idH0137      ORIG_hexagon_idH0138  
                3.438054                  1.196234                  2.588422  
    ORIG_hexagon_idH0139      ORIG_hexagon_idH0140      ORIG_hexagon_idH0141  
                3.054848                  4.028777                  3.238029  
    ORIG_hexagon_idH0142      ORIG_hexagon_idH0143      ORIG_hexagon_idH0144  
                1.248821                 -0.786101                  3.776614  
    ORIG_hexagon_idH0145      ORIG_hexagon_idH0146      ORIG_hexagon_idH0147  
                3.824859                  3.096784                  0.772414  
    ORIG_hexagon_idH0148      ORIG_hexagon_idH0149      ORIG_hexagon_idH0150  
                2.755399                  3.066014                  3.846816  
    ORIG_hexagon_idH0151      ORIG_hexagon_idH0152      ORIG_hexagon_idH0154  
                0.342383                  1.050637                 -0.244959  
    ORIG_hexagon_idH0156      ORIG_hexagon_idH0157      ORIG_hexagon_idH0158  
                1.268519                  1.378617                  3.378576  
    ORIG_hexagon_idH0160      ORIG_hexagon_idH0161      ORIG_hexagon_idH0162  
                0.722398                  2.846878                 -0.077524  
    ORIG_hexagon_idH0163      ORIG_hexagon_idH0164      ORIG_hexagon_idH0165  
                3.659318                  2.765926                  4.226477  
    ORIG_hexagon_idH0166      ORIG_hexagon_idH0167      ORIG_hexagon_idH0168  
               -0.931717                  0.110826                  2.974254  
    ORIG_hexagon_idH0169      ORIG_hexagon_idH0170      ORIG_hexagon_idH0171  
                2.535671                  3.044153                  3.721967  
    ORIG_hexagon_idH0172      ORIG_hexagon_idH0173      ORIG_hexagon_idH0174  
                2.534285                 -0.598942                  3.743881  
    ORIG_hexagon_idH0175      ORIG_hexagon_idH0176      ORIG_hexagon_idH0177  
                3.511587                  3.264493                  3.946570  
    ORIG_hexagon_idH0178      ORIG_hexagon_idH0179      ORIG_hexagon_idH0180  
                2.250223                  3.882201                  3.737832  
    ORIG_hexagon_idH0181      ORIG_hexagon_idH0182      ORIG_hexagon_idH0183  
                0.558090                 -0.110054                  1.412371  
    ORIG_hexagon_idH0184      ORIG_hexagon_idH0185      ORIG_hexagon_idH0186  
                3.535318                  3.487491                  3.635986  
    ORIG_hexagon_idH0187      ORIG_hexagon_idH0188      ORIG_hexagon_idH0189  
                3.601795                  4.163300                  3.505599  
    ORIG_hexagon_idH0190      ORIG_hexagon_idH0191      ORIG_hexagon_idH0192  
                0.265317                 -1.265792                  2.891079  
    ORIG_hexagon_idH0193      ORIG_hexagon_idH0194      ORIG_hexagon_idH0195  
                1.962127                  3.083915                  2.204530  
    ORIG_hexagon_idH0196      ORIG_hexagon_idH0197      ORIG_hexagon_idH0198  
                2.948332                  3.443370                  3.246983  
    ORIG_hexagon_idH0199      ORIG_hexagon_idH0200      ORIG_hexagon_idH0201  
                5.188478                  0.785601                 -0.288497  
    ORIG_hexagon_idH0202      ORIG_hexagon_idH0203      ORIG_hexagon_idH0204  
                1.305664                  0.302352                  1.674966  
    ORIG_hexagon_idH0205      ORIG_hexagon_idH0206      ORIG_hexagon_idH0207  
                0.909516                  3.608454                  3.923639  
    ORIG_hexagon_idH0208      ORIG_hexagon_idH0209      ORIG_hexagon_idH0210  
                3.453565                  1.699024                  2.153760  
    ORIG_hexagon_idH0211      ORIG_hexagon_idH0212      ORIG_hexagon_idH0213  
                2.182649                 -1.194723                 -0.001812  
    ORIG_hexagon_idH0214      ORIG_hexagon_idH0215      ORIG_hexagon_idH0216  
               -0.597080                  1.281582                  2.683967  
    ORIG_hexagon_idH0217      ORIG_hexagon_idH0218      ORIG_hexagon_idH0219  
               -0.323620                  3.583328                  2.726631  
    ORIG_hexagon_idH0220      ORIG_hexagon_idH0221      ORIG_hexagon_idH0222  
                3.482801                  1.613395                  1.126858  
    ORIG_hexagon_idH0223      ORIG_hexagon_idH0224      ORIG_hexagon_idH0225  
                0.663560                 -1.158847                  0.535672  
    ORIG_hexagon_idH0226      ORIG_hexagon_idH0227      ORIG_hexagon_idH0228  
                2.344140                  2.722634                  0.703842  
    ORIG_hexagon_idH0229      ORIG_hexagon_idH0230      ORIG_hexagon_idH0231  
                2.018796                  3.214614                  3.466356  
    ORIG_hexagon_idH0232      ORIG_hexagon_idH0233      ORIG_hexagon_idH0234  
                2.614695                 -0.324886                  2.146488  
    ORIG_hexagon_idH0235      ORIG_hexagon_idH0236      ORIG_hexagon_idH0237  
                1.757797                  3.167137                  3.803853  
    ORIG_hexagon_idH0238      ORIG_hexagon_idH0239      ORIG_hexagon_idH0240  
                0.857806                  1.325743                  3.028874  
    ORIG_hexagon_idH0241      ORIG_hexagon_idH0242      ORIG_hexagon_idH0243  
                0.675468                  3.998787                 -2.497209  
    ORIG_hexagon_idH0244      ORIG_hexagon_idH0245      ORIG_hexagon_idH0246  
                4.003499                 -0.803783                  1.471865  
    ORIG_hexagon_idH0247      ORIG_hexagon_idH0248      ORIG_hexagon_idH0249  
                3.453416                  4.184262                  1.402778  
    ORIG_hexagon_idH0250      ORIG_hexagon_idH0251      ORIG_hexagon_idH0252  
                2.160777                  0.657774                  2.739386  
    ORIG_hexagon_idH0253      ORIG_hexagon_idH0254      ORIG_hexagon_idH0255  
                1.422905                  3.577485                 -0.163371  
    ORIG_hexagon_idH0256      ORIG_hexagon_idH0257      ORIG_hexagon_idH0258  
                0.102632                 -3.964441                  2.039535  
    ORIG_hexagon_idH0259      ORIG_hexagon_idH0260      ORIG_hexagon_idH0262  
                3.287101                  3.099432                  2.470089  
    ORIG_hexagon_idH0263      ORIG_hexagon_idH0264      ORIG_hexagon_idH0265  
                1.925198                  0.556320                  3.777807  
    ORIG_hexagon_idH0266      ORIG_hexagon_idH0267      ORIG_hexagon_idH0268  
                3.493666                  1.214256                  5.283280  
    ORIG_hexagon_idH0269      ORIG_hexagon_idH0270      ORIG_hexagon_idH0271  
                1.999308                  2.390473                  2.055732  
    ORIG_hexagon_idH0272      ORIG_hexagon_idH0273      ORIG_hexagon_idH0274  
                1.454577                  2.789368                  2.368550  
    ORIG_hexagon_idH0275      ORIG_hexagon_idH0276      ORIG_hexagon_idH0277  
                0.763490                  3.748809                  3.787496  
    ORIG_hexagon_idH0278      ORIG_hexagon_idH0279      ORIG_hexagon_idH0280  
                0.790723                  3.539200                  4.602721  
    ORIG_hexagon_idH0281      ORIG_hexagon_idH0282      ORIG_hexagon_idH0283  
                0.322138                  0.126644                  0.895564  
    ORIG_hexagon_idH0284      ORIG_hexagon_idH0285      ORIG_hexagon_idH0286  
                1.457878                  0.709644                  2.348807  
    ORIG_hexagon_idH0287      ORIG_hexagon_idH0288      ORIG_hexagon_idH0289  
                2.703262                  4.161198                  2.919373  
    ORIG_hexagon_idH0290      ORIG_hexagon_idH0291      ORIG_hexagon_idH0292  
                3.855247                 -0.509499                  1.650941  
    ORIG_hexagon_idH0293      ORIG_hexagon_idH0294      ORIG_hexagon_idH0295  
                2.341707                  2.832386                  0.900855  
    ORIG_hexagon_idH0296      ORIG_hexagon_idH0297      ORIG_hexagon_idH0298  
                2.129224                  0.714608                  3.437031  
    ORIG_hexagon_idH0299      ORIG_hexagon_idH0300      ORIG_hexagon_idH0301  
                3.429533                  2.874257                  2.124361  
    ORIG_hexagon_idH0302      ORIG_hexagon_idH0303      ORIG_hexagon_idH0304  
                3.047515                  1.753735                 -2.069216  
    ORIG_hexagon_idH0305      ORIG_hexagon_idH0306      ORIG_hexagon_idH0307  
                3.510231                  4.083072                  2.387654  
    ORIG_hexagon_idH0308      ORIG_hexagon_idH0309      ORIG_hexagon_idH0310  
                1.770273                  1.737857                  1.774156  
    ORIG_hexagon_idH0311      ORIG_hexagon_idH0312      ORIG_hexagon_idH0313  
                3.049402                 -1.861020                  3.485787  
    ORIG_hexagon_idH0314      ORIG_hexagon_idH0315      ORIG_hexagon_idH0316  
                1.958243                  0.119376                  0.246600  
    ORIG_hexagon_idH0317      ORIG_hexagon_idH0318      ORIG_hexagon_idH0319  
                1.517447                  3.426183                  0.752439  
    ORIG_hexagon_idH0320      ORIG_hexagon_idH0321      ORIG_hexagon_idH0322  
                2.342065                 -0.269382                 -1.321003  
    ORIG_hexagon_idH0323      ORIG_hexagon_idH0324      ORIG_hexagon_idH0325  
                1.208864                  4.768678                  3.225862  
    ORIG_hexagon_idH0326      ORIG_hexagon_idH0327      ORIG_hexagon_idH0328  
                2.098594                  0.680494                  0.669713  
    ORIG_hexagon_idH0329      ORIG_hexagon_idH0330      ORIG_hexagon_idH0331  
                1.675702                  1.395594                  3.877970  
    ORIG_hexagon_idH0332      ORIG_hexagon_idH0333      ORIG_hexagon_idH0334  
                3.959636                  3.023038                  0.909272  
    ORIG_hexagon_idH0335      ORIG_hexagon_idH0336      ORIG_hexagon_idH0337  
               -0.013149                  2.660673                  2.477573  
    ORIG_hexagon_idH0338      ORIG_hexagon_idH0339      ORIG_hexagon_idH0340  
               -0.092576                  1.676755                  4.100789  
    ORIG_hexagon_idH0341      ORIG_hexagon_idH0343      ORIG_hexagon_idH0344  
                2.944973                  1.330724                  2.531047  
    ORIG_hexagon_idH0345      ORIG_hexagon_idH0346      ORIG_hexagon_idH0347  
                3.332448                  4.308887                  4.073587  
    ORIG_hexagon_idH0348      ORIG_hexagon_idH0349      ORIG_hexagon_idH0350  
                1.654371                 -2.312123                  1.401803  
    ORIG_hexagon_idH0351      ORIG_hexagon_idH0352      ORIG_hexagon_idH0353  
                2.118433                  3.016988                  2.247246  
    ORIG_hexagon_idH0354      ORIG_hexagon_idH0355      ORIG_hexagon_idH0356  
                1.316608                  0.054369                  3.196547  
    ORIG_hexagon_idH0357      ORIG_hexagon_idH0358      ORIG_hexagon_idH0360  
                3.187612                  1.504215                  2.468581  
    ORIG_hexagon_idH0361      ORIG_hexagon_idH0362      ORIG_hexagon_idH0363  
                2.110287                  2.605801                  2.305677  
    ORIG_hexagon_idH0364      ORIG_hexagon_idH0365      ORIG_hexagon_idH0366  
               -0.291046                  3.884730                  0.716810  
    ORIG_hexagon_idH0367      ORIG_hexagon_idH0368      ORIG_hexagon_idH0369  
               -0.188813                  3.264217                  2.904473  
    ORIG_hexagon_idH0370      ORIG_hexagon_idH0371      ORIG_hexagon_idH0372  
                2.658686                  0.667509                  1.446384  
    ORIG_hexagon_idH0373      ORIG_hexagon_idH0374      ORIG_hexagon_idH0375  
               -2.524973                 -0.887627                  1.258689  
    ORIG_hexagon_idH0376      ORIG_hexagon_idH0377      ORIG_hexagon_idH0378  
                1.562562                  1.623682                  2.333586  
    ORIG_hexagon_idH0379      ORIG_hexagon_idH0380      ORIG_hexagon_idH0381  
                2.815533                  1.572427                  2.774933  
    ORIG_hexagon_idH0382      ORIG_hexagon_idH0383      ORIG_hexagon_idH0384  
                3.532954                  1.469731                  2.061576  
    ORIG_hexagon_idH0385      ORIG_hexagon_idH0386      ORIG_hexagon_idH0387  
                2.472521                  1.533145                  1.078001  
    ORIG_hexagon_idH0388      ORIG_hexagon_idH0389      ORIG_hexagon_idH0390  
                2.274346                  0.186144                 -2.189186  
    ORIG_hexagon_idH0391      ORIG_hexagon_idH0392      ORIG_hexagon_idH0393  
                1.682367                  3.563738                  1.171251  
    ORIG_hexagon_idH0394      ORIG_hexagon_idH0395      ORIG_hexagon_idH0396  
                3.519023                  2.968744                  3.583016  
    ORIG_hexagon_idH0397      ORIG_hexagon_idH0398      ORIG_hexagon_idH0399  
                1.719994                 -0.555149                 -1.518092  
    ORIG_hexagon_idH0400      ORIG_hexagon_idH0401      ORIG_hexagon_idH0402  
                3.170842                  0.864075                  2.762602  
    ORIG_hexagon_idH0403      ORIG_hexagon_idH0404      ORIG_hexagon_idH0405  
                3.265826                  3.582537                  2.974482  
    ORIG_hexagon_idH0406      ORIG_hexagon_idH0407      ORIG_hexagon_idH0408  
               -0.394395                  2.422384                 -1.838908  
    ORIG_hexagon_idH0409      ORIG_hexagon_idH0410      ORIG_hexagon_idH0411  
               -0.243991                  1.703745                  1.190853  
    ORIG_hexagon_idH0412      ORIG_hexagon_idH0413      ORIG_hexagon_idH0415  
                3.683259                  2.374554                  1.293966  
    ORIG_hexagon_idH0416      ORIG_hexagon_idH0417      ORIG_hexagon_idH0418  
                3.176520                  3.010993                  1.565842  
    ORIG_hexagon_idH0419      ORIG_hexagon_idH0420      ORIG_hexagon_idH0421  
                1.741108                  2.389109                 -2.272714  
    ORIG_hexagon_idH0422      ORIG_hexagon_idH0423      ORIG_hexagon_idH0424  
                1.439191                  1.599243                  1.022918  
    ORIG_hexagon_idH0425      ORIG_hexagon_idH0426      ORIG_hexagon_idH0427  
               -1.518106                 -0.869976                 -1.815140  
    ORIG_hexagon_idH0428      ORIG_hexagon_idH0429      ORIG_hexagon_idH0430  
                3.739020                  2.276912                 -1.687848  
    ORIG_hexagon_idH0431      ORIG_hexagon_idH0432      ORIG_hexagon_idH0433  
                2.824925                  3.717870                  2.224138  
    ORIG_hexagon_idH0434      ORIG_hexagon_idH0435      ORIG_hexagon_idH0436  
                1.984983                  2.046254                  1.821277  
    ORIG_hexagon_idH0437      ORIG_hexagon_idH0438      ORIG_hexagon_idH0439  
                1.284670                  2.049729                  0.997354  
    ORIG_hexagon_idH0440      ORIG_hexagon_idH0441      ORIG_hexagon_idH0442  
                2.494229                  3.014474                  3.093690  
    ORIG_hexagon_idH0443      ORIG_hexagon_idH0444      ORIG_hexagon_idH0445  
                3.982422                 -0.297484                  1.751963  
    ORIG_hexagon_idH0446      ORIG_hexagon_idH0447      ORIG_hexagon_idH0448  
                1.595449                  2.541174                  1.827745  
    ORIG_hexagon_idH0449      ORIG_hexagon_idH0450      ORIG_hexagon_idH0451  
                1.050531                 -0.805047                  1.361545  
    ORIG_hexagon_idH0452      ORIG_hexagon_idH0453      ORIG_hexagon_idH0455  
                2.695083                  1.944283                  0.155160  
    ORIG_hexagon_idH0456      ORIG_hexagon_idH0457      ORIG_hexagon_idH0458  
                3.916001                  3.576429                  3.059818  
    ORIG_hexagon_idH0459      ORIG_hexagon_idH0460      ORIG_hexagon_idH0461  
                0.450458                  2.235235                  1.534369  
    ORIG_hexagon_idH0462      ORIG_hexagon_idH0463      ORIG_hexagon_idH0464  
                2.178213                  1.999376                  1.797403  
    ORIG_hexagon_idH0465      ORIG_hexagon_idH0466      ORIG_hexagon_idH0467  
                0.768815                  2.136847                  1.841769  
    ORIG_hexagon_idH0468      ORIG_hexagon_idH0469      ORIG_hexagon_idH0470  
                2.907774                  2.986999                  1.947356  
    ORIG_hexagon_idH0471      ORIG_hexagon_idH0472      ORIG_hexagon_idH0473  
                3.171136                  3.329922                  3.494653  
    ORIG_hexagon_idH0474      ORIG_hexagon_idH0475      ORIG_hexagon_idH0476  
                2.890302                  2.878524                  1.901300  
    ORIG_hexagon_idH0477      ORIG_hexagon_idH0478      ORIG_hexagon_idH0479  
                2.058687                  2.922580                  2.173045  
    ORIG_hexagon_idH0480      ORIG_hexagon_idH0481      ORIG_hexagon_idH0482  
                1.600272                  2.248933                  2.263576  
    ORIG_hexagon_idH0483      ORIG_hexagon_idH0484      ORIG_hexagon_idH0485  
                3.001496                  2.448547                  3.406031  
    ORIG_hexagon_idH0486      ORIG_hexagon_idH0487      ORIG_hexagon_idH0488  
                4.388247                  2.614309                  2.672445  
    ORIG_hexagon_idH0489      ORIG_hexagon_idH0490      ORIG_hexagon_idH0491  
                2.637960                  1.304110                  2.701315  
    ORIG_hexagon_idH0492      ORIG_hexagon_idH0493      ORIG_hexagon_idH0494  
                3.158831                  0.036247                  3.212823  
    ORIG_hexagon_idH0495      ORIG_hexagon_idH0496      ORIG_hexagon_idH0497  
                3.521106                  4.022151                  0.416002  
    ORIG_hexagon_idH0498      ORIG_hexagon_idH0499      ORIG_hexagon_idH0500  
                2.947699                  4.043519                  3.514935  
    ORIG_hexagon_idH0501      ORIG_hexagon_idH0502      ORIG_hexagon_idH0503  
                1.765691                  2.053560                  0.989749  
    ORIG_hexagon_idH0504      ORIG_hexagon_idH0505      ORIG_hexagon_idH0506  
                2.234100                  2.636299                  3.173087  
    ORIG_hexagon_idH0507      ORIG_hexagon_idH0508      ORIG_hexagon_idH0509  
                3.319119                  3.049884                  2.285476  
    ORIG_hexagon_idH0510      ORIG_hexagon_idH0511      ORIG_hexagon_idH0512  
                0.851383                  4.206957                  3.975104  
    ORIG_hexagon_idH0513      ORIG_hexagon_idH0514      ORIG_hexagon_idH0515  
                0.380848                  1.403404                  2.342582  
    ORIG_hexagon_idH0516      ORIG_hexagon_idH0517      ORIG_hexagon_idH0518  
                3.233786                  2.635621                  3.809887  
    ORIG_hexagon_idH0519      ORIG_hexagon_idH0520      ORIG_hexagon_idH0521  
                2.278690                  2.437484                  4.015778  
    ORIG_hexagon_idH0522      ORIG_hexagon_idH0523      ORIG_hexagon_idH0524  
                1.708781                  1.514332                  3.531900  
    ORIG_hexagon_idH0525      ORIG_hexagon_idH0526      ORIG_hexagon_idH0527  
                1.503103                  1.815991                  2.703047  
    ORIG_hexagon_idH0528      ORIG_hexagon_idH0529      ORIG_hexagon_idH0530  
                2.951930                  3.387254                  3.407784  
    ORIG_hexagon_idH0531      ORIG_hexagon_idH0532      ORIG_hexagon_idH0533  
                3.465346                  3.464638                  3.076933  
    ORIG_hexagon_idH0534      ORIG_hexagon_idH0536      ORIG_hexagon_idH0537  
               -1.482994                  0.591231                  2.156846  
    ORIG_hexagon_idH0538      ORIG_hexagon_idH0539      ORIG_hexagon_idH0540  
                2.429983                  2.386462                  3.838629  
    ORIG_hexagon_idH0541      ORIG_hexagon_idH0542      ORIG_hexagon_idH0543  
                2.786721                  1.290447                  3.707165  
    ORIG_hexagon_idH0544      ORIG_hexagon_idH0545      ORIG_hexagon_idH0546  
                1.856160                  2.252291                  1.437890  
    ORIG_hexagon_idH0547      ORIG_hexagon_idH0548      ORIG_hexagon_idH0549  
               -0.421147                 -0.106285                  0.954349  
    ORIG_hexagon_idH0550      ORIG_hexagon_idH0551      ORIG_hexagon_idH0552  
                2.214850                  2.613304                  3.203366  
    ORIG_hexagon_idH0553      ORIG_hexagon_idH0554      ORIG_hexagon_idH0555  
                4.401577                  1.242492                  1.877522  
    ORIG_hexagon_idH0556      ORIG_hexagon_idH0557      ORIG_hexagon_idH0558  
                2.947436                 -1.250895                 -0.046239  
    ORIG_hexagon_idH0559      ORIG_hexagon_idH0560      ORIG_hexagon_idH0561  
                0.081960                  1.522069                  2.689132  
    ORIG_hexagon_idH0562      ORIG_hexagon_idH0563      ORIG_hexagon_idH0564  
                3.552858                  3.541407                  0.492225  
    ORIG_hexagon_idH0565      ORIG_hexagon_idH0566      ORIG_hexagon_idH0567  
                2.050024                  1.221667                  1.153454  
    ORIG_hexagon_idH0568      ORIG_hexagon_idH0569      ORIG_hexagon_idH0570  
                0.721933                 -1.509912                 -1.183770  
    ORIG_hexagon_idH0571      ORIG_hexagon_idH0572      ORIG_hexagon_idH0573  
               -2.872970                  1.569511                  0.083884  
    ORIG_hexagon_idH0574      ORIG_hexagon_idH0575      ORIG_hexagon_idH0576  
                3.284130                  1.922845                  1.804474  
    ORIG_hexagon_idH0577      ORIG_hexagon_idH0578      ORIG_hexagon_idH0579  
                2.065921                  1.189031                 -0.802073  
    ORIG_hexagon_idH0580      ORIG_hexagon_idH0581      ORIG_hexagon_idH0582  
               -0.949008                  2.847559                  1.800839  
    ORIG_hexagon_idH0583      ORIG_hexagon_idH0584      ORIG_hexagon_idH0585  
                2.772301                  3.466530                  1.986785  
    ORIG_hexagon_idH0586      ORIG_hexagon_idH0587      ORIG_hexagon_idH0588  
                3.203819                  2.753279                  1.708477  
    ORIG_hexagon_idH0589      ORIG_hexagon_idH0590      ORIG_hexagon_idH0591  
                3.376735                  3.037923                 -0.631398  
    ORIG_hexagon_idH0592      ORIG_hexagon_idH0593      ORIG_hexagon_idH0594  
                1.212785                  3.105319                  2.027332  
    ORIG_hexagon_idH0595      ORIG_hexagon_idH0596      ORIG_hexagon_idH0597  
                3.372522                  3.633022                  2.138774  
    ORIG_hexagon_idH0598      ORIG_hexagon_idH0599      ORIG_hexagon_idH0600  
                3.704737                  2.589561                  2.409728  
    ORIG_hexagon_idH0601      ORIG_hexagon_idH0602      ORIG_hexagon_idH0603  
               -1.302154                  0.522407                  2.968179  
    ORIG_hexagon_idH0604      ORIG_hexagon_idH0605      ORIG_hexagon_idH0606  
                1.071615                  2.513503                  2.457209  
    ORIG_hexagon_idH0607      ORIG_hexagon_idH0608      ORIG_hexagon_idH0609  
                2.547394                  2.923251                  3.572148  
    ORIG_hexagon_idH0610      ORIG_hexagon_idH0611      ORIG_hexagon_idH0612  
                3.237341                 -2.408041                  3.189050  
    ORIG_hexagon_idH0613      ORIG_hexagon_idH0614      ORIG_hexagon_idH0615  
                2.008365                  3.143669                  3.109161  
    ORIG_hexagon_idH0616      ORIG_hexagon_idH0617      ORIG_hexagon_idH0618  
                3.779779                  4.492199                  3.479840  
    ORIG_hexagon_idH0619      ORIG_hexagon_idH0620      ORIG_hexagon_idH0621  
                2.128900                  2.832719                  2.712564  
    ORIG_hexagon_idH0622      ORIG_hexagon_idH0623      ORIG_hexagon_idH0624  
                2.484923                  1.825747                  1.417989  
    ORIG_hexagon_idH0625      ORIG_hexagon_idH0626      ORIG_hexagon_idH0627  
                2.783039                  3.378872                  2.630615  
    ORIG_hexagon_idH0628      ORIG_hexagon_idH0629      ORIG_hexagon_idH0630  
                2.766484                  2.708596                  3.305048  
    ORIG_hexagon_idH0631      ORIG_hexagon_idH0632      ORIG_hexagon_idH0633  
                2.243433                  3.395694                  3.121866  
    ORIG_hexagon_idH0634      ORIG_hexagon_idH0635      ORIG_hexagon_idH0636  
                3.765067                  1.346921                  3.635072  
    ORIG_hexagon_idH0638      ORIG_hexagon_idH0639      ORIG_hexagon_idH0640  
                2.925007                  2.802020                  2.434113  
    ORIG_hexagon_idH0641      ORIG_hexagon_idH0642      ORIG_hexagon_idH0643  
                0.533365                  2.840328                  3.490099  
    ORIG_hexagon_idH0644      ORIG_hexagon_idH0645      ORIG_hexagon_idH0646  
                3.220975                  3.395411                  4.259394  
    ORIG_hexagon_idH0647      ORIG_hexagon_idH0648      ORIG_hexagon_idH0649  
                1.804758                  2.620794                  1.887489  
    ORIG_hexagon_idH0650      ORIG_hexagon_idH0651      ORIG_hexagon_idH0652  
                1.445944                  3.505581                  3.673902  
    ORIG_hexagon_idH0653      ORIG_hexagon_idH0654      ORIG_hexagon_idH0655  
                3.164672                  3.153761                  0.905212  
    ORIG_hexagon_idH0657      ORIG_hexagon_idH0658      ORIG_hexagon_idH0659  
                2.591280                  2.571701                  1.571170  
    ORIG_hexagon_idH0660      ORIG_hexagon_idH0661      ORIG_hexagon_idH0662  
                0.927477                  3.192954                  2.856284  
    ORIG_hexagon_idH0663      ORIG_hexagon_idH0664      ORIG_hexagon_idH0665  
                3.752799                  3.800708                  2.991940  
    ORIG_hexagon_idH0666      ORIG_hexagon_idH0667      ORIG_hexagon_idH0668  
                3.194943                  2.547096                  2.767611  
    ORIG_hexagon_idH0669      ORIG_hexagon_idH0670      ORIG_hexagon_idH0671  
                0.866582                  1.040122                 -0.132621  
    ORIG_hexagon_idH0672      ORIG_hexagon_idH0673      ORIG_hexagon_idH0674  
                3.613322                  3.533984                  3.789015  
    ORIG_hexagon_idH0675      ORIG_hexagon_idH0676      ORIG_hexagon_idH0677  
                2.276546                  1.291894                  2.296985  
    ORIG_hexagon_idH0678      ORIG_hexagon_idH0679      ORIG_hexagon_idH0680  
                3.371131                  3.270376                  3.526963  
    ORIG_hexagon_idH0681      ORIG_hexagon_idH0682      ORIG_hexagon_idH0683  
                3.393358                  3.606518                  0.645606  
    ORIG_hexagon_idH0684      ORIG_hexagon_idH0685      ORIG_hexagon_idH0686  
                2.957917                  2.458310                  2.974709  
    ORIG_hexagon_idH0687      ORIG_hexagon_idH0688      ORIG_hexagon_idH0689  
                2.246744                 -0.501360                  2.893948  
    ORIG_hexagon_idH0690      ORIG_hexagon_idH0691      ORIG_hexagon_idH0692  
                4.648335                  0.281547                  3.483178  
    ORIG_hexagon_idH0693      ORIG_hexagon_idH0694      ORIG_hexagon_idH0695  
                2.805746                  3.098065                  3.463786  
    ORIG_hexagon_idH0696      ORIG_hexagon_idH0697      ORIG_hexagon_idH0698  
                0.903386                  4.119361                  3.608729  
    ORIG_hexagon_idH0700      ORIG_hexagon_idH0701      ORIG_hexagon_idH0702  
                3.089158                  1.477977                  3.332198  
    ORIG_hexagon_idH0703      ORIG_hexagon_idH0704      ORIG_hexagon_idH0705  
                3.057503                 -0.438904                  3.434880  
    ORIG_hexagon_idH0706      ORIG_hexagon_idH0707      ORIG_hexagon_idH0708  
                3.553376                  3.045966                  1.544212  
    ORIG_hexagon_idH0709      ORIG_hexagon_idH0710      ORIG_hexagon_idH0711  
                2.428824                 -2.149082                 -0.353861  
    ORIG_hexagon_idH0712      ORIG_hexagon_idH0714      ORIG_hexagon_idH0715  
                2.720151                  1.755434                  3.655959  
    ORIG_hexagon_idH0716      ORIG_hexagon_idH0717      ORIG_hexagon_idH0718  
                3.027197                  0.707528                  2.891449  
    ORIG_hexagon_idH0719      ORIG_hexagon_idH0720      ORIG_hexagon_idH0721  
                2.471865                  3.278192                  3.995705  
    ORIG_hexagon_idH0722      ORIG_hexagon_idH0724      ORIG_hexagon_idH0725  
               -0.494731                  2.145661                  3.983111  
    ORIG_hexagon_idH0726      ORIG_hexagon_idH0727      ORIG_hexagon_idH0728  
                2.892094                  3.719600                 -1.476039  
    ORIG_hexagon_idH0729      ORIG_hexagon_idH0730      ORIG_hexagon_idH0731  
                2.380385                  0.916059                  3.342538  
    ORIG_hexagon_idH0732      ORIG_hexagon_idH0733      ORIG_hexagon_idH0734  
                2.379135                  3.697762                  2.307086  
    ORIG_hexagon_idH0735      ORIG_hexagon_idH0736      ORIG_hexagon_idH0737  
                2.859146                  2.643805                  3.383959  
    ORIG_hexagon_idH0738      ORIG_hexagon_idH0739      ORIG_hexagon_idH0740  
                2.969956                  3.815706                  3.536612  
    ORIG_hexagon_idH0741      ORIG_hexagon_idH0742      ORIG_hexagon_idH0743  
                2.081226                  1.446040                  3.305396  
    ORIG_hexagon_idH0744      ORIG_hexagon_idH0745      ORIG_hexagon_idH0746  
                3.594928                  3.001445                  3.268872  
    ORIG_hexagon_idH0747      ORIG_hexagon_idH0748      ORIG_hexagon_idH0749  
                1.681894                  3.690430                  2.387242  
    ORIG_hexagon_idH0750      ORIG_hexagon_idH0751      ORIG_hexagon_idH0752  
                3.293687                 -0.860645                  3.392287  
    ORIG_hexagon_idH0753      ORIG_hexagon_idH0754      ORIG_hexagon_idH0755  
                3.375962                  3.355910                  2.320896  
    ORIG_hexagon_idH0756      ORIG_hexagon_idH0757      ORIG_hexagon_idH0758  
                3.222849                  1.876635                  2.458232  
    ORIG_hexagon_idH0759      ORIG_hexagon_idH0760      ORIG_hexagon_idH0761  
                4.250376                  3.636683                  3.089122  
    ORIG_hexagon_idH0762      ORIG_hexagon_idH0763      ORIG_hexagon_idH0764  
                1.929966                  3.437282                  2.256923  
    ORIG_hexagon_idH0765      ORIG_hexagon_idH0766      ORIG_hexagon_idH0767  
                3.095014                  2.872354                  3.739660  
    ORIG_hexagon_idH0768      ORIG_hexagon_idH0769      ORIG_hexagon_idH0770  
               -0.148485                 -0.184062                  0.460398  
    ORIG_hexagon_idH0771      ORIG_hexagon_idH0772      ORIG_hexagon_idH0773  
                1.573954                  3.000763                  3.258200  
    ORIG_hexagon_idH0774      ORIG_hexagon_idH0775      ORIG_hexagon_idH0776  
                2.790454                  0.728925                  1.586933  
    ORIG_hexagon_idH0777      ORIG_hexagon_idH0778      ORIG_hexagon_idH0779  
                1.024633                  3.436712                  3.776686  
    ORIG_hexagon_idH0780      ORIG_hexagon_idH0781      ORIG_hexagon_idH0782  
                2.885809                  2.205507                  1.144092  
    ORIG_hexagon_idH0783      ORIG_hexagon_idH0784      ORIG_hexagon_idH0785  
                3.407180                  3.674725                  3.872191  
    ORIG_hexagon_idH0786      ORIG_hexagon_idH0787      ORIG_hexagon_idH0788  
                3.255854                  2.340638                  2.611879  
    ORIG_hexagon_idH0789      ORIG_hexagon_idH0790      ORIG_hexagon_idH0791  
                2.906988                  3.232020                  2.013672  
    ORIG_hexagon_idH0792      ORIG_hexagon_idH0793      ORIG_hexagon_idH0794  
                1.643209                  2.740710                  3.018545  
    ORIG_hexagon_idH0795      ORIG_hexagon_idH0796      ORIG_hexagon_idH0797  
                2.363321                 -0.252283                 -0.310000  
    ORIG_hexagon_idH0798      ORIG_hexagon_idH0799      ORIG_hexagon_idH0800  
                0.866706                  2.676182                  1.735293  
    ORIG_hexagon_idH0801      ORIG_hexagon_idH0802      ORIG_hexagon_idH0803  
                0.345192                  1.885309                  1.526247  
    ORIG_hexagon_idH0804      ORIG_hexagon_idH0805      ORIG_hexagon_idH0806  
                1.553942                 -0.714129                 -0.303335  
    ORIG_hexagon_idH0807      ORIG_hexagon_idH0808      ORIG_hexagon_idH0809  
                1.088852                  0.506220                  0.346145  
    ORIG_hexagon_idH0810      ORIG_hexagon_idH0811      ORIG_hexagon_idH0812  
                0.884899                  2.275588                  0.566478  
    ORIG_hexagon_idH0813      ORIG_hexagon_idH0814      ORIG_hexagon_idH0815  
               -1.291720                  3.202843                 -0.910521  
    ORIG_hexagon_idH0816      ORIG_hexagon_idH0817      ORIG_hexagon_idH0818  
                0.765109                  1.413978                  2.486669  
    ORIG_hexagon_idH0819      ORIG_hexagon_idH0820      ORIG_hexagon_idH0821  
                1.752660                  2.838594                  2.811883  
    ORIG_hexagon_idH0822      ORIG_hexagon_idH0823      ORIG_hexagon_idH0824  
                1.385074                  2.491508                 -1.117230  
    ORIG_hexagon_idH0825      ORIG_hexagon_idH0826      ORIG_hexagon_idH0827  
                2.627260                  2.000835                  1.683046  
    ORIG_hexagon_idH0828      ORIG_hexagon_idH0829      ORIG_hexagon_idH0830  
                0.250517                  2.033849                  2.600848  
    ORIG_hexagon_idH0831     log(D_BUS_STOP_COUNT)    log(D_preschool_COUNT)  
                2.173436                        NA                        NA  
     log(D_School_COUNT)  log(D_TRAIN_EXITS_COUNT)          log(D_HDB_COUNT)  
                      NA                        NA                        NA  
    log(D_FinServ_COUNT)     log(D_Business_COUNT)             log(DISTANCE)  
                      NA                        NA                 -1.423563  

Degrees of Freedom: 64965 Total (i.e. Null);  64151 Residual
Null Deviance:      97690000 
Residual Deviance: 43890000     AIC: 44250000</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">calc_r_squared</span>(orcSIM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2152567</code></pre>
</div>
</div>
<p><strong>Destination Constrained</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>decSIM <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="at">formula =</span> TRIPS <span class="sc">~</span> </span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>                DEST_hexagon_id <span class="sc">+</span></span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(O_HDB_RESIDENT_COUNT) <span class="sc">+</span></span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(O_BUS_ALIGHT_COUNT) <span class="sc">+</span></span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(O_TRAIN_ALIGHT_COUNT) <span class="sc">+</span></span>
<span id="cb175-6"><a href="#cb175-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(DISTANCE),</span>
<span id="cb175-7"><a href="#cb175-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">family =</span> <span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>),</span>
<span id="cb175-8"><a href="#cb175-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> SIM_data_no_intra,</span>
<span id="cb175-9"><a href="#cb175-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">na.action =</span> na.exclude)</span>
<span id="cb175-10"><a href="#cb175-10" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(decSIM, <span class="st">"data/rds/decSIM.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>decSIM <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/decSIM.rds"</span>)</span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>decSIM</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:  glm(formula = TRIPS ~ DEST_hexagon_id + log(O_HDB_RESIDENT_COUNT) + 
    log(O_BUS_ALIGHT_COUNT) + log(O_TRAIN_ALIGHT_COUNT) + log(DISTANCE), 
    family = poisson(link = "log"), data = SIM_data_no_intra, 
    na.action = na.exclude)

Coefficients:
              (Intercept)       DEST_hexagon_idH0002  
               12.7482893                  2.3457924  
     DEST_hexagon_idH0003       DEST_hexagon_idH0004  
                1.3041160                  0.5184592  
     DEST_hexagon_idH0005       DEST_hexagon_idH0006  
                1.4060922                  1.3174797  
     DEST_hexagon_idH0007       DEST_hexagon_idH0008  
                0.1502021                 -1.2464869  
     DEST_hexagon_idH0009       DEST_hexagon_idH0010  
                0.4490160                  0.8126049  
     DEST_hexagon_idH0011       DEST_hexagon_idH0012  
               -2.6828110                  0.5351733  
     DEST_hexagon_idH0013       DEST_hexagon_idH0014  
               -1.8681715                  1.6072017  
     DEST_hexagon_idH0015       DEST_hexagon_idH0016  
               -0.6731168                  1.1349503  
     DEST_hexagon_idH0017       DEST_hexagon_idH0018  
               -2.1029244                  0.4409625  
     DEST_hexagon_idH0019       DEST_hexagon_idH0020  
               -0.2304884                  1.2051062  
     DEST_hexagon_idH0021       DEST_hexagon_idH0022  
                0.6455535                  0.8603549  
     DEST_hexagon_idH0023       DEST_hexagon_idH0024  
                0.7662626                  0.4615413  
     DEST_hexagon_idH0025       DEST_hexagon_idH0026  
                1.8802002                  1.2378153  
     DEST_hexagon_idH0027       DEST_hexagon_idH0028  
               -0.6618309                  0.0786470  
     DEST_hexagon_idH0029       DEST_hexagon_idH0030  
                0.7362754                 -0.7386394  
     DEST_hexagon_idH0031       DEST_hexagon_idH0032  
                0.8283807                  0.6955547  
     DEST_hexagon_idH0033       DEST_hexagon_idH0034  
               -0.7462067                 -0.4145942  
     DEST_hexagon_idH0035       DEST_hexagon_idH0036  
                0.8496712                 -1.7978664  
     DEST_hexagon_idH0037       DEST_hexagon_idH0038  
                0.5133189                  0.0983228  
     DEST_hexagon_idH0039       DEST_hexagon_idH0040  
                1.2212292                  0.0466448  
     DEST_hexagon_idH0041       DEST_hexagon_idH0042  
                0.1956111                  0.3007108  
     DEST_hexagon_idH0043       DEST_hexagon_idH0044  
                0.8304277                 -0.3850898  
     DEST_hexagon_idH0045       DEST_hexagon_idH0046  
                0.9030869                  0.8715339  
     DEST_hexagon_idH0047       DEST_hexagon_idH0048  
                0.4523754                  0.8680338  
     DEST_hexagon_idH0049       DEST_hexagon_idH0050  
               -2.4913657                  0.6391312  
     DEST_hexagon_idH0051       DEST_hexagon_idH0052  
               -0.2006838                  0.7998688  
     DEST_hexagon_idH0053       DEST_hexagon_idH0054  
                0.0041007                  1.3855116  
     DEST_hexagon_idH0055       DEST_hexagon_idH0056  
                1.9908582                  0.7906388  
     DEST_hexagon_idH0057       DEST_hexagon_idH0058  
                1.1430801                  0.6715666  
     DEST_hexagon_idH0059       DEST_hexagon_idH0060  
                2.0216754                  1.1249997  
     DEST_hexagon_idH0061       DEST_hexagon_idH0062  
                1.2781527                  1.0051431  
     DEST_hexagon_idH0063       DEST_hexagon_idH0064  
                1.7310205                  1.2353984  
     DEST_hexagon_idH0065       DEST_hexagon_idH0066  
                1.1209757                  1.1897257  
     DEST_hexagon_idH0067       DEST_hexagon_idH0068  
                2.3147265                 -0.2632932  
     DEST_hexagon_idH0069       DEST_hexagon_idH0070  
                0.6470552                 -1.9594065  
     DEST_hexagon_idH0071       DEST_hexagon_idH0072  
                0.1556574                 -0.2920810  
     DEST_hexagon_idH0073       DEST_hexagon_idH0074  
                0.1435244                 -0.2836118  
     DEST_hexagon_idH0075       DEST_hexagon_idH0076  
                0.0949761                  0.3004940  
     DEST_hexagon_idH0077       DEST_hexagon_idH0079  
               -0.2980744                  0.6649446  
     DEST_hexagon_idH0080       DEST_hexagon_idH0081  
               -0.2062826                  0.2721957  
     DEST_hexagon_idH0082       DEST_hexagon_idH0084  
               -0.1469703                 -0.1118686  
     DEST_hexagon_idH0085       DEST_hexagon_idH0086  
               -2.0641271                  0.3617037  
     DEST_hexagon_idH0087       DEST_hexagon_idH0088  
               -1.6057063                 -2.4022480  
     DEST_hexagon_idH0089       DEST_hexagon_idH0090  
               -0.5408833                 -0.0583862  
     DEST_hexagon_idH0091       DEST_hexagon_idH0092  
                0.4250267                  0.0175684  
     DEST_hexagon_idH0093       DEST_hexagon_idH0094  
               -0.0001784                  0.9864850  
     DEST_hexagon_idH0095       DEST_hexagon_idH0096  
                0.4893132                 -0.4291245  
     DEST_hexagon_idH0097       DEST_hexagon_idH0098  
               -0.7189892                  1.6585585  
     DEST_hexagon_idH0099       DEST_hexagon_idH0100  
                0.0162018                  1.6064468  
     DEST_hexagon_idH0101       DEST_hexagon_idH0102  
                0.1358557                 -0.3275060  
     DEST_hexagon_idH0103       DEST_hexagon_idH0104  
               -0.7003277                 -1.1520190  
     DEST_hexagon_idH0105       DEST_hexagon_idH0106  
               -4.5498239                 -0.1232934  
     DEST_hexagon_idH0107       DEST_hexagon_idH0108  
                1.4209453                 -0.5634621  
     DEST_hexagon_idH0109       DEST_hexagon_idH0110  
               -0.4209122                  0.5964492  
     DEST_hexagon_idH0111       DEST_hexagon_idH0112  
               -1.3855672                  0.9620241  
     DEST_hexagon_idH0113       DEST_hexagon_idH0114  
               -1.2944212                 -0.4636003  
     DEST_hexagon_idH0115       DEST_hexagon_idH0116  
                0.9047712                 -0.2672792  
     DEST_hexagon_idH0117       DEST_hexagon_idH0118  
                2.2402477                 -0.0432585  
     DEST_hexagon_idH0119       DEST_hexagon_idH0120  
               -3.3211370                 -1.7248891  
     DEST_hexagon_idH0121       DEST_hexagon_idH0122  
               -3.2678142                 -0.1334810  
     DEST_hexagon_idH0123       DEST_hexagon_idH0124  
               -0.9546264                  0.0762705  
     DEST_hexagon_idH0125       DEST_hexagon_idH0126  
                0.4643237                  0.0165258  
     DEST_hexagon_idH0127       DEST_hexagon_idH0128  
               -0.5032985                 -1.2427592  
     DEST_hexagon_idH0129       DEST_hexagon_idH0130  
               -0.4506356                 -0.7540036  
     DEST_hexagon_idH0131       DEST_hexagon_idH0132  
                0.1916158                 -0.9355645  
     DEST_hexagon_idH0133       DEST_hexagon_idH0134  
               -0.2077142                  0.4895483  
     DEST_hexagon_idH0135       DEST_hexagon_idH0136  
               -0.3155745                 -0.1614067  
     DEST_hexagon_idH0137       DEST_hexagon_idH0138  
                0.7386083                  0.2063521  
     DEST_hexagon_idH0139       DEST_hexagon_idH0140  
                0.0660992                  0.6546275  
     DEST_hexagon_idH0141       DEST_hexagon_idH0142  
                0.3274987                  0.7800548  
     DEST_hexagon_idH0143       DEST_hexagon_idH0144  
               -1.0626474                  0.4367983  
     DEST_hexagon_idH0145       DEST_hexagon_idH0146  
                2.0263271                 -1.5978473  
     DEST_hexagon_idH0147       DEST_hexagon_idH0148  
                0.2168136                  0.0081883  
     DEST_hexagon_idH0149       DEST_hexagon_idH0150  
               -2.2339013                  0.2505398  
     DEST_hexagon_idH0151       DEST_hexagon_idH0152  
                0.4148094                 -0.7624235  
     DEST_hexagon_idH0154       DEST_hexagon_idH0156  
               -1.8708802                  0.8605144  
     DEST_hexagon_idH0157       DEST_hexagon_idH0158  
               -2.5420586                  0.2767045  
     DEST_hexagon_idH0160       DEST_hexagon_idH0161  
                1.0226279                 -0.7439207  
     DEST_hexagon_idH0162       DEST_hexagon_idH0163  
               -2.3433655                  0.8503204  
     DEST_hexagon_idH0164       DEST_hexagon_idH0165  
               -0.3967699                  0.3061031  
     DEST_hexagon_idH0166       DEST_hexagon_idH0167  
               -0.8387634                 -1.9682796  
     DEST_hexagon_idH0168       DEST_hexagon_idH0169  
               -0.1501715                  0.0718183  
     DEST_hexagon_idH0170       DEST_hexagon_idH0171  
               -0.3049930                 -1.2833283  
     DEST_hexagon_idH0172       DEST_hexagon_idH0173  
               -1.4785031                 -0.2653622  
     DEST_hexagon_idH0174       DEST_hexagon_idH0175  
                0.2407427                  1.4268204  
     DEST_hexagon_idH0176       DEST_hexagon_idH0177  
               -0.3118527                 -0.1120382  
     DEST_hexagon_idH0178       DEST_hexagon_idH0179  
               -1.7324005                  0.1621212  
     DEST_hexagon_idH0180       DEST_hexagon_idH0181  
               -0.3833239                  0.0127425  
     DEST_hexagon_idH0182       DEST_hexagon_idH0183  
               -0.0723645                 -0.1051428  
     DEST_hexagon_idH0184       DEST_hexagon_idH0185  
               -0.2486933                  0.0660969  
     DEST_hexagon_idH0186       DEST_hexagon_idH0187  
               -0.5533882                 -1.3030645  
     DEST_hexagon_idH0188       DEST_hexagon_idH0189  
                1.9300699                  2.0077766  
     DEST_hexagon_idH0190       DEST_hexagon_idH0191  
               -0.3711916                 -0.4320353  
     DEST_hexagon_idH0192       DEST_hexagon_idH0193  
               -0.1587596                  0.7312447  
     DEST_hexagon_idH0194       DEST_hexagon_idH0195  
               -0.3791735                 -0.8925556  
     DEST_hexagon_idH0196       DEST_hexagon_idH0197  
                0.0020291                 -0.3056905  
     DEST_hexagon_idH0198       DEST_hexagon_idH0199  
               -0.5040208                  0.4122683  
     DEST_hexagon_idH0200       DEST_hexagon_idH0201  
                0.3423016                 -0.4994919  
     DEST_hexagon_idH0202       DEST_hexagon_idH0203  
               -1.3785814                  0.2902229  
     DEST_hexagon_idH0204       DEST_hexagon_idH0205  
                1.1051251                  0.7591099  
     DEST_hexagon_idH0206       DEST_hexagon_idH0207  
                1.5358112                  1.3469008  
     DEST_hexagon_idH0208       DEST_hexagon_idH0209  
                1.6301220                  0.1273033  
     DEST_hexagon_idH0210       DEST_hexagon_idH0211  
               -0.2350473                 -1.4386838  
     DEST_hexagon_idH0212       DEST_hexagon_idH0213  
               -1.1771891                 -0.6586000  
     DEST_hexagon_idH0214       DEST_hexagon_idH0215  
                0.3365678                 -0.1908558  
     DEST_hexagon_idH0216       DEST_hexagon_idH0217  
               -1.5039728                 -0.7036753  
     DEST_hexagon_idH0218       DEST_hexagon_idH0219  
                0.3531740                 -1.0525619  
     DEST_hexagon_idH0220       DEST_hexagon_idH0221  
                0.4311881                 -1.1740291  
     DEST_hexagon_idH0222       DEST_hexagon_idH0223  
               -0.0631009                 -1.8951150  
     DEST_hexagon_idH0224       DEST_hexagon_idH0225  
               -1.8399855                  0.1352107  
     DEST_hexagon_idH0226       DEST_hexagon_idH0227  
                0.5941815                 -0.3394095  
     DEST_hexagon_idH0228       DEST_hexagon_idH0229  
               -1.2334308                  1.1907120  
     DEST_hexagon_idH0230       DEST_hexagon_idH0231  
               -0.4875756                 -0.0695340  
     DEST_hexagon_idH0232       DEST_hexagon_idH0233  
                1.1508893                 -2.5258953  
     DEST_hexagon_idH0234       DEST_hexagon_idH0235  
               -0.7845284                 -1.3079665  
     DEST_hexagon_idH0236       DEST_hexagon_idH0237  
               -0.4457847                  0.7872887  
     DEST_hexagon_idH0238       DEST_hexagon_idH0239  
               -0.5517290                 -2.0538783  
     DEST_hexagon_idH0240       DEST_hexagon_idH0241  
               -0.0248843                 -0.3661666  
     DEST_hexagon_idH0242       DEST_hexagon_idH0243  
                1.8921894                 -3.9847572  
     DEST_hexagon_idH0244       DEST_hexagon_idH0245  
                2.0918911                 -0.9807519  
     DEST_hexagon_idH0246       DEST_hexagon_idH0247  
               -1.1645676                  0.8071397  
     DEST_hexagon_idH0248       DEST_hexagon_idH0249  
                1.6081752                  0.3165243  
     DEST_hexagon_idH0250       DEST_hexagon_idH0251  
               -0.0958705                 -1.8635120  
     DEST_hexagon_idH0252       DEST_hexagon_idH0253  
                0.9522883                 -0.8384387  
     DEST_hexagon_idH0254       DEST_hexagon_idH0255  
               -0.2769084                 -0.3653107  
     DEST_hexagon_idH0256       DEST_hexagon_idH0257  
               -0.4110772                  1.7042574  
     DEST_hexagon_idH0258       DEST_hexagon_idH0259  
                0.0914518                  0.2477189  
     DEST_hexagon_idH0260       DEST_hexagon_idH0262  
               -0.4437025                 -0.6804224  
     DEST_hexagon_idH0263       DEST_hexagon_idH0264  
               -1.6159691                 -0.9904128  
     DEST_hexagon_idH0265       DEST_hexagon_idH0266  
               -0.2593263                 -0.4691416  
     DEST_hexagon_idH0267       DEST_hexagon_idH0269  
               -0.9750517                  0.1661157  
     DEST_hexagon_idH0270       DEST_hexagon_idH0271  
                0.2943348                 -1.1588368  
     DEST_hexagon_idH0272       DEST_hexagon_idH0273  
               -1.1738752                 -0.3127586  
     DEST_hexagon_idH0274       DEST_hexagon_idH0275  
               -0.7319673                  0.0038471  
     DEST_hexagon_idH0276       DEST_hexagon_idH0277  
                0.3599697                 -0.5066824  
     DEST_hexagon_idH0278       DEST_hexagon_idH0279  
               -0.0688715                  1.5982404  
     DEST_hexagon_idH0280       DEST_hexagon_idH0281  
                0.7609782                 -0.2333601  
     DEST_hexagon_idH0282       DEST_hexagon_idH0283  
                0.9952369                 -0.3412188  
     DEST_hexagon_idH0284       DEST_hexagon_idH0285  
               -1.8413863                  0.9900721  
     DEST_hexagon_idH0286       DEST_hexagon_idH0287  
                1.2793701                 -0.4728178  
     DEST_hexagon_idH0288       DEST_hexagon_idH0289  
                0.4109329                 -1.0497651  
     DEST_hexagon_idH0290       DEST_hexagon_idH0291  
               -0.0333840                 -3.8047639  
     DEST_hexagon_idH0292       DEST_hexagon_idH0293  
                0.2563353                  0.6836509  
     DEST_hexagon_idH0294       DEST_hexagon_idH0295  
                0.5661188                  1.1708653  
     DEST_hexagon_idH0296       DEST_hexagon_idH0297  
               -0.0239882                  0.6114508  
     DEST_hexagon_idH0298       DEST_hexagon_idH0299  
               -0.0229906                  0.2761894  
     DEST_hexagon_idH0300       DEST_hexagon_idH0301  
                0.9299718                  0.5266796  
     DEST_hexagon_idH0302       DEST_hexagon_idH0303  
               -0.5020150                 -0.9775628  
     DEST_hexagon_idH0304       DEST_hexagon_idH0305  
               -2.6315077                  0.9522185  
     DEST_hexagon_idH0306       DEST_hexagon_idH0307  
                1.5214395                 -1.1795641  
     DEST_hexagon_idH0308       DEST_hexagon_idH0309  
                0.4189504                 -0.2940049  
     DEST_hexagon_idH0310       DEST_hexagon_idH0311  
               -0.9486405                  0.3360177  
     DEST_hexagon_idH0312       DEST_hexagon_idH0313  
               -1.3340401                  0.0790196  
     DEST_hexagon_idH0314       DEST_hexagon_idH0315  
                0.3913821                 -3.0863246  
     DEST_hexagon_idH0316       DEST_hexagon_idH0317  
               -0.0315360                 -0.4267873  
     DEST_hexagon_idH0318       DEST_hexagon_idH0319  
                0.6286849                 -1.7714347  
     DEST_hexagon_idH0320       DEST_hexagon_idH0321  
               -0.3088106                  1.8100363  
     DEST_hexagon_idH0322       DEST_hexagon_idH0323  
               -3.0527292                  0.2814038  
     DEST_hexagon_idH0324       DEST_hexagon_idH0325  
                2.3059908                 -1.0804653  
     DEST_hexagon_idH0326       DEST_hexagon_idH0327  
               -0.3240703                  0.1189933  
     DEST_hexagon_idH0328       DEST_hexagon_idH0329  
               -1.6849249                 -0.9842335  
     DEST_hexagon_idH0330       DEST_hexagon_idH0331  
               -1.2300723                 -0.3850940  
     DEST_hexagon_idH0332       DEST_hexagon_idH0333  
                0.0521036                  2.0195952  
     DEST_hexagon_idH0334       DEST_hexagon_idH0335  
                0.9325267                 -1.3450895  
     DEST_hexagon_idH0336       DEST_hexagon_idH0337  
               -0.4550925                 -0.3057558  
     DEST_hexagon_idH0338       DEST_hexagon_idH0339  
               -0.9974352                 -0.6595176  
     DEST_hexagon_idH0340       DEST_hexagon_idH0341  
               -0.5245504                 -0.0397240  
     DEST_hexagon_idH0343       DEST_hexagon_idH0344  
               -1.1553828                 -0.9260790  
     DEST_hexagon_idH0345       DEST_hexagon_idH0346  
                0.6299967                  0.3195185  
     DEST_hexagon_idH0347       DEST_hexagon_idH0348  
                1.6439231                  0.9603433  
     DEST_hexagon_idH0349       DEST_hexagon_idH0350  
               -1.8213242                  1.1108921  
     DEST_hexagon_idH0351       DEST_hexagon_idH0352  
                0.0525348                  0.1469084  
     DEST_hexagon_idH0353       DEST_hexagon_idH0354  
               -0.9343957                  0.8469401  
     DEST_hexagon_idH0355       DEST_hexagon_idH0356  
               -1.0297236                  0.4598126  
     DEST_hexagon_idH0357       DEST_hexagon_idH0358  
                0.3067503                  0.7819796  
     DEST_hexagon_idH0360       DEST_hexagon_idH0361  
               -0.3507430                 -0.5766759  
     DEST_hexagon_idH0362       DEST_hexagon_idH0363  
               -0.4016187                 -0.5244258  
     DEST_hexagon_idH0364       DEST_hexagon_idH0365  
               -4.1335789                 -0.7807824  
     DEST_hexagon_idH0366       DEST_hexagon_idH0367  
               -0.2865649                  0.3533803  
     DEST_hexagon_idH0368       DEST_hexagon_idH0369  
               -0.0859506                  0.4257608  
     DEST_hexagon_idH0370       DEST_hexagon_idH0371  
               -0.7068640                 -0.9960010  
     DEST_hexagon_idH0372       DEST_hexagon_idH0373  
               -0.3145486                 -2.0430982  
     DEST_hexagon_idH0374       DEST_hexagon_idH0375  
               -0.4942027                  0.1582363  
     DEST_hexagon_idH0376       DEST_hexagon_idH0377  
               -0.0557040                 -1.2639494  
     DEST_hexagon_idH0378       DEST_hexagon_idH0379  
               -1.0913712                  0.0243228  
     DEST_hexagon_idH0380       DEST_hexagon_idH0381  
               -0.6245663                 -0.9659256  
     DEST_hexagon_idH0382       DEST_hexagon_idH0383  
                0.3998653                  1.2336462  
     DEST_hexagon_idH0384       DEST_hexagon_idH0385  
               -1.5216980                  0.6553445  
     DEST_hexagon_idH0386       DEST_hexagon_idH0387  
               -0.2716294                 -0.1299964  
     DEST_hexagon_idH0388       DEST_hexagon_idH0389  
                0.0584799                 -1.3176342  
     DEST_hexagon_idH0390       DEST_hexagon_idH0391  
               -4.0447047                  0.5709567  
     DEST_hexagon_idH0392       DEST_hexagon_idH0393  
                0.6886335                  0.2881928  
     DEST_hexagon_idH0394       DEST_hexagon_idH0395  
                1.1462716                  0.6227786  
     DEST_hexagon_idH0396       DEST_hexagon_idH0397  
                0.2278005                 -0.6488311  
     DEST_hexagon_idH0398       DEST_hexagon_idH0399  
               -2.7879197                 -3.6977812  
     DEST_hexagon_idH0400       DEST_hexagon_idH0401  
                0.2831110                 -1.7981611  
     DEST_hexagon_idH0402       DEST_hexagon_idH0403  
               -0.0622911                 -0.3764831  
     DEST_hexagon_idH0404       DEST_hexagon_idH0405  
               -0.0450444                  0.1431504  
     DEST_hexagon_idH0406       DEST_hexagon_idH0407  
               -1.0894568                  0.2904447  
     DEST_hexagon_idH0408       DEST_hexagon_idH0409  
               -4.8894930                 -1.4379781  
     DEST_hexagon_idH0410       DEST_hexagon_idH0411  
               -1.5259674                 -1.8231513  
     DEST_hexagon_idH0412       DEST_hexagon_idH0413  
                1.2502578                 -1.0271269  
     DEST_hexagon_idH0414       DEST_hexagon_idH0415  
                0.1292802                 -1.6933755  
     DEST_hexagon_idH0416       DEST_hexagon_idH0417  
               -0.2779599                 -0.0732411  
     DEST_hexagon_idH0418       DEST_hexagon_idH0419  
               -0.1553869                 -0.1223818  
     DEST_hexagon_idH0420       DEST_hexagon_idH0421  
                1.1154132                 -5.2195573  
     DEST_hexagon_idH0422       DEST_hexagon_idH0423  
               -1.5455026                 -0.9530415  
     DEST_hexagon_idH0424       DEST_hexagon_idH0425  
                1.0082731                 -2.7962764  
     DEST_hexagon_idH0426       DEST_hexagon_idH0427  
               -2.6537762                 -2.7805823  
     DEST_hexagon_idH0428       DEST_hexagon_idH0429  
                0.8479743                 -0.6356641  
     DEST_hexagon_idH0430       DEST_hexagon_idH0431  
               -4.1454402                 -0.2792119  
     DEST_hexagon_idH0432       DEST_hexagon_idH0433  
                0.7891388                 -0.4132736  
     DEST_hexagon_idH0434       DEST_hexagon_idH0435  
                0.6084605                 -0.5810776  
     DEST_hexagon_idH0436       DEST_hexagon_idH0437  
               -0.0083015                 -1.2310270  
     DEST_hexagon_idH0438       DEST_hexagon_idH0439  
               -0.9183541                 -1.4792683  
     DEST_hexagon_idH0440       DEST_hexagon_idH0441  
                0.9235574                 -0.4591341  
     DEST_hexagon_idH0442       DEST_hexagon_idH0443  
               -0.6846471                 -0.4196155  
     DEST_hexagon_idH0444       DEST_hexagon_idH0445  
               -1.8399037                 -1.2069273  
     DEST_hexagon_idH0446       DEST_hexagon_idH0447  
               -1.1083156                  0.7678419  
     DEST_hexagon_idH0448       DEST_hexagon_idH0449  
               -0.2259377                 -0.1437157  
     DEST_hexagon_idH0450       DEST_hexagon_idH0451  
               -3.0247966                 -1.7129385  
     DEST_hexagon_idH0452       DEST_hexagon_idH0453  
                0.0093098                 -1.6023034  
     DEST_hexagon_idH0455       DEST_hexagon_idH0456  
               -3.5190219                  1.5496421  
     DEST_hexagon_idH0457       DEST_hexagon_idH0458  
                1.8882839                  1.0236588  
     DEST_hexagon_idH0459       DEST_hexagon_idH0460  
               -1.6469643                 -0.4247528  
     DEST_hexagon_idH0461       DEST_hexagon_idH0462  
               -0.8320512                 -0.4106745  
     DEST_hexagon_idH0463       DEST_hexagon_idH0464  
                0.5810097                  0.5318851  
     DEST_hexagon_idH0465       DEST_hexagon_idH0466  
               -0.8506953                 -0.0787760  
     DEST_hexagon_idH0467       DEST_hexagon_idH0468  
               -0.6015895                  0.1090338  
     DEST_hexagon_idH0469       DEST_hexagon_idH0470  
               -0.6080947                 -1.0908882  
     DEST_hexagon_idH0471       DEST_hexagon_idH0472  
               -1.0819179                  0.7693099  
     DEST_hexagon_idH0473       DEST_hexagon_idH0474  
               -0.0426451                 -0.3311323  
     DEST_hexagon_idH0475       DEST_hexagon_idH0476  
                0.4819085                 -0.4533705  
     DEST_hexagon_idH0477       DEST_hexagon_idH0478  
                0.4897320                  0.1616119  
     DEST_hexagon_idH0479       DEST_hexagon_idH0480  
               -0.3329690                 -0.0164431  
     DEST_hexagon_idH0481       DEST_hexagon_idH0482  
               -0.7305997                 -0.3219154  
     DEST_hexagon_idH0483       DEST_hexagon_idH0484  
               -0.1848251                 -0.5700909  
     DEST_hexagon_idH0485       DEST_hexagon_idH0486  
               -0.1449838                  0.2229375  
     DEST_hexagon_idH0487       DEST_hexagon_idH0488  
                0.2779324                  0.6340086  
     DEST_hexagon_idH0489       DEST_hexagon_idH0490  
                0.3289507                 -0.3390031  
     DEST_hexagon_idH0491       DEST_hexagon_idH0492  
                0.5634750                  0.0531986  
     DEST_hexagon_idH0493       DEST_hexagon_idH0494  
               -1.1910701                 -0.5156521  
     DEST_hexagon_idH0495       DEST_hexagon_idH0496  
                0.1190603                  0.8992057  
     DEST_hexagon_idH0497       DEST_hexagon_idH0498  
                0.4243741                 -1.7427929  
     DEST_hexagon_idH0499       DEST_hexagon_idH0500  
                0.0509437                  0.6920359  
     DEST_hexagon_idH0501       DEST_hexagon_idH0502  
                0.9352328                  0.0435752  
     DEST_hexagon_idH0503       DEST_hexagon_idH0504  
               -1.0901165                 -0.3054087  
     DEST_hexagon_idH0505       DEST_hexagon_idH0506  
               -0.1680324                  0.5063591  
     DEST_hexagon_idH0507       DEST_hexagon_idH0508  
                1.4376402                 -1.1757322  
     DEST_hexagon_idH0509       DEST_hexagon_idH0510  
                0.1296888                 -0.0515650  
     DEST_hexagon_idH0511       DEST_hexagon_idH0512  
               -0.1994347                 -0.7038072  
     DEST_hexagon_idH0513       DEST_hexagon_idH0514  
               -0.1998879                  0.6994207  
     DEST_hexagon_idH0515       DEST_hexagon_idH0516  
                0.6423575                  0.3883810  
     DEST_hexagon_idH0517       DEST_hexagon_idH0518  
               -0.5910312                  1.3910096  
     DEST_hexagon_idH0519       DEST_hexagon_idH0520  
               -0.2047855                 -1.0410706  
     DEST_hexagon_idH0521       DEST_hexagon_idH0522  
                1.3221615                 -0.0340316  
     DEST_hexagon_idH0523       DEST_hexagon_idH0524  
                1.0049017                 -1.1175642  
     DEST_hexagon_idH0525       DEST_hexagon_idH0526  
                0.5773101                 -0.4031564  
     DEST_hexagon_idH0527       DEST_hexagon_idH0528  
                0.5896643                 -0.7227398  
     DEST_hexagon_idH0529       DEST_hexagon_idH0530  
               -0.4370285                  0.0709557  
     DEST_hexagon_idH0531       DEST_hexagon_idH0532  
               -0.6027590                  0.3458650  
     DEST_hexagon_idH0533       DEST_hexagon_idH0534  
                0.3135373                 -2.8482169  
     DEST_hexagon_idH0536       DEST_hexagon_idH0537  
               -0.6586267                  0.7185968  
     DEST_hexagon_idH0538       DEST_hexagon_idH0539  
               -0.3627611                 -0.9357034  
     DEST_hexagon_idH0540       DEST_hexagon_idH0541  
               -0.4032742                 -0.1737616  
     DEST_hexagon_idH0542       DEST_hexagon_idH0543  
               -0.7931376                  0.0525385  
     DEST_hexagon_idH0544       DEST_hexagon_idH0545  
                1.1850545                 -0.8221645  
     DEST_hexagon_idH0546       DEST_hexagon_idH0547  
               -2.3095907                 -1.4843757  
     DEST_hexagon_idH0548       DEST_hexagon_idH0549  
               -1.7331308                  0.0778455  
     DEST_hexagon_idH0550       DEST_hexagon_idH0551  
               -0.1253336                 -0.0557783  
     DEST_hexagon_idH0552       DEST_hexagon_idH0553  
               -0.6132798                  0.4623473  
     DEST_hexagon_idH0554       DEST_hexagon_idH0555  
               -0.8328934                 -0.8218160  
     DEST_hexagon_idH0556       DEST_hexagon_idH0557  
               -0.6636406                 -0.6849317  
     DEST_hexagon_idH0558       DEST_hexagon_idH0559  
               -1.9982267                 -1.1847643  
     DEST_hexagon_idH0560       DEST_hexagon_idH0561  
                0.3107196                  0.4331975  
     DEST_hexagon_idH0562       DEST_hexagon_idH0563  
                0.4393989                 -0.1926404  
     DEST_hexagon_idH0564       DEST_hexagon_idH0565  
               -2.3934339                 -1.2531243  
     DEST_hexagon_idH0566       DEST_hexagon_idH0567  
               -0.8240277                 -0.0985208  
     DEST_hexagon_idH0568       DEST_hexagon_idH0569  
               -1.6012835                 -1.0954257  
     DEST_hexagon_idH0570       DEST_hexagon_idH0571  
               -0.3541265                 -2.6478831  
     DEST_hexagon_idH0572       DEST_hexagon_idH0573  
               -2.4872582                  0.0612665  
     DEST_hexagon_idH0574       DEST_hexagon_idH0575  
                0.2845721                 -1.3098906  
     DEST_hexagon_idH0576       DEST_hexagon_idH0577  
               -1.3689463                 -0.4667255  
     DEST_hexagon_idH0578       DEST_hexagon_idH0579  
                0.1983411                 -0.7933212  
     DEST_hexagon_idH0580       DEST_hexagon_idH0581  
               -0.3009658                 -0.2553066  
     DEST_hexagon_idH0582       DEST_hexagon_idH0583  
               -0.8429618                 -0.5064030  
     DEST_hexagon_idH0584       DEST_hexagon_idH0585  
                0.7035040                 -1.5024986  
     DEST_hexagon_idH0586       DEST_hexagon_idH0587  
               -0.3535176                 -0.9611334  
     DEST_hexagon_idH0588       DEST_hexagon_idH0589  
                0.4639096                 -0.0303057  
     DEST_hexagon_idH0590       DEST_hexagon_idH0591  
                0.6953117                 -1.2069952  
     DEST_hexagon_idH0592       DEST_hexagon_idH0593  
                0.5185232                  0.1838613  
     DEST_hexagon_idH0594       DEST_hexagon_idH0595  
                0.6618179                 -0.0872081  
     DEST_hexagon_idH0596       DEST_hexagon_idH0597  
                1.8000895                 -1.2308622  
     DEST_hexagon_idH0598       DEST_hexagon_idH0599  
                0.8765796                 -1.7395356  
     DEST_hexagon_idH0600       DEST_hexagon_idH0601  
               -1.0628162                 -1.5452703  
     DEST_hexagon_idH0602       DEST_hexagon_idH0603  
               -2.1511502                 -0.2881480  
     DEST_hexagon_idH0604       DEST_hexagon_idH0605  
               -0.4849922                 -0.4796298  
     DEST_hexagon_idH0606       DEST_hexagon_idH0607  
               -0.2221958                 -0.5756639  
     DEST_hexagon_idH0608       DEST_hexagon_idH0609  
               -0.4128036                  0.3530746  
     DEST_hexagon_idH0610       DEST_hexagon_idH0611  
               -0.2455679                 -3.9595541  
     DEST_hexagon_idH0612       DEST_hexagon_idH0613  
                0.3450020                  0.3254543  
     DEST_hexagon_idH0614       DEST_hexagon_idH0615  
               -0.8946168                 -0.6407597  
     DEST_hexagon_idH0616       DEST_hexagon_idH0617  
                0.0939090                 -0.3378512  
     DEST_hexagon_idH0618       DEST_hexagon_idH0619  
               -0.8996385                  0.0888980  
     DEST_hexagon_idH0620       DEST_hexagon_idH0621  
               -0.9752481                 -0.3378149  
     DEST_hexagon_idH0622       DEST_hexagon_idH0623  
               -0.0926121                 -0.5946054  
     DEST_hexagon_idH0624       DEST_hexagon_idH0625  
               -1.2447237                 -1.7344802  
     DEST_hexagon_idH0626       DEST_hexagon_idH0627  
                0.2804736                 -1.4975417  
     DEST_hexagon_idH0628       DEST_hexagon_idH0629  
               -0.3013942                 -1.1563802  
     DEST_hexagon_idH0630       DEST_hexagon_idH0631  
               -0.5721162                  0.2071631  
     DEST_hexagon_idH0632       DEST_hexagon_idH0633  
                0.1336534                  0.9446224  
     DEST_hexagon_idH0634       DEST_hexagon_idH0635  
                0.1111668                 -2.1819362  
     DEST_hexagon_idH0636       DEST_hexagon_idH0638  
               -0.5789924                  0.1834791  
     DEST_hexagon_idH0639       DEST_hexagon_idH0640  
                0.1309987                  0.3129234  
     DEST_hexagon_idH0641       DEST_hexagon_idH0642  
               -0.7797152                  0.0518110  
     DEST_hexagon_idH0643       DEST_hexagon_idH0644  
               -0.0423067                 -1.1804425  
     DEST_hexagon_idH0645       DEST_hexagon_idH0646  
                0.1250761                 -0.2774659  
     DEST_hexagon_idH0647       DEST_hexagon_idH0648  
               -0.7419600                  0.3975689  
     DEST_hexagon_idH0649       DEST_hexagon_idH0650  
                0.2028665                 -0.2133273  
     DEST_hexagon_idH0651       DEST_hexagon_idH0652  
                0.2521806                  1.4373342  
     DEST_hexagon_idH0653       DEST_hexagon_idH0654  
                0.7168497                 -0.1152935  
     DEST_hexagon_idH0655       DEST_hexagon_idH0657  
               -1.4879053                 -0.2839227  
     DEST_hexagon_idH0658       DEST_hexagon_idH0659  
               -0.6621638                  0.2689901  
     DEST_hexagon_idH0660       DEST_hexagon_idH0661  
                0.9855571                 -0.6536529  
     DEST_hexagon_idH0662       DEST_hexagon_idH0663  
               -1.0661168                  1.3545451  
     DEST_hexagon_idH0664       DEST_hexagon_idH0665  
               -0.4049066                 -0.3061956  
     DEST_hexagon_idH0666       DEST_hexagon_idH0667  
                0.5007236                 -0.0725305  
     DEST_hexagon_idH0668       DEST_hexagon_idH0669  
               -0.1402759                 -0.0275272  
     DEST_hexagon_idH0670       DEST_hexagon_idH0671  
                1.2807844                 -2.2808149  
     DEST_hexagon_idH0672       DEST_hexagon_idH0673  
               -0.0049520                 -0.3155314  
     DEST_hexagon_idH0674       DEST_hexagon_idH0675  
               -0.0951344                 -0.8992049  
     DEST_hexagon_idH0676       DEST_hexagon_idH0677  
               -2.2189920                 -0.3937744  
     DEST_hexagon_idH0678       DEST_hexagon_idH0679  
                0.8293964                  0.9427593  
     DEST_hexagon_idH0680       DEST_hexagon_idH0681  
               -1.3661901                 -0.4687311  
     DEST_hexagon_idH0682       DEST_hexagon_idH0683  
                1.5047231                 -2.6768819  
     DEST_hexagon_idH0684       DEST_hexagon_idH0685  
                0.9624545                 -0.5546278  
     DEST_hexagon_idH0686       DEST_hexagon_idH0687  
               -0.7199536                 -0.5990520  
     DEST_hexagon_idH0688       DEST_hexagon_idH0689  
               -0.4225963                 -1.3589489  
     DEST_hexagon_idH0690       DEST_hexagon_idH0691  
                1.1569326                 -1.7805151  
     DEST_hexagon_idH0692       DEST_hexagon_idH0693  
                0.1770288                 -0.1485200  
     DEST_hexagon_idH0694       DEST_hexagon_idH0695  
                0.1679584                  0.3764227  
     DEST_hexagon_idH0696       DEST_hexagon_idH0697  
                0.5081901                 -0.7951506  
     DEST_hexagon_idH0698       DEST_hexagon_idH0700  
               -0.1766832                 -0.4154603  
     DEST_hexagon_idH0701       DEST_hexagon_idH0702  
               -2.0582828                 -0.7929340  
     DEST_hexagon_idH0703       DEST_hexagon_idH0704  
                0.1982412                 -0.4156939  
     DEST_hexagon_idH0705       DEST_hexagon_idH0706  
               -0.1045044                 -1.1460811  
     DEST_hexagon_idH0707       DEST_hexagon_idH0708  
                0.2057050                 -0.7188125  
     DEST_hexagon_idH0709       DEST_hexagon_idH0710  
               -1.4114348                 -1.8867359  
     DEST_hexagon_idH0711       DEST_hexagon_idH0712  
               -0.8201920                 -1.3896200  
     DEST_hexagon_idH0714       DEST_hexagon_idH0715  
               -0.7186057                  0.3349775  
     DEST_hexagon_idH0716       DEST_hexagon_idH0717  
                0.4565667                  0.2760301  
     DEST_hexagon_idH0718       DEST_hexagon_idH0719  
               -1.5726139                 -0.2858962  
     DEST_hexagon_idH0720       DEST_hexagon_idH0721  
                0.4767534                 -0.6209698  
     DEST_hexagon_idH0722       DEST_hexagon_idH0724  
               -1.1901430                 -0.6578452  
     DEST_hexagon_idH0725       DEST_hexagon_idH0726  
                1.7153507                 -1.1314423  
     DEST_hexagon_idH0727       DEST_hexagon_idH0728  
               -0.1517652                  0.7165958  
     DEST_hexagon_idH0729       DEST_hexagon_idH0730  
               -0.3118831                 -0.3947835  
     DEST_hexagon_idH0731       DEST_hexagon_idH0732  
               -0.5438914                 -0.0864842  
     DEST_hexagon_idH0733       DEST_hexagon_idH0734  
               -0.1561208                 -0.1114221  
     DEST_hexagon_idH0735       DEST_hexagon_idH0736  
                0.2117212                 -0.2320560  
     DEST_hexagon_idH0737       DEST_hexagon_idH0738  
               -0.0661947                  0.4017743  
     DEST_hexagon_idH0739       DEST_hexagon_idH0740  
                0.6449370                 -0.2929073  
     DEST_hexagon_idH0741       DEST_hexagon_idH0742  
                0.7473651                 -2.5097707  
     DEST_hexagon_idH0743       DEST_hexagon_idH0744  
                0.3923428                  0.2550933  
     DEST_hexagon_idH0745       DEST_hexagon_idH0746  
                0.5418198                 -0.5901863  
     DEST_hexagon_idH0747       DEST_hexagon_idH0748  
               -1.2233598                  0.6714605  
     DEST_hexagon_idH0749       DEST_hexagon_idH0750  
               -1.0049964                 -0.2895958  
     DEST_hexagon_idH0751       DEST_hexagon_idH0752  
               -1.0332419                  0.6138959  
     DEST_hexagon_idH0753       DEST_hexagon_idH0754  
               -1.1411187                 -0.8693189  
     DEST_hexagon_idH0755       DEST_hexagon_idH0756  
               -2.5872591                 -0.3225175  
     DEST_hexagon_idH0757       DEST_hexagon_idH0758  
               -0.6244939                 -2.7822965  
     DEST_hexagon_idH0759       DEST_hexagon_idH0760  
                2.0773671                 -1.1476050  
     DEST_hexagon_idH0761       DEST_hexagon_idH0762  
               -0.5655654                 -0.2706514  
     DEST_hexagon_idH0763       DEST_hexagon_idH0764  
                1.0932690                  0.7288859  
     DEST_hexagon_idH0765       DEST_hexagon_idH0766  
               -0.4106883                 -0.8731446  
     DEST_hexagon_idH0767       DEST_hexagon_idH0768  
                1.8817953                 -3.0361644  
     DEST_hexagon_idH0769       DEST_hexagon_idH0770  
                0.0143161                 -1.6797266  
     DEST_hexagon_idH0771       DEST_hexagon_idH0772  
                1.0237356                  0.5601961  
     DEST_hexagon_idH0773       DEST_hexagon_idH0774  
               -0.6203854                 -1.3707019  
     DEST_hexagon_idH0775       DEST_hexagon_idH0776  
               -2.3245793                 -0.0637786  
     DEST_hexagon_idH0777       DEST_hexagon_idH0778  
               -0.3031889                 -0.2244625  
     DEST_hexagon_idH0779       DEST_hexagon_idH0780  
               -0.3397341                 -0.4571314  
     DEST_hexagon_idH0781       DEST_hexagon_idH0782  
               -0.6576611                 -0.7962584  
     DEST_hexagon_idH0783       DEST_hexagon_idH0784  
               -0.5526941                  1.2032785  
     DEST_hexagon_idH0785       DEST_hexagon_idH0786  
                0.2360790                 -0.9372300  
     DEST_hexagon_idH0787       DEST_hexagon_idH0788  
                0.3865300                 -1.3228614  
     DEST_hexagon_idH0789       DEST_hexagon_idH0790  
               -0.6860358                 -0.0948796  
     DEST_hexagon_idH0791       DEST_hexagon_idH0792  
                0.6228098                 -0.6394148  
     DEST_hexagon_idH0793       DEST_hexagon_idH0794  
                0.0356125                  0.0055295  
     DEST_hexagon_idH0795       DEST_hexagon_idH0796  
               -1.2508271                  0.7646666  
     DEST_hexagon_idH0797       DEST_hexagon_idH0798  
                0.3525449                  0.9443630  
     DEST_hexagon_idH0799       DEST_hexagon_idH0800  
               -0.6440054                  0.2975822  
     DEST_hexagon_idH0801       DEST_hexagon_idH0802  
                0.9472941                  1.2114497  
     DEST_hexagon_idH0803       DEST_hexagon_idH0804  
                0.1813067                 -1.2393531  
     DEST_hexagon_idH0805       DEST_hexagon_idH0806  
                0.1266923                  0.0910385  
     DEST_hexagon_idH0807       DEST_hexagon_idH0808  
               -1.9190047                 -0.0230925  
     DEST_hexagon_idH0809       DEST_hexagon_idH0810  
                0.9930013                 -0.7252305  
     DEST_hexagon_idH0811       DEST_hexagon_idH0812  
               -0.5390216                  0.1792497  
     DEST_hexagon_idH0813       DEST_hexagon_idH0814  
               -1.3282012                 -0.6890916  
     DEST_hexagon_idH0815       DEST_hexagon_idH0816  
               -0.8977208                 -0.2524458  
     DEST_hexagon_idH0817       DEST_hexagon_idH0818  
                1.3574590                  1.3868475  
     DEST_hexagon_idH0819       DEST_hexagon_idH0820  
                0.1367609                  1.2107351  
     DEST_hexagon_idH0821       DEST_hexagon_idH0822  
                1.5649594                 -0.6780500  
     DEST_hexagon_idH0823       DEST_hexagon_idH0824  
                0.3641346                 -1.8582481  
     DEST_hexagon_idH0825       DEST_hexagon_idH0826  
                0.2572576                  1.1680011  
     DEST_hexagon_idH0827       DEST_hexagon_idH0828  
                1.8220300                 -1.2331758  
     DEST_hexagon_idH0829       DEST_hexagon_idH0830  
                1.0476512                  1.4174158  
     DEST_hexagon_idH0831  log(O_HDB_RESIDENT_COUNT)  
                1.6309333                  0.1414246  
  log(O_BUS_ALIGHT_COUNT)  log(O_TRAIN_ALIGHT_COUNT)  
                0.3904020                  0.0032611  
            log(DISTANCE)  
               -1.5105955  

Degrees of Freedom: 64965 Total (i.e. Null);  64147 Residual
Null Deviance:      97690000 
Residual Deviance: 33370000     AIC: 33730000</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">calc_r_squared</span>(decSIM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4007873</code></pre>
</div>
</div>
<p><strong>Doubly constrained</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|eval: false</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>dbcSIM <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="at">formula =</span> TRIPS <span class="sc">~</span> </span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>                ORIG_hexagon_id <span class="sc">+</span> </span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a>                DEST_hexagon_id <span class="sc">+</span></span>
<span id="cb180-5"><a href="#cb180-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">log</span>(DISTANCE),</span>
<span id="cb180-6"><a href="#cb180-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">family =</span> <span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>),</span>
<span id="cb180-7"><a href="#cb180-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> SIM_data_no_intra,</span>
<span id="cb180-8"><a href="#cb180-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">na.action =</span> na.exclude)</span>
<span id="cb180-9"><a href="#cb180-9" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(dbcSIM, <span class="st">"data/rds/dbcSIM.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>dbcSIM <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/dbcSIM.rds"</span>)</span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>dbcSIM</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:  glm(formula = TRIPS ~ ORIG_hexagon_id + DEST_hexagon_id + log(DISTANCE), 
    family = poisson(link = "log"), data = SIM_data_no_intra, 
    na.action = na.exclude)

Coefficients:
         (Intercept)  ORIG_hexagon_idH0002  ORIG_hexagon_idH0003  
           15.480762             -2.224681             -0.939515  
ORIG_hexagon_idH0004  ORIG_hexagon_idH0005  ORIG_hexagon_idH0006  
           -1.631638              1.232065             -1.604045  
ORIG_hexagon_idH0007  ORIG_hexagon_idH0008  ORIG_hexagon_idH0009  
           -0.913132             -0.133053              1.864573  
ORIG_hexagon_idH0010  ORIG_hexagon_idH0011  ORIG_hexagon_idH0012  
            0.303197              0.433146             -0.051441  
ORIG_hexagon_idH0013  ORIG_hexagon_idH0014  ORIG_hexagon_idH0015  
            0.242557              3.667757             -0.473377  
ORIG_hexagon_idH0016  ORIG_hexagon_idH0017  ORIG_hexagon_idH0018  
            2.816577             -0.210599             -0.093805  
ORIG_hexagon_idH0019  ORIG_hexagon_idH0020  ORIG_hexagon_idH0021  
            0.054708             -0.165578              0.646524  
ORIG_hexagon_idH0022  ORIG_hexagon_idH0023  ORIG_hexagon_idH0024  
            3.589622              3.701427              0.710486  
ORIG_hexagon_idH0025  ORIG_hexagon_idH0026  ORIG_hexagon_idH0027  
            0.169637              0.927144              3.588289  
ORIG_hexagon_idH0028  ORIG_hexagon_idH0029  ORIG_hexagon_idH0030  
            0.793930              1.698649              1.783807  
ORIG_hexagon_idH0031  ORIG_hexagon_idH0032  ORIG_hexagon_idH0033  
            0.681060              3.458109              4.370003  
ORIG_hexagon_idH0034  ORIG_hexagon_idH0035  ORIG_hexagon_idH0036  
           -0.565751              0.381986             -0.175717  
ORIG_hexagon_idH0037  ORIG_hexagon_idH0038  ORIG_hexagon_idH0039  
            0.712669              4.831479              2.052941  
ORIG_hexagon_idH0040  ORIG_hexagon_idH0041  ORIG_hexagon_idH0042  
           -0.787748              0.870238              0.161229  
ORIG_hexagon_idH0043  ORIG_hexagon_idH0044  ORIG_hexagon_idH0045  
           -0.287325              1.658921              0.999704  
ORIG_hexagon_idH0046  ORIG_hexagon_idH0047  ORIG_hexagon_idH0048  
            0.470330              0.143181              0.722016  
ORIG_hexagon_idH0049  ORIG_hexagon_idH0050  ORIG_hexagon_idH0051  
           -2.984871             -0.342372              3.613992  
ORIG_hexagon_idH0052  ORIG_hexagon_idH0053  ORIG_hexagon_idH0054  
           -1.154974              0.880768              1.445494  
ORIG_hexagon_idH0055  ORIG_hexagon_idH0056  ORIG_hexagon_idH0057  
            1.235115             -0.436479              0.788457  
ORIG_hexagon_idH0058  ORIG_hexagon_idH0059  ORIG_hexagon_idH0060  
            0.914815              1.708123              0.646479  
ORIG_hexagon_idH0061  ORIG_hexagon_idH0062  ORIG_hexagon_idH0063  
           -0.071242              1.168480              1.411646  
ORIG_hexagon_idH0064  ORIG_hexagon_idH0065  ORIG_hexagon_idH0066  
           -0.003432              5.548257              1.477672  
ORIG_hexagon_idH0067  ORIG_hexagon_idH0068  ORIG_hexagon_idH0069  
            2.253362             -1.107819              0.875214  
ORIG_hexagon_idH0070  ORIG_hexagon_idH0071  ORIG_hexagon_idH0072  
            0.707186              0.431402              1.501994  
ORIG_hexagon_idH0073  ORIG_hexagon_idH0074  ORIG_hexagon_idH0075  
            0.413765              0.044920              1.401637  
ORIG_hexagon_idH0076  ORIG_hexagon_idH0077  ORIG_hexagon_idH0079  
            4.701086              1.523340              1.656616  
ORIG_hexagon_idH0080  ORIG_hexagon_idH0081  ORIG_hexagon_idH0082  
            2.323897              4.682305              2.531682  
ORIG_hexagon_idH0084  ORIG_hexagon_idH0085  ORIG_hexagon_idH0086  
            0.203011             -1.398593              3.232982  
ORIG_hexagon_idH0087  ORIG_hexagon_idH0088  ORIG_hexagon_idH0089  
            3.707795             -0.931265              1.051847  
ORIG_hexagon_idH0090  ORIG_hexagon_idH0091  ORIG_hexagon_idH0092  
            0.347069              0.931129              2.649251  
ORIG_hexagon_idH0093  ORIG_hexagon_idH0094  ORIG_hexagon_idH0095  
            5.240554              1.835442              1.696937  
ORIG_hexagon_idH0096  ORIG_hexagon_idH0097  ORIG_hexagon_idH0098  
            0.150662             -0.704936              1.483413  
ORIG_hexagon_idH0099  ORIG_hexagon_idH0100  ORIG_hexagon_idH0101  
            1.136384              4.962818              5.534537  
ORIG_hexagon_idH0102  ORIG_hexagon_idH0103  ORIG_hexagon_idH0104  
            2.261231              0.246625              0.166157  
ORIG_hexagon_idH0105  ORIG_hexagon_idH0106  ORIG_hexagon_idH0107  
           -0.994008             -0.706768              1.781009  
ORIG_hexagon_idH0108  ORIG_hexagon_idH0109  ORIG_hexagon_idH0110  
            1.259709              4.861008              4.298021  
ORIG_hexagon_idH0111  ORIG_hexagon_idH0112  ORIG_hexagon_idH0114  
            0.775271              3.143778             -1.905158  
ORIG_hexagon_idH0115  ORIG_hexagon_idH0116  ORIG_hexagon_idH0117  
           -0.182769              1.310514              6.003497  
ORIG_hexagon_idH0118  ORIG_hexagon_idH0119  ORIG_hexagon_idH0120  
            4.520178             -0.197920              0.129178  
ORIG_hexagon_idH0121  ORIG_hexagon_idH0122  ORIG_hexagon_idH0123  
           -0.011345              3.352148              1.148137  
ORIG_hexagon_idH0124  ORIG_hexagon_idH0125  ORIG_hexagon_idH0126  
            0.963650              1.155591              4.268666  
ORIG_hexagon_idH0127  ORIG_hexagon_idH0128  ORIG_hexagon_idH0129  
            1.475589              0.764406             -1.008425  
ORIG_hexagon_idH0130  ORIG_hexagon_idH0131  ORIG_hexagon_idH0132  
           -0.262958              0.860156              1.685422  
ORIG_hexagon_idH0133  ORIG_hexagon_idH0134  ORIG_hexagon_idH0135  
            4.934216              1.985249              0.563115  
ORIG_hexagon_idH0136  ORIG_hexagon_idH0137  ORIG_hexagon_idH0138  
            4.408938              2.278512              3.739962  
ORIG_hexagon_idH0139  ORIG_hexagon_idH0140  ORIG_hexagon_idH0141  
            3.960545              5.133398              5.045080  
ORIG_hexagon_idH0142  ORIG_hexagon_idH0143  ORIG_hexagon_idH0144  
            2.179516              0.093920              4.967431  
ORIG_hexagon_idH0145  ORIG_hexagon_idH0146  ORIG_hexagon_idH0147  
            5.216385              3.924822              1.715077  
ORIG_hexagon_idH0148  ORIG_hexagon_idH0149  ORIG_hexagon_idH0150  
            3.911070              3.823339              4.933840  
ORIG_hexagon_idH0151  ORIG_hexagon_idH0152  ORIG_hexagon_idH0154  
            1.972137              1.768480              1.270289  
ORIG_hexagon_idH0156  ORIG_hexagon_idH0157  ORIG_hexagon_idH0158  
            2.196035              2.454308              4.524967  
ORIG_hexagon_idH0160  ORIG_hexagon_idH0161  ORIG_hexagon_idH0162  
            1.653639              3.707079              0.902475  
ORIG_hexagon_idH0163  ORIG_hexagon_idH0164  ORIG_hexagon_idH0165  
            5.020851              3.976666              6.033619  
ORIG_hexagon_idH0166  ORIG_hexagon_idH0167  ORIG_hexagon_idH0168  
            0.821385              1.070646              4.100850  
ORIG_hexagon_idH0169  ORIG_hexagon_idH0170  ORIG_hexagon_idH0171  
            3.842043              4.457172              5.269966  
ORIG_hexagon_idH0172  ORIG_hexagon_idH0173  ORIG_hexagon_idH0174  
            3.675254              0.119962              4.739017  
ORIG_hexagon_idH0175  ORIG_hexagon_idH0176  ORIG_hexagon_idH0177  
            4.726567              4.444746              5.352149  
ORIG_hexagon_idH0178  ORIG_hexagon_idH0179  ORIG_hexagon_idH0180  
            3.696417              5.416206              4.716992  
ORIG_hexagon_idH0181  ORIG_hexagon_idH0182  ORIG_hexagon_idH0183  
            2.599614              0.792239              2.400560  
ORIG_hexagon_idH0184  ORIG_hexagon_idH0185  ORIG_hexagon_idH0186  
            4.391365              4.786235              4.846994  
ORIG_hexagon_idH0187  ORIG_hexagon_idH0188  ORIG_hexagon_idH0189  
            5.055950              5.948935              5.149518  
ORIG_hexagon_idH0190  ORIG_hexagon_idH0191  ORIG_hexagon_idH0192  
            2.130281             -0.421362              3.855846  
ORIG_hexagon_idH0193  ORIG_hexagon_idH0194  ORIG_hexagon_idH0195  
            2.927633              4.179772              3.363418  
ORIG_hexagon_idH0196  ORIG_hexagon_idH0197  ORIG_hexagon_idH0198  
            4.340455              4.851603              4.416750  
ORIG_hexagon_idH0199  ORIG_hexagon_idH0200  ORIG_hexagon_idH0201  
            6.364423              2.629024              1.268394  
ORIG_hexagon_idH0202  ORIG_hexagon_idH0203  ORIG_hexagon_idH0204  
            3.063114              1.293916              2.602864  
ORIG_hexagon_idH0205  ORIG_hexagon_idH0206  ORIG_hexagon_idH0207  
            1.864779              4.523050              5.319025  
ORIG_hexagon_idH0208  ORIG_hexagon_idH0209  ORIG_hexagon_idH0210  
            5.186540              3.116885              3.270935  
ORIG_hexagon_idH0211  ORIG_hexagon_idH0212  ORIG_hexagon_idH0213  
            3.550914              0.749550              1.541778  
ORIG_hexagon_idH0214  ORIG_hexagon_idH0215  ORIG_hexagon_idH0216  
            1.149465              2.050164              3.557877  
ORIG_hexagon_idH0217  ORIG_hexagon_idH0218  ORIG_hexagon_idH0219  
            0.333941              4.759387              3.447298  
ORIG_hexagon_idH0220  ORIG_hexagon_idH0221  ORIG_hexagon_idH0222  
            4.921915              3.018222              2.590811  
ORIG_hexagon_idH0223  ORIG_hexagon_idH0224  ORIG_hexagon_idH0225  
            1.661969             -0.272742              2.053662  
ORIG_hexagon_idH0226  ORIG_hexagon_idH0227  ORIG_hexagon_idH0228  
            3.519475              3.550697              1.491809  
ORIG_hexagon_idH0229  ORIG_hexagon_idH0230  ORIG_hexagon_idH0231  
            2.972733              4.486502              4.809750  
ORIG_hexagon_idH0232  ORIG_hexagon_idH0233  ORIG_hexagon_idH0234  
            4.267288              0.773540              3.441752  
ORIG_hexagon_idH0235  ORIG_hexagon_idH0236  ORIG_hexagon_idH0237  
            2.442944              3.919313              4.798212  
ORIG_hexagon_idH0238  ORIG_hexagon_idH0239  ORIG_hexagon_idH0240  
            1.782729              2.195224              4.381588  
ORIG_hexagon_idH0241  ORIG_hexagon_idH0242  ORIG_hexagon_idH0243  
            1.952157              5.676070             -1.727873  
ORIG_hexagon_idH0244  ORIG_hexagon_idH0245  ORIG_hexagon_idH0246  
            5.818932              0.151980              2.334593  
ORIG_hexagon_idH0247  ORIG_hexagon_idH0248  ORIG_hexagon_idH0249  
            4.394683              5.256192              1.900792  
ORIG_hexagon_idH0250  ORIG_hexagon_idH0251  ORIG_hexagon_idH0252  
            3.138472              1.977060              4.240424  
ORIG_hexagon_idH0253  ORIG_hexagon_idH0254  ORIG_hexagon_idH0255  
            2.646376              4.826606              0.886125  
ORIG_hexagon_idH0256  ORIG_hexagon_idH0257  ORIG_hexagon_idH0258  
            0.835271             -3.609993              2.718449  
ORIG_hexagon_idH0259  ORIG_hexagon_idH0260  ORIG_hexagon_idH0262  
            4.112035              3.930423              3.615050  
ORIG_hexagon_idH0263  ORIG_hexagon_idH0264  ORIG_hexagon_idH0265  
            3.268019              1.951879              5.163839  
ORIG_hexagon_idH0266  ORIG_hexagon_idH0267  ORIG_hexagon_idH0268  
            5.030722              2.151154              6.780840  
ORIG_hexagon_idH0269  ORIG_hexagon_idH0270  ORIG_hexagon_idH0271  
            2.808248              3.042312              2.820841  
ORIG_hexagon_idH0272  ORIG_hexagon_idH0273  ORIG_hexagon_idH0274  
            2.303639              3.833956              3.556711  
ORIG_hexagon_idH0275  ORIG_hexagon_idH0276  ORIG_hexagon_idH0277  
            2.150748              5.276397              5.304013  
ORIG_hexagon_idH0278  ORIG_hexagon_idH0279  ORIG_hexagon_idH0280  
            2.184154              4.870845              5.701423  
ORIG_hexagon_idH0281  ORIG_hexagon_idH0282  ORIG_hexagon_idH0283  
            0.868373              0.772996              1.578422  
ORIG_hexagon_idH0284  ORIG_hexagon_idH0285  ORIG_hexagon_idH0286  
            2.333499              1.691386              3.569428  
ORIG_hexagon_idH0287  ORIG_hexagon_idH0288  ORIG_hexagon_idH0289  
            4.118478              5.736411              3.739886  
ORIG_hexagon_idH0290  ORIG_hexagon_idH0291  ORIG_hexagon_idH0292  
            4.841582              0.140162              2.222413  
ORIG_hexagon_idH0293  ORIG_hexagon_idH0294  ORIG_hexagon_idH0295  
            3.124197              3.826836              1.959864  
ORIG_hexagon_idH0296  ORIG_hexagon_idH0297  ORIG_hexagon_idH0298  
            3.118373              2.134956              4.468281  
ORIG_hexagon_idH0299  ORIG_hexagon_idH0300  ORIG_hexagon_idH0301  
            4.325697              3.690492              2.703788  
ORIG_hexagon_idH0302  ORIG_hexagon_idH0303  ORIG_hexagon_idH0304  
            3.724116              2.723418             -0.649437  
ORIG_hexagon_idH0305  ORIG_hexagon_idH0306  ORIG_hexagon_idH0307  
            4.235575              5.023099              3.015592  
ORIG_hexagon_idH0308  ORIG_hexagon_idH0309  ORIG_hexagon_idH0310  
            2.355549              2.406753              2.589381  
ORIG_hexagon_idH0311  ORIG_hexagon_idH0312  ORIG_hexagon_idH0313  
            4.137212             -1.775403              4.095447  
ORIG_hexagon_idH0314  ORIG_hexagon_idH0315  ORIG_hexagon_idH0316  
            2.484576              1.108374              0.746254  
ORIG_hexagon_idH0317  ORIG_hexagon_idH0318  ORIG_hexagon_idH0319  
            2.386577              4.392937              2.035325  
ORIG_hexagon_idH0320  ORIG_hexagon_idH0321  ORIG_hexagon_idH0322  
            3.401887              1.203663             -0.371129  
ORIG_hexagon_idH0323  ORIG_hexagon_idH0324  ORIG_hexagon_idH0325  
            1.902913              6.051199              3.488385  
ORIG_hexagon_idH0326  ORIG_hexagon_idH0327  ORIG_hexagon_idH0328  
            2.793338              1.424471              1.557407  
ORIG_hexagon_idH0329  ORIG_hexagon_idH0330  ORIG_hexagon_idH0331  
            2.712663              2.614813              4.504515  
ORIG_hexagon_idH0332  ORIG_hexagon_idH0333  ORIG_hexagon_idH0334  
            4.542909              3.817264              1.635621  
ORIG_hexagon_idH0335  ORIG_hexagon_idH0336  ORIG_hexagon_idH0337  
            0.848779              3.564780              3.555100  
ORIG_hexagon_idH0338  ORIG_hexagon_idH0339  ORIG_hexagon_idH0340  
            0.943830              2.481677              4.767036  
ORIG_hexagon_idH0341  ORIG_hexagon_idH0343  ORIG_hexagon_idH0344  
            3.680602              1.924473              3.369950  
ORIG_hexagon_idH0345  ORIG_hexagon_idH0346  ORIG_hexagon_idH0347  
            4.385861              5.340884              5.201897  
ORIG_hexagon_idH0348  ORIG_hexagon_idH0349  ORIG_hexagon_idH0350  
            2.420246             -1.862382              2.161075  
ORIG_hexagon_idH0351  ORIG_hexagon_idH0352  ORIG_hexagon_idH0353  
            2.852965              3.904198              3.201259  
ORIG_hexagon_idH0354  ORIG_hexagon_idH0355  ORIG_hexagon_idH0356  
            2.495307              1.432687              4.078726  
ORIG_hexagon_idH0357  ORIG_hexagon_idH0358  ORIG_hexagon_idH0360  
            4.072998              2.400060              2.917335  
ORIG_hexagon_idH0361  ORIG_hexagon_idH0362  ORIG_hexagon_idH0363  
            2.775640              3.663208              3.360251  
ORIG_hexagon_idH0364  ORIG_hexagon_idH0365  ORIG_hexagon_idH0366  
            0.698031              4.797553              1.333695  
ORIG_hexagon_idH0367  ORIG_hexagon_idH0368  ORIG_hexagon_idH0369  
            0.438447              3.944171              3.594007  
ORIG_hexagon_idH0370  ORIG_hexagon_idH0371  ORIG_hexagon_idH0372  
            3.275381              1.570635              2.525841  
ORIG_hexagon_idH0373  ORIG_hexagon_idH0374  ORIG_hexagon_idH0375  
           -1.599504              0.514911              2.317459  
ORIG_hexagon_idH0376  ORIG_hexagon_idH0377  ORIG_hexagon_idH0378  
            2.344858              2.199612              2.768315  
ORIG_hexagon_idH0379  ORIG_hexagon_idH0380  ORIG_hexagon_idH0381  
            3.443195              2.685219              3.705761  
ORIG_hexagon_idH0382  ORIG_hexagon_idH0383  ORIG_hexagon_idH0384  
            4.631673              2.617828              2.540315  
ORIG_hexagon_idH0385  ORIG_hexagon_idH0386  ORIG_hexagon_idH0387  
            3.133602              2.163966              1.960372  
ORIG_hexagon_idH0388  ORIG_hexagon_idH0389  ORIG_hexagon_idH0390  
            3.269828              1.476350             -0.961070  
ORIG_hexagon_idH0391  ORIG_hexagon_idH0392  ORIG_hexagon_idH0393  
            3.173276              4.769325              2.218513  
ORIG_hexagon_idH0394  ORIG_hexagon_idH0395  ORIG_hexagon_idH0396  
            4.375203              3.540413              4.239440  
ORIG_hexagon_idH0397  ORIG_hexagon_idH0398  ORIG_hexagon_idH0399  
            2.525467              0.703016             -0.687004  
ORIG_hexagon_idH0400  ORIG_hexagon_idH0401  ORIG_hexagon_idH0402  
            4.632139              2.148459              3.907610  
ORIG_hexagon_idH0403  ORIG_hexagon_idH0404  ORIG_hexagon_idH0405  
            4.144253              4.153941              3.541269  
ORIG_hexagon_idH0406  ORIG_hexagon_idH0407  ORIG_hexagon_idH0408  
            0.070818              3.409169             -0.380737  
ORIG_hexagon_idH0409  ORIG_hexagon_idH0410  ORIG_hexagon_idH0411  
            1.194220              2.800294              2.127713  
ORIG_hexagon_idH0412  ORIG_hexagon_idH0413  ORIG_hexagon_idH0415  
            5.016826              3.547741              1.761630  
ORIG_hexagon_idH0416  ORIG_hexagon_idH0417  ORIG_hexagon_idH0418  
            3.725106              3.556069              2.214716  
ORIG_hexagon_idH0419  ORIG_hexagon_idH0420  ORIG_hexagon_idH0421  
            2.476277              3.310406             -1.113409  
ORIG_hexagon_idH0422  ORIG_hexagon_idH0423  ORIG_hexagon_idH0424  
            2.622083              2.916668              2.480957  
ORIG_hexagon_idH0425  ORIG_hexagon_idH0426  ORIG_hexagon_idH0427  
           -0.149427              0.246310             -0.912792  
ORIG_hexagon_idH0428  ORIG_hexagon_idH0429  ORIG_hexagon_idH0430  
            4.958916              3.265645             -2.274196  
ORIG_hexagon_idH0431  ORIG_hexagon_idH0432  ORIG_hexagon_idH0433  
            3.407634              4.390898              2.812241  
ORIG_hexagon_idH0434  ORIG_hexagon_idH0435  ORIG_hexagon_idH0436  
            2.623011              2.800733              2.989365  
ORIG_hexagon_idH0437  ORIG_hexagon_idH0438  ORIG_hexagon_idH0439  
            2.468170              3.247898              2.373310  
ORIG_hexagon_idH0440  ORIG_hexagon_idH0441  ORIG_hexagon_idH0442  
            3.682985              3.977236              4.018758  
ORIG_hexagon_idH0443  ORIG_hexagon_idH0444  ORIG_hexagon_idH0445  
            5.167712              1.153577              2.238744  
ORIG_hexagon_idH0446  ORIG_hexagon_idH0447  ORIG_hexagon_idH0448  
            2.091172              3.230147              2.592430  
ORIG_hexagon_idH0449  ORIG_hexagon_idH0450  ORIG_hexagon_idH0451  
            1.856245              0.296028              2.327306  
ORIG_hexagon_idH0452  ORIG_hexagon_idH0453  ORIG_hexagon_idH0455  
            3.664852              3.106119              1.264971  
ORIG_hexagon_idH0456  ORIG_hexagon_idH0457  ORIG_hexagon_idH0458  
            5.378931              4.941766              4.351242  
ORIG_hexagon_idH0459  ORIG_hexagon_idH0460  ORIG_hexagon_idH0461  
            1.806393              2.833598              1.978577  
ORIG_hexagon_idH0462  ORIG_hexagon_idH0463  ORIG_hexagon_idH0464  
            2.740057              2.553778              2.331413  
ORIG_hexagon_idH0465  ORIG_hexagon_idH0466  ORIG_hexagon_idH0467  
            1.512526              3.235522              2.908415  
ORIG_hexagon_idH0468  ORIG_hexagon_idH0469  ORIG_hexagon_idH0470  
            4.054486              4.120506              3.033552  
ORIG_hexagon_idH0471  ORIG_hexagon_idH0472  ORIG_hexagon_idH0473  
            4.136808              4.514710              4.531618  
ORIG_hexagon_idH0474  ORIG_hexagon_idH0475  ORIG_hexagon_idH0476  
            4.593797              3.436422              2.351413  
ORIG_hexagon_idH0477  ORIG_hexagon_idH0478  ORIG_hexagon_idH0479  
            2.705682              3.590065              2.904882  
ORIG_hexagon_idH0480  ORIG_hexagon_idH0481  ORIG_hexagon_idH0482  
            2.388644              3.113090              3.235171  
ORIG_hexagon_idH0483  ORIG_hexagon_idH0484  ORIG_hexagon_idH0485  
            4.024904              3.491471              4.566518  
ORIG_hexagon_idH0486  ORIG_hexagon_idH0487  ORIG_hexagon_idH0488  
            5.436060              3.139358              3.186853  
ORIG_hexagon_idH0489  ORIG_hexagon_idH0490  ORIG_hexagon_idH0491  
            3.231755              1.911953              3.446429  
ORIG_hexagon_idH0492  ORIG_hexagon_idH0493  ORIG_hexagon_idH0494  
            3.846146              0.852341              4.047990  
ORIG_hexagon_idH0495  ORIG_hexagon_idH0496  ORIG_hexagon_idH0497  
            4.486057              5.105500              1.489965  
ORIG_hexagon_idH0498  ORIG_hexagon_idH0499  ORIG_hexagon_idH0500  
            4.414329              5.461526              4.473157  
ORIG_hexagon_idH0501  ORIG_hexagon_idH0502  ORIG_hexagon_idH0503  
            2.297651              2.638781              1.430610  
ORIG_hexagon_idH0504  ORIG_hexagon_idH0505  ORIG_hexagon_idH0506  
            2.824410              3.240300              4.044940  
ORIG_hexagon_idH0507  ORIG_hexagon_idH0508  ORIG_hexagon_idH0509  
            4.399713              3.855392              3.119423  
ORIG_hexagon_idH0510  ORIG_hexagon_idH0511  ORIG_hexagon_idH0512  
            1.679962              5.831067              5.319216  
ORIG_hexagon_idH0513  ORIG_hexagon_idH0514  ORIG_hexagon_idH0515  
            0.818667              1.858110              2.965970  
ORIG_hexagon_idH0516  ORIG_hexagon_idH0517  ORIG_hexagon_idH0518  
            3.940799              3.232978              4.733462  
ORIG_hexagon_idH0519  ORIG_hexagon_idH0520  ORIG_hexagon_idH0521  
            3.068649              3.297163              5.094278  
ORIG_hexagon_idH0522  ORIG_hexagon_idH0523  ORIG_hexagon_idH0524  
            2.412250              2.704322              5.263452  
ORIG_hexagon_idH0525  ORIG_hexagon_idH0526  ORIG_hexagon_idH0527  
            2.126392              2.253192              3.380588  
ORIG_hexagon_idH0528  ORIG_hexagon_idH0529  ORIG_hexagon_idH0530  
            3.589613              4.018627              4.230064  
ORIG_hexagon_idH0531  ORIG_hexagon_idH0532  ORIG_hexagon_idH0533  
            4.117904              4.414238              3.867969  
ORIG_hexagon_idH0534  ORIG_hexagon_idH0536  ORIG_hexagon_idH0537  
           -0.008486              1.225970              2.746323  
ORIG_hexagon_idH0538  ORIG_hexagon_idH0539  ORIG_hexagon_idH0540  
            2.985820              2.976676              4.225631  
ORIG_hexagon_idH0541  ORIG_hexagon_idH0542  ORIG_hexagon_idH0543  
            3.703248              2.232199              4.604799  
ORIG_hexagon_idH0544  ORIG_hexagon_idH0545  ORIG_hexagon_idH0546  
            3.133055              3.313204              3.305043  
ORIG_hexagon_idH0547  ORIG_hexagon_idH0548  ORIG_hexagon_idH0549  
            0.135639              0.417121              1.526945  
ORIG_hexagon_idH0550  ORIG_hexagon_idH0551  ORIG_hexagon_idH0552  
            2.884269              3.341994              3.897890  
ORIG_hexagon_idH0553  ORIG_hexagon_idH0554  ORIG_hexagon_idH0555  
            5.148086              2.143519              2.962065  
ORIG_hexagon_idH0556  ORIG_hexagon_idH0557  ORIG_hexagon_idH0558  
            3.833075              0.685243              0.951431  
ORIG_hexagon_idH0559  ORIG_hexagon_idH0560  ORIG_hexagon_idH0561  
            0.640362              1.786639              3.515282  
ORIG_hexagon_idH0562  ORIG_hexagon_idH0563  ORIG_hexagon_idH0564  
            4.330801              4.161070              1.250582  
ORIG_hexagon_idH0565  ORIG_hexagon_idH0566  ORIG_hexagon_idH0567  
            3.052103              2.173350              2.257840  
ORIG_hexagon_idH0568  ORIG_hexagon_idH0569  ORIG_hexagon_idH0570  
            2.003198              0.036413              0.820100  
ORIG_hexagon_idH0571  ORIG_hexagon_idH0572  ORIG_hexagon_idH0573  
           -2.142976              2.066366              0.735202  
ORIG_hexagon_idH0574  ORIG_hexagon_idH0575  ORIG_hexagon_idH0576  
            4.035505              2.231350              2.575755  
ORIG_hexagon_idH0577  ORIG_hexagon_idH0578  ORIG_hexagon_idH0579  
            3.236070              2.253986              1.068500  
ORIG_hexagon_idH0580  ORIG_hexagon_idH0581  ORIG_hexagon_idH0582  
            0.923233              4.125294              2.636344  
ORIG_hexagon_idH0583  ORIG_hexagon_idH0584  ORIG_hexagon_idH0585  
            3.291401              4.238395              2.743390  
ORIG_hexagon_idH0586  ORIG_hexagon_idH0587  ORIG_hexagon_idH0588  
            4.115220              3.611062              2.849833  
ORIG_hexagon_idH0589  ORIG_hexagon_idH0590  ORIG_hexagon_idH0591  
            4.923210              4.798952              1.245508  
ORIG_hexagon_idH0592  ORIG_hexagon_idH0593  ORIG_hexagon_idH0594  
            2.693796              4.005431              2.751954  
ORIG_hexagon_idH0595  ORIG_hexagon_idH0596  ORIG_hexagon_idH0597  
            4.182249              4.830254              3.238430  
ORIG_hexagon_idH0598  ORIG_hexagon_idH0599  ORIG_hexagon_idH0600  
            4.925972              3.877242              3.981133  
ORIG_hexagon_idH0601  ORIG_hexagon_idH0602  ORIG_hexagon_idH0603  
            0.372584              1.493352              3.909755  
ORIG_hexagon_idH0604  ORIG_hexagon_idH0605  ORIG_hexagon_idH0606  
            1.691688              3.210593              3.037804  
ORIG_hexagon_idH0607  ORIG_hexagon_idH0608  ORIG_hexagon_idH0609  
            3.456474              4.065339              4.792898  
ORIG_hexagon_idH0610  ORIG_hexagon_idH0611  ORIG_hexagon_idH0612  
            4.873711             -1.137691              4.119636  
ORIG_hexagon_idH0613  ORIG_hexagon_idH0614  ORIG_hexagon_idH0615  
            2.837030              3.814586              3.945570  
ORIG_hexagon_idH0616  ORIG_hexagon_idH0617  ORIG_hexagon_idH0618  
            4.833507              5.492877              5.091807  
ORIG_hexagon_idH0619  ORIG_hexagon_idH0620  ORIG_hexagon_idH0621  
            3.225466              3.675839              3.537399  
ORIG_hexagon_idH0622  ORIG_hexagon_idH0623  ORIG_hexagon_idH0624  
            3.138121              2.719013              2.309158  
ORIG_hexagon_idH0625  ORIG_hexagon_idH0626  ORIG_hexagon_idH0627  
            3.712864              4.518078              4.109709  
ORIG_hexagon_idH0628  ORIG_hexagon_idH0629  ORIG_hexagon_idH0630  
            3.655854              3.549052              4.062487  
ORIG_hexagon_idH0631  ORIG_hexagon_idH0632  ORIG_hexagon_idH0633  
            3.155176              4.413770              4.244418  
ORIG_hexagon_idH0634  ORIG_hexagon_idH0635  ORIG_hexagon_idH0636  
            4.848405              2.472315              5.076220  
ORIG_hexagon_idH0638  ORIG_hexagon_idH0639  ORIG_hexagon_idH0640  
            3.839073              3.701449              3.211964  
ORIG_hexagon_idH0641  ORIG_hexagon_idH0642  ORIG_hexagon_idH0643  
            1.329785              3.819929              4.531578  
ORIG_hexagon_idH0644  ORIG_hexagon_idH0645  ORIG_hexagon_idH0646  
            4.240252              4.671383              6.329907  
ORIG_hexagon_idH0647  ORIG_hexagon_idH0648  ORIG_hexagon_idH0649  
            2.621995              3.561137              2.685900  
ORIG_hexagon_idH0650  ORIG_hexagon_idH0651  ORIG_hexagon_idH0652  
            2.014352              4.553453              4.925956  
ORIG_hexagon_idH0653  ORIG_hexagon_idH0654  ORIG_hexagon_idH0655  
            4.405873              4.397564              2.802644  
ORIG_hexagon_idH0657  ORIG_hexagon_idH0658  ORIG_hexagon_idH0659  
            3.431299              3.356154              2.252150  
ORIG_hexagon_idH0660  ORIG_hexagon_idH0661  ORIG_hexagon_idH0662  
            1.042592              4.252677              3.916688  
ORIG_hexagon_idH0663  ORIG_hexagon_idH0664  ORIG_hexagon_idH0665  
            5.112691              5.168244              5.333557  
ORIG_hexagon_idH0666  ORIG_hexagon_idH0667  ORIG_hexagon_idH0668  
            4.081099              3.383398              3.381689  
ORIG_hexagon_idH0669  ORIG_hexagon_idH0670  ORIG_hexagon_idH0671  
            1.418689              1.145535              0.716579  
ORIG_hexagon_idH0672  ORIG_hexagon_idH0673  ORIG_hexagon_idH0674  
            4.782235              4.757032              4.783441  
ORIG_hexagon_idH0675  ORIG_hexagon_idH0676  ORIG_hexagon_idH0677  
            3.817172              3.238895              3.121294  
ORIG_hexagon_idH0678  ORIG_hexagon_idH0679  ORIG_hexagon_idH0680  
            4.286694              4.078865              4.827169  
ORIG_hexagon_idH0681  ORIG_hexagon_idH0682  ORIG_hexagon_idH0683  
            4.618348              5.135603              2.414308  
ORIG_hexagon_idH0684  ORIG_hexagon_idH0685  ORIG_hexagon_idH0686  
            3.904093              3.351093              3.687085  
ORIG_hexagon_idH0687  ORIG_hexagon_idH0688  ORIG_hexagon_idH0689  
            2.987786              0.323753              4.245717  
ORIG_hexagon_idH0690  ORIG_hexagon_idH0691  ORIG_hexagon_idH0692  
            5.905657              1.813652              5.867561  
ORIG_hexagon_idH0693  ORIG_hexagon_idH0694  ORIG_hexagon_idH0695  
            3.730207              3.989979              4.267510  
ORIG_hexagon_idH0696  ORIG_hexagon_idH0697  ORIG_hexagon_idH0698  
            2.019894              5.412154              4.860322  
ORIG_hexagon_idH0700  ORIG_hexagon_idH0701  ORIG_hexagon_idH0702  
            3.939328              2.301536              4.394331  
ORIG_hexagon_idH0703  ORIG_hexagon_idH0704  ORIG_hexagon_idH0705  
            3.974053              0.328558              4.711077  
ORIG_hexagon_idH0706  ORIG_hexagon_idH0707  ORIG_hexagon_idH0708  
            5.205136              4.065657              2.365307  
ORIG_hexagon_idH0709  ORIG_hexagon_idH0710  ORIG_hexagon_idH0711  
            3.054829             -1.247930              0.584810  
ORIG_hexagon_idH0712  ORIG_hexagon_idH0714  ORIG_hexagon_idH0715  
            4.282496              2.687182              4.070945  
ORIG_hexagon_idH0716  ORIG_hexagon_idH0717  ORIG_hexagon_idH0718  
            3.954619              1.796714              4.425515  
ORIG_hexagon_idH0719  ORIG_hexagon_idH0720  ORIG_hexagon_idH0721  
            3.464922              4.066713              4.653730  
ORIG_hexagon_idH0722  ORIG_hexagon_idH0724  ORIG_hexagon_idH0725  
            0.397888              3.025038              5.003246  
ORIG_hexagon_idH0726  ORIG_hexagon_idH0727  ORIG_hexagon_idH0728  
            3.425941              4.417937             -0.548586  
ORIG_hexagon_idH0729  ORIG_hexagon_idH0730  ORIG_hexagon_idH0731  
            3.340399              1.620772              4.053157  
ORIG_hexagon_idH0732  ORIG_hexagon_idH0733  ORIG_hexagon_idH0734  
            3.148065              4.363414              3.132889  
ORIG_hexagon_idH0735  ORIG_hexagon_idH0736  ORIG_hexagon_idH0737  
            3.813180              3.626821              4.190435  
ORIG_hexagon_idH0738  ORIG_hexagon_idH0739  ORIG_hexagon_idH0740  
            3.787028              4.458947              4.333179  
ORIG_hexagon_idH0741  ORIG_hexagon_idH0742  ORIG_hexagon_idH0743  
            2.884791              2.293267              4.025541  
ORIG_hexagon_idH0744  ORIG_hexagon_idH0745  ORIG_hexagon_idH0746  
            4.443959              3.760746              3.791168  
ORIG_hexagon_idH0747  ORIG_hexagon_idH0748  ORIG_hexagon_idH0749  
            2.402378              4.700056              3.348394  
ORIG_hexagon_idH0750  ORIG_hexagon_idH0751  ORIG_hexagon_idH0752  
            4.060432             -0.492497              4.004797  
ORIG_hexagon_idH0753  ORIG_hexagon_idH0754  ORIG_hexagon_idH0755  
            3.819277              4.044413              3.058690  
ORIG_hexagon_idH0756  ORIG_hexagon_idH0757  ORIG_hexagon_idH0758  
            4.059387              2.526280              2.083375  
ORIG_hexagon_idH0759  ORIG_hexagon_idH0760  ORIG_hexagon_idH0761  
            5.253030              3.634456              3.906937  
ORIG_hexagon_idH0762  ORIG_hexagon_idH0763  ORIG_hexagon_idH0764  
            2.925308              4.318808              2.970445  
ORIG_hexagon_idH0765  ORIG_hexagon_idH0766  ORIG_hexagon_idH0767  
            3.669301              3.377762              4.931142  
ORIG_hexagon_idH0768  ORIG_hexagon_idH0769  ORIG_hexagon_idH0770  
            0.260392              0.803192              1.275450  
ORIG_hexagon_idH0771  ORIG_hexagon_idH0772  ORIG_hexagon_idH0773  
            2.348357              3.664054              3.724251  
ORIG_hexagon_idH0774  ORIG_hexagon_idH0775  ORIG_hexagon_idH0776  
            3.176260              0.667432              2.206967  
ORIG_hexagon_idH0777  ORIG_hexagon_idH0778  ORIG_hexagon_idH0779  
            1.551824              4.156999              4.526746  
ORIG_hexagon_idH0780  ORIG_hexagon_idH0781  ORIG_hexagon_idH0782  
            3.484239              3.055683              1.589227  
ORIG_hexagon_idH0783  ORIG_hexagon_idH0784  ORIG_hexagon_idH0785  
            4.068629              4.541414              4.718203  
ORIG_hexagon_idH0786  ORIG_hexagon_idH0787  ORIG_hexagon_idH0788  
            4.024779              3.058650              3.220199  
ORIG_hexagon_idH0789  ORIG_hexagon_idH0790  ORIG_hexagon_idH0791  
            3.676220              4.002498              2.528852  
ORIG_hexagon_idH0792  ORIG_hexagon_idH0793  ORIG_hexagon_idH0794  
            2.431465              3.393572              3.845920  
ORIG_hexagon_idH0795  ORIG_hexagon_idH0796  ORIG_hexagon_idH0797  
            3.226653              0.296612              0.346862  
ORIG_hexagon_idH0798  ORIG_hexagon_idH0799  ORIG_hexagon_idH0800  
            1.077127              3.548167              2.505752  
ORIG_hexagon_idH0801  ORIG_hexagon_idH0802  ORIG_hexagon_idH0803  
            0.776603              2.040336              2.287142  
ORIG_hexagon_idH0804  ORIG_hexagon_idH0805  ORIG_hexagon_idH0806  
            2.247649              0.153352             -0.370402  
ORIG_hexagon_idH0807  ORIG_hexagon_idH0808  ORIG_hexagon_idH0809  
            2.049997              1.336913              1.160565  
ORIG_hexagon_idH0810  ORIG_hexagon_idH0811  ORIG_hexagon_idH0812  
            1.967975              3.336483              1.204986  
ORIG_hexagon_idH0813  ORIG_hexagon_idH0814  ORIG_hexagon_idH0815  
           -0.572454              3.936938              0.054053  
ORIG_hexagon_idH0816  ORIG_hexagon_idH0817  ORIG_hexagon_idH0818  
            1.567672              2.024835              2.749145  
ORIG_hexagon_idH0819  ORIG_hexagon_idH0820  ORIG_hexagon_idH0821  
            2.642111              3.597473              3.206438  
ORIG_hexagon_idH0822  ORIG_hexagon_idH0823  ORIG_hexagon_idH0824  
            1.917992              2.545382             -0.728995  
ORIG_hexagon_idH0825  ORIG_hexagon_idH0826  ORIG_hexagon_idH0827  
            2.751549              1.971967              1.669405  
ORIG_hexagon_idH0828  ORIG_hexagon_idH0829  ORIG_hexagon_idH0830  
            0.297500              1.184531              2.718838  
ORIG_hexagon_idH0831  DEST_hexagon_idH0002  DEST_hexagon_idH0003  
            2.888440              1.349637              0.129352  
DEST_hexagon_idH0004  DEST_hexagon_idH0005  DEST_hexagon_idH0006  
           -0.415062              0.235949             -0.200877  
DEST_hexagon_idH0007  DEST_hexagon_idH0008  DEST_hexagon_idH0009  
            0.263911             -3.345805             -0.320331  
DEST_hexagon_idH0010  DEST_hexagon_idH0011  DEST_hexagon_idH0012  
           -1.154933             -3.331379             -0.876637  
DEST_hexagon_idH0013  DEST_hexagon_idH0014  DEST_hexagon_idH0015  
           -3.315072              0.956585             -2.553624  
DEST_hexagon_idH0016  DEST_hexagon_idH0017  DEST_hexagon_idH0018  
            1.091964             -4.454503             -0.912059  
DEST_hexagon_idH0019  DEST_hexagon_idH0020  DEST_hexagon_idH0021  
           -1.390399             -0.598322             -1.056203  
DEST_hexagon_idH0022  DEST_hexagon_idH0023  DEST_hexagon_idH0024  
           -0.929048             -0.588876             -0.658606  
DEST_hexagon_idH0025  DEST_hexagon_idH0026  DEST_hexagon_idH0027  
            0.433666             -0.284832             -2.459149  
DEST_hexagon_idH0028  DEST_hexagon_idH0029  DEST_hexagon_idH0030  
           -1.783004             -1.740387             -1.882034  
DEST_hexagon_idH0031  DEST_hexagon_idH0032  DEST_hexagon_idH0033  
           -1.314779             -0.777450             -2.300962  
DEST_hexagon_idH0034  DEST_hexagon_idH0035  DEST_hexagon_idH0036  
           -2.756174             -1.253910             -3.633272  
DEST_hexagon_idH0037  DEST_hexagon_idH0038  DEST_hexagon_idH0039  
           -0.632289             -0.855688             -0.514823  
DEST_hexagon_idH0040  DEST_hexagon_idH0041  DEST_hexagon_idH0042  
           -2.820130             -1.919964             -2.066064  
DEST_hexagon_idH0043  DEST_hexagon_idH0044  DEST_hexagon_idH0045  
            0.226220             -1.805192             -0.701757  
DEST_hexagon_idH0046  DEST_hexagon_idH0047  DEST_hexagon_idH0048  
            0.275324             -1.252607             -0.908398  
DEST_hexagon_idH0049  DEST_hexagon_idH0050  DEST_hexagon_idH0051  
           -3.941461             -0.977937             -1.497337  
DEST_hexagon_idH0052  DEST_hexagon_idH0053  DEST_hexagon_idH0054  
            0.258762             -1.814567             -0.744192  
DEST_hexagon_idH0055  DEST_hexagon_idH0056  DEST_hexagon_idH0057  
            1.050968             -0.202352             -0.736994  
DEST_hexagon_idH0058  DEST_hexagon_idH0059  DEST_hexagon_idH0060  
           -0.858209             -0.760413              0.171065  
DEST_hexagon_idH0061  DEST_hexagon_idH0062  DEST_hexagon_idH0063  
           -1.026530             -1.992316             -0.015750  
DEST_hexagon_idH0064  DEST_hexagon_idH0065  DEST_hexagon_idH0066  
           -0.384456              0.045940             -0.285718  
DEST_hexagon_idH0067  DEST_hexagon_idH0068  DEST_hexagon_idH0069  
            0.900067             -1.845894             -1.484161  
DEST_hexagon_idH0070  DEST_hexagon_idH0071  DEST_hexagon_idH0072  
           -3.856524             -1.254465             -1.698289  
DEST_hexagon_idH0073  DEST_hexagon_idH0074  DEST_hexagon_idH0075  
           -0.781485             -1.712251             -1.971114  
DEST_hexagon_idH0076  DEST_hexagon_idH0077  DEST_hexagon_idH0079  
           -1.378524             -1.765407             -0.939211  
DEST_hexagon_idH0080  DEST_hexagon_idH0081  DEST_hexagon_idH0082  
           -1.835551             -1.409983             -1.310345  
DEST_hexagon_idH0084  DEST_hexagon_idH0085  DEST_hexagon_idH0086  
           -0.948094             -3.003021             -1.009754  
DEST_hexagon_idH0087  DEST_hexagon_idH0088  DEST_hexagon_idH0089  
           -3.296649             -3.963164             -2.096820  
DEST_hexagon_idH0090  DEST_hexagon_idH0091  DEST_hexagon_idH0092  
           -0.504379             -0.757037             -1.476813  
DEST_hexagon_idH0093  DEST_hexagon_idH0094  DEST_hexagon_idH0095  
           -1.592829             -0.567917             -1.067794  
DEST_hexagon_idH0096  DEST_hexagon_idH0097  DEST_hexagon_idH0098  
           -2.331878             -1.302440              1.070694  
DEST_hexagon_idH0099  DEST_hexagon_idH0100  DEST_hexagon_idH0101  
           -1.332867             -0.051951             -1.443814  
DEST_hexagon_idH0102  DEST_hexagon_idH0103  DEST_hexagon_idH0104  
           -1.909226             -2.661697             -3.009299  
DEST_hexagon_idH0105  DEST_hexagon_idH0106  DEST_hexagon_idH0107  
           -6.546996             -0.627650             -0.164178  
DEST_hexagon_idH0108  DEST_hexagon_idH0109  DEST_hexagon_idH0110  
           -2.071694             -2.089377             -0.882467  
DEST_hexagon_idH0111  DEST_hexagon_idH0112  DEST_hexagon_idH0113  
           -3.422516             -0.777879             -3.093622  
DEST_hexagon_idH0114  DEST_hexagon_idH0115  DEST_hexagon_idH0116  
           -1.433038              0.196602             -1.755553  
DEST_hexagon_idH0117  DEST_hexagon_idH0118  DEST_hexagon_idH0119  
            0.952183             -1.746300             -5.447236  
DEST_hexagon_idH0120  DEST_hexagon_idH0121  DEST_hexagon_idH0122  
           -3.589786             -5.195343             -1.764842  
DEST_hexagon_idH0123  DEST_hexagon_idH0124  DEST_hexagon_idH0125  
           -1.944766             -0.792462             -1.001854  
DEST_hexagon_idH0126  DEST_hexagon_idH0127  DEST_hexagon_idH0128  
           -1.585858             -2.106021             -3.045676  
DEST_hexagon_idH0129  DEST_hexagon_idH0130  DEST_hexagon_idH0131  
           -2.372821             -1.737185             -1.103850  
DEST_hexagon_idH0132  DEST_hexagon_idH0133  DEST_hexagon_idH0134  
           -2.359361             -1.629008             -1.648204  
DEST_hexagon_idH0135  DEST_hexagon_idH0136  DEST_hexagon_idH0137  
           -1.747761             -1.616061             -0.352577  
DEST_hexagon_idH0138  DEST_hexagon_idH0139  DEST_hexagon_idH0140  
           -1.013582             -1.346675             -0.757356  
DEST_hexagon_idH0141  DEST_hexagon_idH0142  DEST_hexagon_idH0143  
           -1.375880             -0.285093             -2.242763  
DEST_hexagon_idH0144  DEST_hexagon_idH0145  DEST_hexagon_idH0146  
           -0.739524              0.674269             -3.046522  
DEST_hexagon_idH0147  DEST_hexagon_idH0148  DEST_hexagon_idH0149  
           -0.902976             -1.285659             -3.583399  
DEST_hexagon_idH0150  DEST_hexagon_idH0151  DEST_hexagon_idH0152  
           -1.096469             -1.892031             -2.171952  
DEST_hexagon_idH0154  DEST_hexagon_idH0156  DEST_hexagon_idH0157  
           -4.209172             -0.283357             -3.806661  
DEST_hexagon_idH0158  DEST_hexagon_idH0160  DEST_hexagon_idH0161  
           -1.052505             -0.004700             -1.910256  
DEST_hexagon_idH0162  DEST_hexagon_idH0163  DEST_hexagon_idH0164  
           -3.591889             -0.426619             -1.982840  
DEST_hexagon_idH0165  DEST_hexagon_idH0166  DEST_hexagon_idH0167  
           -1.644213             -2.583873             -3.269769  
DEST_hexagon_idH0168  DEST_hexagon_idH0169  DEST_hexagon_idH0170  
           -1.475374             -1.420813             -1.939797  
DEST_hexagon_idH0171  DEST_hexagon_idH0172  DEST_hexagon_idH0173  
           -3.395522             -3.768821             -1.286195  
DEST_hexagon_idH0174  DEST_hexagon_idH0175  DEST_hexagon_idH0176  
           -0.801013              0.296061             -1.652659  
DEST_hexagon_idH0177  DEST_hexagon_idH0178  DEST_hexagon_idH0179  
           -1.595445             -3.314927             -1.838690  
DEST_hexagon_idH0180  DEST_hexagon_idH0181  DEST_hexagon_idH0182  
           -2.269850             -1.577251             -0.930229  
DEST_hexagon_idH0183  DEST_hexagon_idH0184  DEST_hexagon_idH0185  
           -1.310854             -1.562524             -1.380302  
DEST_hexagon_idH0186  DEST_hexagon_idH0187  DEST_hexagon_idH0188  
           -1.987123             -3.235691              0.134999  
DEST_hexagon_idH0189  DEST_hexagon_idH0190  DEST_hexagon_idH0191  
           -0.248319             -2.081928             -1.287783  
DEST_hexagon_idH0192  DEST_hexagon_idH0193  DEST_hexagon_idH0194  
           -1.289723             -0.490710             -1.756038  
DEST_hexagon_idH0195  DEST_hexagon_idH0196  DEST_hexagon_idH0197  
           -2.497872             -1.738554             -2.107184  
DEST_hexagon_idH0198  DEST_hexagon_idH0199  DEST_hexagon_idH0200  
           -2.372600             -1.159553             -1.385392  
DEST_hexagon_idH0201  DEST_hexagon_idH0202  DEST_hexagon_idH0203  
           -2.333392             -3.003555             -0.592142  
DEST_hexagon_idH0204  DEST_hexagon_idH0205  DEST_hexagon_idH0206  
            0.003515             -0.375904              0.391690  
DEST_hexagon_idH0207  DEST_hexagon_idH0208  DEST_hexagon_idH0209  
           -0.034135             -0.103855             -1.622527  
DEST_hexagon_idH0210  DEST_hexagon_idH0211  DEST_hexagon_idH0212  
           -2.107410             -3.462896             -2.906435  
DEST_hexagon_idH0213  DEST_hexagon_idH0214  DEST_hexagon_idH0215  
           -2.608039             -1.758954             -1.222441  
DEST_hexagon_idH0216  DEST_hexagon_idH0217  DEST_hexagon_idH0218  
           -2.558007             -1.958562             -0.897561  
DEST_hexagon_idH0219  DEST_hexagon_idH0220  DEST_hexagon_idH0221  
           -2.518259             -1.271038             -2.944912  
DEST_hexagon_idH0222  DEST_hexagon_idH0223  DEST_hexagon_idH0224  
           -1.719828             -3.929612             -3.917199  
DEST_hexagon_idH0225  DEST_hexagon_idH0226  DEST_hexagon_idH0227  
           -1.769901             -0.419510             -1.406357  
DEST_hexagon_idH0228  DEST_hexagon_idH0229  DEST_hexagon_idH0230  
           -2.402325             -0.124409             -1.816578  
DEST_hexagon_idH0231  DEST_hexagon_idH0232  DEST_hexagon_idH0233  
           -1.852385             -0.462964             -4.873239  
DEST_hexagon_idH0234  DEST_hexagon_idH0235  DEST_hexagon_idH0236  
           -3.001604             -2.351700             -1.436956  
DEST_hexagon_idH0237  DEST_hexagon_idH0238  DEST_hexagon_idH0239  
           -0.251778             -1.774416             -3.556106  
DEST_hexagon_idH0240  DEST_hexagon_idH0241  DEST_hexagon_idH0242  
           -1.413723             -1.905764              0.199101  
DEST_hexagon_idH0243  DEST_hexagon_idH0244  DEST_hexagon_idH0245  
           -6.012494              0.505356             -3.446859  
DEST_hexagon_idH0246  DEST_hexagon_idH0247  DEST_hexagon_idH0248  
           -2.021089             -0.077891              0.727524  
DEST_hexagon_idH0249  DEST_hexagon_idH0250  DEST_hexagon_idH0251  
           -0.896639             -1.358167             -3.349102  
DEST_hexagon_idH0252  DEST_hexagon_idH0253  DEST_hexagon_idH0254  
           -0.476148             -2.483856             -2.304615  
DEST_hexagon_idH0255  DEST_hexagon_idH0256  DEST_hexagon_idH0257  
           -2.108282             -2.394101             -0.218108  
DEST_hexagon_idH0258  DEST_hexagon_idH0259  DEST_hexagon_idH0260  
           -0.691190             -0.670416             -1.450669  
DEST_hexagon_idH0262  DEST_hexagon_idH0263  DEST_hexagon_idH0264  
           -1.870059             -3.116014             -2.570174  
DEST_hexagon_idH0265  DEST_hexagon_idH0266  DEST_hexagon_idH0267  
           -2.080101             -2.458609             -2.962355  
DEST_hexagon_idH0269  DEST_hexagon_idH0270  DEST_hexagon_idH0271  
           -0.590758             -0.481466             -2.158094  
DEST_hexagon_idH0272  DEST_hexagon_idH0273  DEST_hexagon_idH0274  
           -2.131213             -1.467662             -2.088248  
DEST_hexagon_idH0275  DEST_hexagon_idH0276  DEST_hexagon_idH0277  
           -1.953252             -1.486882             -2.572227  
DEST_hexagon_idH0278  DEST_hexagon_idH0279  DEST_hexagon_idH0280  
           -1.622711             -0.125323             -1.363477  
DEST_hexagon_idH0281  DEST_hexagon_idH0282  DEST_hexagon_idH0283  
           -1.167813              0.329539             -1.090477  
DEST_hexagon_idH0284  DEST_hexagon_idH0285  DEST_hexagon_idH0286  
           -2.712556              0.005850              0.022245  
DEST_hexagon_idH0287  DEST_hexagon_idH0288  DEST_hexagon_idH0289  
           -2.410089             -1.429753             -2.455023  
DEST_hexagon_idH0290  DEST_hexagon_idH0291  DEST_hexagon_idH0292  
           -1.576307             -5.746945             -0.521474  
DEST_hexagon_idH0293  DEST_hexagon_idH0294  DEST_hexagon_idH0295  
           -0.011418             -0.182230              0.258692  
DEST_hexagon_idH0296  DEST_hexagon_idH0297  DEST_hexagon_idH0298  
           -1.092529             -0.855612             -1.595276  
DEST_hexagon_idH0299  DEST_hexagon_idH0300  DEST_hexagon_idH0301  
           -1.362413              0.321877             -0.052772  
DEST_hexagon_idH0302  DEST_hexagon_idH0303  DEST_hexagon_idH0304  
           -1.244858             -1.793158             -4.232743  
DEST_hexagon_idH0305  DEST_hexagon_idH0306  DEST_hexagon_idH0307  
           -0.640360             -0.115170             -1.803176  
DEST_hexagon_idH0308  DEST_hexagon_idH0309  DEST_hexagon_idH0310  
           -0.190752             -0.957228             -1.793640  
DEST_hexagon_idH0311  DEST_hexagon_idH0312  DEST_hexagon_idH0313  
           -0.669268             -2.512365             -1.429489  
DEST_hexagon_idH0314  DEST_hexagon_idH0315  DEST_hexagon_idH0316  
           -1.121637             -3.313730             -0.896665  
DEST_hexagon_idH0317  DEST_hexagon_idH0318  DEST_hexagon_idH0319  
           -0.606023              0.026812             -2.704988  
DEST_hexagon_idH0320  DEST_hexagon_idH0321  DEST_hexagon_idH0322  
           -1.327826              0.580851             -4.486730  
DEST_hexagon_idH0323  DEST_hexagon_idH0324  DEST_hexagon_idH0325  
           -1.186868              1.018463             -2.881829  
DEST_hexagon_idH0326  DEST_hexagon_idH0327  DEST_hexagon_idH0328  
           -0.885500             -0.312350             -2.115933  
DEST_hexagon_idH0329  DEST_hexagon_idH0330  DEST_hexagon_idH0331  
           -1.702835             -2.296653             -1.992951  
DEST_hexagon_idH0332  DEST_hexagon_idH0333  DEST_hexagon_idH0334  
           -1.340730              0.424643              0.442126  
DEST_hexagon_idH0335  DEST_hexagon_idH0336  DEST_hexagon_idH0337  
           -1.995702             -1.159958             -1.214423  
DEST_hexagon_idH0338  DEST_hexagon_idH0339  DEST_hexagon_idH0340  
           -2.362591             -2.405835             -1.987936  
DEST_hexagon_idH0341  DEST_hexagon_idH0343  DEST_hexagon_idH0344  
           -1.290375             -1.523555             -1.416070  
DEST_hexagon_idH0345  DEST_hexagon_idH0346  DEST_hexagon_idH0347  
            0.056833             -1.030135              0.263243  
DEST_hexagon_idH0348  DEST_hexagon_idH0349  DEST_hexagon_idH0350  
           -0.290709             -2.593072              0.645799  
DEST_hexagon_idH0351  DEST_hexagon_idH0352  DEST_hexagon_idH0353  
           -0.372019             -0.389101             -1.610957  
DEST_hexagon_idH0354  DEST_hexagon_idH0355  DEST_hexagon_idH0356  
           -0.106200             -2.402309             -1.100008  
DEST_hexagon_idH0357  DEST_hexagon_idH0358  DEST_hexagon_idH0360  
           -0.920966             -0.347110             -0.701875  
DEST_hexagon_idH0361  DEST_hexagon_idH0362  DEST_hexagon_idH0363  
           -1.015017             -1.040769             -1.335281  
DEST_hexagon_idH0364  DEST_hexagon_idH0365  DEST_hexagon_idH0366  
           -5.690561             -1.989393             -1.553036  
DEST_hexagon_idH0367  DEST_hexagon_idH0368  DEST_hexagon_idH0369  
           -0.845543             -0.522788              0.049017  
DEST_hexagon_idH0370  DEST_hexagon_idH0371  DEST_hexagon_idH0372  
           -1.246578             -1.680590             -1.113300  
DEST_hexagon_idH0373  DEST_hexagon_idH0374  DEST_hexagon_idH0375  
           -3.642381             -1.781342             -1.157742  
DEST_hexagon_idH0376  DEST_hexagon_idH0377  DEST_hexagon_idH0378  
           -1.240033             -1.883104             -1.426785  
DEST_hexagon_idH0379  DEST_hexagon_idH0380  DEST_hexagon_idH0381  
           -0.324870             -1.392516             -2.250226  
DEST_hexagon_idH0382  DEST_hexagon_idH0383  DEST_hexagon_idH0384  
           -0.759698              0.097723             -2.076555  
DEST_hexagon_idH0385  DEST_hexagon_idH0386  DEST_hexagon_idH0387  
            0.197654             -0.734741             -0.750903  
DEST_hexagon_idH0388  DEST_hexagon_idH0389  DEST_hexagon_idH0390  
           -0.682691             -2.065209             -5.834551  
DEST_hexagon_idH0391  DEST_hexagon_idH0392  DEST_hexagon_idH0393  
           -0.842199             -0.628366             -1.000577  
DEST_hexagon_idH0394  DEST_hexagon_idH0395  DEST_hexagon_idH0396  
            0.665929              0.210816             -0.060062  
DEST_hexagon_idH0397  DEST_hexagon_idH0398  DEST_hexagon_idH0399  
           -1.040985             -3.503529             -4.874186  
DEST_hexagon_idH0400  DEST_hexagon_idH0401  DEST_hexagon_idH0402  
           -0.858933             -3.159503             -1.294784  
DEST_hexagon_idH0403  DEST_hexagon_idH0404  DEST_hexagon_idH0405  
           -1.673300             -0.459001             -0.278912  
DEST_hexagon_idH0406  DEST_hexagon_idH0407  DEST_hexagon_idH0408  
           -1.760387             -0.433814             -5.629147  
DEST_hexagon_idH0409  DEST_hexagon_idH0410  DEST_hexagon_idH0411  
           -2.822382             -2.840374             -3.005087  
DEST_hexagon_idH0412  DEST_hexagon_idH0413  DEST_hexagon_idH0414  
           -0.109757             -2.238016             -0.227104  
DEST_hexagon_idH0415  DEST_hexagon_idH0416  DEST_hexagon_idH0417  
           -2.270664             -0.660389             -0.484103  
DEST_hexagon_idH0418  DEST_hexagon_idH0419  DEST_hexagon_idH0420  
           -0.667737             -0.825118              0.402377  
DEST_hexagon_idH0421  DEST_hexagon_idH0422  DEST_hexagon_idH0423  
           -5.794732             -2.227289             -1.833194  
DEST_hexagon_idH0424  DEST_hexagon_idH0425  DEST_hexagon_idH0426  
           -0.179043             -4.023978             -3.673978  
DEST_hexagon_idH0427  DEST_hexagon_idH0428  DEST_hexagon_idH0429  
           -4.119489             -0.403489             -1.816447  
DEST_hexagon_idH0430  DEST_hexagon_idH0431  DEST_hexagon_idH0432  
           -5.762537             -0.684201              0.569163  
DEST_hexagon_idH0433  DEST_hexagon_idH0434  DEST_hexagon_idH0435  
           -0.794195              0.061552             -1.575814  
DEST_hexagon_idH0436  DEST_hexagon_idH0437  DEST_hexagon_idH0438  
           -0.705741             -2.074223             -1.921991  
DEST_hexagon_idH0439  DEST_hexagon_idH0440  DEST_hexagon_idH0441  
           -2.522009             -0.419498             -1.824855  
DEST_hexagon_idH0442  DEST_hexagon_idH0443  DEST_hexagon_idH0444  
           -1.994833             -1.658480             -3.196930  
DEST_hexagon_idH0445  DEST_hexagon_idH0446  DEST_hexagon_idH0447  
           -1.530559             -1.423732              0.269059  
DEST_hexagon_idH0448  DEST_hexagon_idH0449  DEST_hexagon_idH0450  
           -0.851577             -0.792936             -3.724094  
DEST_hexagon_idH0451  DEST_hexagon_idH0452  DEST_hexagon_idH0453  
           -2.443586             -0.602459             -2.409458  
DEST_hexagon_idH0455  DEST_hexagon_idH0456  DEST_hexagon_idH0457  
           -5.073889              0.235085              0.406349  
DEST_hexagon_idH0458  DEST_hexagon_idH0459  DEST_hexagon_idH0460  
           -0.381510             -3.245759             -0.755863  
DEST_hexagon_idH0461  DEST_hexagon_idH0462  DEST_hexagon_idH0463  
           -1.062624             -0.685798             -0.076366  
DEST_hexagon_idH0464  DEST_hexagon_idH0465  DEST_hexagon_idH0466  
           -0.835375             -1.405797             -0.656844  
DEST_hexagon_idH0467  DEST_hexagon_idH0468  DEST_hexagon_idH0469  
           -1.294171             -0.688350             -1.578642  
DEST_hexagon_idH0470  DEST_hexagon_idH0471  DEST_hexagon_idH0472  
           -1.965918             -2.557334             -0.726641  
DEST_hexagon_idH0473  DEST_hexagon_idH0474  DEST_hexagon_idH0475  
           -1.478131             -1.904842              0.228932  
DEST_hexagon_idH0476  DEST_hexagon_idH0477  DEST_hexagon_idH0478  
           -0.634288              0.005894             -0.450141  
DEST_hexagon_idH0479  DEST_hexagon_idH0480  DEST_hexagon_idH0481  
           -0.903980             -0.638482             -1.359311  
DEST_hexagon_idH0482  DEST_hexagon_idH0483  DEST_hexagon_idH0484  
           -1.100147             -1.070901             -1.499051  
DEST_hexagon_idH0485  DEST_hexagon_idH0486  DEST_hexagon_idH0487  
           -1.902765             -1.356419             -0.028080  
DEST_hexagon_idH0488  DEST_hexagon_idH0489  DEST_hexagon_idH0490  
            0.377633             -0.059058             -0.962805  
DEST_hexagon_idH0491  DEST_hexagon_idH0492  DEST_hexagon_idH0493  
            0.044753             -0.534576             -1.809234  
DEST_hexagon_idH0494  DEST_hexagon_idH0495  DEST_hexagon_idH0496  
           -1.206615             -0.691631              0.098086  
DEST_hexagon_idH0497  DEST_hexagon_idH0498  DEST_hexagon_idH0499  
           -0.560536             -3.523406             -1.755435  
DEST_hexagon_idH0500  DEST_hexagon_idH0501  DEST_hexagon_idH0502  
           -0.744750              0.610465             -0.188896  
DEST_hexagon_idH0503  DEST_hexagon_idH0504  DEST_hexagon_idH0505  
           -1.279915             -0.762623             -0.735723  
DEST_hexagon_idH0506  DEST_hexagon_idH0507  DEST_hexagon_idH0508  
           -0.136721              0.761305             -1.984516  
DEST_hexagon_idH0509  DEST_hexagon_idH0510  DEST_hexagon_idH0511  
           -0.797902             -0.950556             -1.899944  
DEST_hexagon_idH0512  DEST_hexagon_idH0513  DEST_hexagon_idH0514  
           -2.635339             -0.449805              0.454054  
DEST_hexagon_idH0515  DEST_hexagon_idH0516  DEST_hexagon_idH0517  
            0.241713             -0.042336             -1.100391  
DEST_hexagon_idH0518  DEST_hexagon_idH0519  DEST_hexagon_idH0520  
            0.700036             -0.981871             -1.837888  
DEST_hexagon_idH0521  DEST_hexagon_idH0522  DEST_hexagon_idH0523  
            0.513515             -0.967536              0.017549  
DEST_hexagon_idH0524  DEST_hexagon_idH0525  DEST_hexagon_idH0526  
           -3.110028              0.244300             -0.664413  
DEST_hexagon_idH0527  DEST_hexagon_idH0528  DEST_hexagon_idH0529  
            0.215155             -1.104135             -0.944519  
DEST_hexagon_idH0530  DEST_hexagon_idH0531  DEST_hexagon_idH0532  
           -0.754275             -1.146649             -0.515131  
DEST_hexagon_idH0533  DEST_hexagon_idH0534  DEST_hexagon_idH0536  
           -0.609661             -4.952808             -0.687911  
DEST_hexagon_idH0537  DEST_hexagon_idH0538  DEST_hexagon_idH0539  
            0.318133             -0.683517             -1.434516  
DEST_hexagon_idH0540  DEST_hexagon_idH0541  DEST_hexagon_idH0542  
           -1.338296             -0.990503             -1.572166  
DEST_hexagon_idH0543  DEST_hexagon_idH0544  DEST_hexagon_idH0545  
           -0.794955              0.473008             -1.856956  
DEST_hexagon_idH0546  DEST_hexagon_idH0547  DEST_hexagon_idH0548  
           -4.146576             -0.994040             -1.877700  
DEST_hexagon_idH0549  DEST_hexagon_idH0550  DEST_hexagon_idH0551  
           -0.217099             -0.462841             -0.483262  
DEST_hexagon_idH0552  DEST_hexagon_idH0553  DEST_hexagon_idH0554  
           -1.294317             -0.292299             -1.531117  
DEST_hexagon_idH0555  DEST_hexagon_idH0556  DEST_hexagon_idH0557  
           -1.707303             -1.489266             -2.283381  
DEST_hexagon_idH0558  DEST_hexagon_idH0559  DEST_hexagon_idH0560  
           -1.378731             -1.390134             -0.505092  
DEST_hexagon_idH0561  DEST_hexagon_idH0562  DEST_hexagon_idH0563  
            0.053612             -0.021039             -0.830053  
DEST_hexagon_idH0564  DEST_hexagon_idH0565  DEST_hexagon_idH0566  
           -3.030778             -2.041224             -1.723055  
DEST_hexagon_idH0567  DEST_hexagon_idH0568  DEST_hexagon_idH0569  
           -1.098924             -2.896246             -2.738743  
DEST_hexagon_idH0570  DEST_hexagon_idH0571  DEST_hexagon_idH0572  
           -1.889793             -2.241587             -2.721827  
DEST_hexagon_idH0573  DEST_hexagon_idH0574  DEST_hexagon_idH0575  
           -0.421395             -0.291642             -2.200237  
DEST_hexagon_idH0576  DEST_hexagon_idH0577  DEST_hexagon_idH0578  
           -2.025331             -1.376252             -0.757039  
DEST_hexagon_idH0579  DEST_hexagon_idH0580  DEST_hexagon_idH0581  
           -2.386063             -1.880084             -0.967375  
DEST_hexagon_idH0582  DEST_hexagon_idH0583  DEST_hexagon_idH0584  
           -1.374734             -1.006709              0.036059  
DEST_hexagon_idH0585  DEST_hexagon_idH0586  DEST_hexagon_idH0587  
           -2.198010             -1.165431             -1.926572  
DEST_hexagon_idH0588  DEST_hexagon_idH0589  DEST_hexagon_idH0590  
           -0.656459             -1.346436             -0.667780  
DEST_hexagon_idH0591  DEST_hexagon_idH0592  DEST_hexagon_idH0593  
           -2.774518             -0.776933             -0.382833  
DEST_hexagon_idH0594  DEST_hexagon_idH0595  DEST_hexagon_idH0596  
            0.192706             -0.751463              0.981594  
DEST_hexagon_idH0597  DEST_hexagon_idH0598  DEST_hexagon_idH0599  
           -2.180550             -0.078335             -3.063022  
DEST_hexagon_idH0600  DEST_hexagon_idH0601  DEST_hexagon_idH0602  
           -2.718458             -3.177207             -3.236286  
DEST_hexagon_idH0603  DEST_hexagon_idH0604  DEST_hexagon_idH0605  
           -0.878010             -0.980602             -1.016100  
DEST_hexagon_idH0606  DEST_hexagon_idH0607  DEST_hexagon_idH0608  
           -0.820088             -1.455766             -1.447819  
DEST_hexagon_idH0609  DEST_hexagon_idH0610  DEST_hexagon_idH0611  
           -0.825450             -1.750112             -5.281544  
DEST_hexagon_idH0612  DEST_hexagon_idH0613  DEST_hexagon_idH0614  
           -0.243021             -0.236131             -1.295014  
DEST_hexagon_idH0615  DEST_hexagon_idH0616  DEST_hexagon_idH0617  
           -1.458505             -1.065747             -1.406475  
DEST_hexagon_idH0618  DEST_hexagon_idH0619  DEST_hexagon_idH0620  
           -2.448671             -0.738582             -1.669460  
DEST_hexagon_idH0621  DEST_hexagon_idH0622  DEST_hexagon_idH0623  
           -0.907233             -0.661293             -1.382334  
DEST_hexagon_idH0624  DEST_hexagon_idH0625  DEST_hexagon_idH0626  
           -2.169022             -2.835040             -1.003949  
DEST_hexagon_idH0627  DEST_hexagon_idH0628  DEST_hexagon_idH0629  
           -2.859877             -1.015409             -1.738467  
DEST_hexagon_idH0630  DEST_hexagon_idH0631  DEST_hexagon_idH0632  
           -1.114869             -0.455504             -0.686873  
DEST_hexagon_idH0633  DEST_hexagon_idH0634  DEST_hexagon_idH0635  
           -0.071481             -0.995395             -3.366152  
DEST_hexagon_idH0636  DEST_hexagon_idH0638  DEST_hexagon_idH0639  
           -2.012053             -0.499041             -0.459621  
DEST_hexagon_idH0640  DEST_hexagon_idH0641  DEST_hexagon_idH0642  
           -0.336857             -1.553762             -0.890941  
DEST_hexagon_idH0643  DEST_hexagon_idH0644  DEST_hexagon_idH0645  
           -1.106190             -2.312695             -1.172984  
DEST_hexagon_idH0646  DEST_hexagon_idH0647  DEST_hexagon_idH0648  
           -1.846620             -1.483433             -0.263573  
DEST_hexagon_idH0649  DEST_hexagon_idH0650  DEST_hexagon_idH0651  
           -0.378621             -0.842099             -0.693903  
DEST_hexagon_idH0652  DEST_hexagon_idH0653  DEST_hexagon_idH0654  
            0.274144             -0.595680             -1.540923  
DEST_hexagon_idH0655  DEST_hexagon_idH0657  DEST_hexagon_idH0658  
           -3.932896             -1.007798             -1.224336  
DEST_hexagon_idH0659  DEST_hexagon_idH0660  DEST_hexagon_idH0661  
           -0.233752              0.736012             -1.820827  
DEST_hexagon_idH0662  DEST_hexagon_idH0663  DEST_hexagon_idH0664  
           -2.308943              0.012675             -2.097731  
DEST_hexagon_idH0665  DEST_hexagon_idH0666  DEST_hexagon_idH0667  
           -2.247387             -0.175954             -0.779929  
DEST_hexagon_idH0668  DEST_hexagon_idH0669  DEST_hexagon_idH0670  
           -0.681274             -0.668875              1.032296  
DEST_hexagon_idH0671  DEST_hexagon_idH0672  DEST_hexagon_idH0673  
           -3.281906             -1.215228             -1.583866  
DEST_hexagon_idH0674  DEST_hexagon_idH0675  DEST_hexagon_idH0676  
           -1.508166             -2.774800             -4.428979  
DEST_hexagon_idH0677  DEST_hexagon_idH0678  DEST_hexagon_idH0679  
           -1.214758              0.151390              0.292404  
DEST_hexagon_idH0680  DEST_hexagon_idH0681  DEST_hexagon_idH0682  
           -2.662416             -2.021598             -0.179061  
DEST_hexagon_idH0683  DEST_hexagon_idH0684  DEST_hexagon_idH0685  
           -5.022456              0.087052             -1.299903  
DEST_hexagon_idH0686  DEST_hexagon_idH0687  DEST_hexagon_idH0688  
           -1.390123             -1.282265             -1.444373  
DEST_hexagon_idH0689  DEST_hexagon_idH0690  DEST_hexagon_idH0691  
           -2.836979             -0.139509             -3.708982  
DEST_hexagon_idH0692  DEST_hexagon_idH0693  DEST_hexagon_idH0694  
           -1.511636             -0.931643             -0.666834  
DEST_hexagon_idH0695  DEST_hexagon_idH0696  DEST_hexagon_idH0697  
           -0.299895             -0.386206             -2.110557  
DEST_hexagon_idH0698  DEST_hexagon_idH0700  DEST_hexagon_idH0701  
           -1.832412             -1.261462             -2.930417  
DEST_hexagon_idH0702  DEST_hexagon_idH0703  DEST_hexagon_idH0704  
           -1.708741             -0.504370             -1.290432  
DEST_hexagon_idH0705  DEST_hexagon_idH0706  DEST_hexagon_idH0707  
           -1.746649             -2.681331             -0.633956  
DEST_hexagon_idH0708  DEST_hexagon_idH0709  DEST_hexagon_idH0710  
           -1.606725             -2.274702             -2.702248  
DEST_hexagon_idH0711  DEST_hexagon_idH0712  DEST_hexagon_idH0714  
           -1.801259             -3.193165             -1.634732  
DEST_hexagon_idH0715  DEST_hexagon_idH0716  DEST_hexagon_idH0717  
           -0.445189             -0.368004             -0.520470  
DEST_hexagon_idH0718  DEST_hexagon_idH0719  DEST_hexagon_idH0720  
           -3.141148             -1.117162             -0.300957  
DEST_hexagon_idH0721  DEST_hexagon_idH0722  DEST_hexagon_idH0724  
           -1.402751             -2.074597             -1.477195  
DEST_hexagon_idH0725  DEST_hexagon_idH0726  DEST_hexagon_idH0727  
            0.876267             -1.806013             -0.969619  
DEST_hexagon_idH0728  DEST_hexagon_idH0729  DEST_hexagon_idH0730  
           -0.323099             -1.142996             -1.327982  
DEST_hexagon_idH0731  DEST_hexagon_idH0732  DEST_hexagon_idH0733  
           -1.428850             -0.748973             -1.058737  
DEST_hexagon_idH0734  DEST_hexagon_idH0735  DEST_hexagon_idH0736  
           -0.948170             -0.739519             -1.049018  
DEST_hexagon_idH0737  DEST_hexagon_idH0738  DEST_hexagon_idH0739  
           -0.889906             -0.358815             -0.181744  
DEST_hexagon_idH0740  DEST_hexagon_idH0741  DEST_hexagon_idH0742  
           -1.152673             -0.257326             -3.574644  
DEST_hexagon_idH0743  DEST_hexagon_idH0744  DEST_hexagon_idH0745  
           -0.481870             -0.534328             -0.212718  
DEST_hexagon_idH0746  DEST_hexagon_idH0747  DEST_hexagon_idH0748  
           -1.508100             -2.141345             -0.258822  
DEST_hexagon_idH0749  DEST_hexagon_idH0750  DEST_hexagon_idH0751  
           -1.853518             -1.135918             -1.685991  
DEST_hexagon_idH0752  DEST_hexagon_idH0753  DEST_hexagon_idH0754  
           -0.212327             -2.055914             -1.789811  
DEST_hexagon_idH0755  DEST_hexagon_idH0756  DEST_hexagon_idH0757  
           -3.642443             -1.199932             -1.477775  
DEST_hexagon_idH0758  DEST_hexagon_idH0759  DEST_hexagon_idH0760  
           -3.387204              1.314533             -2.012470  
DEST_hexagon_idH0761  DEST_hexagon_idH0762  DEST_hexagon_idH0763  
           -1.563473             -1.148596              0.348589  
DEST_hexagon_idH0764  DEST_hexagon_idH0765  DEST_hexagon_idH0766  
            0.060386             -1.181829             -1.749634  
DEST_hexagon_idH0767  DEST_hexagon_idH0768  DEST_hexagon_idH0769  
            0.962144             -4.111343             -1.191739  
DEST_hexagon_idH0770  DEST_hexagon_idH0771  DEST_hexagon_idH0772  
           -2.583654              0.237610             -0.145955  
DEST_hexagon_idH0773  DEST_hexagon_idH0774  DEST_hexagon_idH0775  
           -1.489730             -2.353262             -3.409193  
DEST_hexagon_idH0776  DEST_hexagon_idH0777  DEST_hexagon_idH0778  
           -1.033040             -0.978677             -0.973163  
DEST_hexagon_idH0779  DEST_hexagon_idH0780  DEST_hexagon_idH0781  
           -1.062226             -1.478070             -1.476356  
DEST_hexagon_idH0782  DEST_hexagon_idH0783  DEST_hexagon_idH0784  
           -1.602416             -1.214003              0.370105  
DEST_hexagon_idH0785  DEST_hexagon_idH0786  DEST_hexagon_idH0787  
           -0.604988             -1.863155             -0.335341  
DEST_hexagon_idH0788  DEST_hexagon_idH0789  DEST_hexagon_idH0790  
           -2.081143             -1.646782             -1.068739  
DEST_hexagon_idH0791  DEST_hexagon_idH0792  DEST_hexagon_idH0793  
           -0.104379             -1.437980             -0.758012  
DEST_hexagon_idH0794  DEST_hexagon_idH0795  DEST_hexagon_idH0796  
           -0.916773             -2.664326             -0.165384  
DEST_hexagon_idH0797  DEST_hexagon_idH0798  DEST_hexagon_idH0799  
           -0.438207              0.287178             -1.395235  
DEST_hexagon_idH0800  DEST_hexagon_idH0801  DEST_hexagon_idH0802  
           -0.537079              0.247415              0.802543  
DEST_hexagon_idH0803  DEST_hexagon_idH0804  DEST_hexagon_idH0805  
           -0.624277             -2.012169             -0.562574  
DEST_hexagon_idH0806  DEST_hexagon_idH0807  DEST_hexagon_idH0808  
           -0.515707             -2.817390             -0.851000  
DEST_hexagon_idH0809  DEST_hexagon_idH0810  DEST_hexagon_idH0811  
            0.292968             -1.530150             -1.209371  
DEST_hexagon_idH0812  DEST_hexagon_idH0813  DEST_hexagon_idH0814  
           -0.531325             -1.899011             -1.450093  
DEST_hexagon_idH0815  DEST_hexagon_idH0816  DEST_hexagon_idH0817  
           -1.418009             -0.880298              0.572497  
DEST_hexagon_idH0818  DEST_hexagon_idH0819  DEST_hexagon_idH0820  
            0.525012             -0.505596              0.010526  
DEST_hexagon_idH0821  DEST_hexagon_idH0822  DEST_hexagon_idH0823  
            0.790393             -1.319495             -0.433931  
DEST_hexagon_idH0824  DEST_hexagon_idH0825  DEST_hexagon_idH0826  
           -2.430413             -1.414167              0.549343  
DEST_hexagon_idH0827  DEST_hexagon_idH0828  DEST_hexagon_idH0829  
            1.190407             -1.845315              0.635822  
DEST_hexagon_idH0830  DEST_hexagon_idH0831         log(DISTANCE)  
            0.943315              0.529639             -1.606057  

Degrees of Freedom: 64965 Total (i.e. Null);  63337 Residual
Null Deviance:      97690000 
Residual Deviance: 24700000     AIC: 25060000</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">calc_r_squared</span>(dbcSIM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5744849</code></pre>
</div>
</div>
</section>
<section id="model-comparison" class="level2">
<h2 class="anchored" data-anchor-id="model-comparison">6.2 Model Comparison</h2>
<p>In this section we will use the compare_performance() of performance package to compare the root mean square error of the four SIMs. The smaller the values of RMSE , the better the model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>model_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Unconstrained =</span> uncSIM,</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Origin_Constrained =</span> orcSIM,</span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Destination_Constrained =</span> decSIM,</span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Doubly_Constrained =</span> dbcSIM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">compare_performance</span>(model_list,</span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">metrics =</span> <span class="st">"RMSE"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Comparison of Model Performance Indices

Name                    | Model |     RMSE
------------------------------------------
Unconstrained           |   glm | 1639.815
Origin_Constrained      |   glm | 1598.080
Destination_Constrained |   glm | 1396.043
Doubly_Constrained      |   glm | 1176.784</code></pre>
</div>
</div>
<p>The output below reveals that doubly constrained SIM is the best model among the four SIMs because it has the smallest RMSE value of circa 1176</p>
</section>
<section id="visualising-the-fitted-values" class="level2">
<h2 class="anchored" data-anchor-id="visualising-the-fitted-values">6.3 Visualising the fitted values</h2>
<p>The code chunk below will save the fitted values as a dataframe and append that column of fitted values to the flow_data1 df. We will append the fitted values of all the 4 SIMs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>process_fitted_values <span class="ot">&lt;-</span> <span class="cf">function</span>(data, fitted_values, new_column_name) {</span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(fitted_values) <span class="sc">%&gt;%</span></span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">0</span>)</span>
<span id="cb188-4"><a href="#cb188-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb188-5"><a href="#cb188-5" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb188-6"><a href="#cb188-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cbind</span>(df) <span class="sc">%&gt;%</span></span>
<span id="cb188-7"><a href="#cb188-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>({{ new_column_name }} <span class="sc">:</span><span class="er">=</span> fitted_values)</span>
<span id="cb188-8"><a href="#cb188-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb188-9"><a href="#cb188-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(data)</span>
<span id="cb188-10"><a href="#cb188-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Unconstrained model</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>flow_data <span class="ot">&lt;-</span> <span class="fu">process_fitted_values</span>(flowlines_no_intra, uncSIM<span class="sc">$</span>fitted.values, <span class="st">"uncTRIPS"</span>)</span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>unc_p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> flow_data,</span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">x =</span> uncTRIPS,</span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y =</span> TRIPS)) <span class="sc">+</span></span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb189-7"><a href="#cb189-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm)</span>
<span id="cb189-8"><a href="#cb189-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-9"><a href="#cb189-9" aria-hidden="true" tabindex="-1"></a>unc_p </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-127-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Origin constrained model</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>flow_data <span class="ot">&lt;-</span> <span class="fu">process_fitted_values</span>(flowlines_no_intra, orcSIM<span class="sc">$</span>fitted.values, <span class="st">"orcTRIPS"</span>)</span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>orc_p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> flow_data,</span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">x =</span> orcTRIPS,</span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y =</span> TRIPS)) <span class="sc">+</span></span>
<span id="cb190-6"><a href="#cb190-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb190-7"><a href="#cb190-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm)</span>
<span id="cb190-8"><a href="#cb190-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-9"><a href="#cb190-9" aria-hidden="true" tabindex="-1"></a>orc_p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-128-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Destination Constrained model</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>flow_data <span class="ot">&lt;-</span> <span class="fu">process_fitted_values</span>(flowlines_no_intra, decSIM<span class="sc">$</span>fitted.values, <span class="st">"decTRIPS"</span>)</span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>dec_p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> flow_data,</span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">x =</span> decTRIPS,</span>
<span id="cb191-6"><a href="#cb191-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y =</span> TRIPS)) <span class="sc">+</span></span>
<span id="cb191-7"><a href="#cb191-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb191-8"><a href="#cb191-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm)</span>
<span id="cb191-9"><a href="#cb191-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-10"><a href="#cb191-10" aria-hidden="true" tabindex="-1"></a>dec_p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-129-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Doubly Constrained model</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>flow_data <span class="ot">&lt;-</span> <span class="fu">process_fitted_values</span>(flowlines_no_intra, dbcSIM<span class="sc">$</span>fitted.values, <span class="st">"dbcTRIPS"</span>)</span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a>dbc_p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> flow_data,</span>
<span id="cb192-4"><a href="#cb192-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">x =</span> dbcTRIPS,</span>
<span id="cb192-5"><a href="#cb192-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y =</span> TRIPS)) <span class="sc">+</span></span>
<span id="cb192-6"><a href="#cb192-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb192-7"><a href="#cb192-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm)</span>
<span id="cb192-8"><a href="#cb192-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-9"><a href="#cb192-9" aria-hidden="true" tabindex="-1"></a>dbc_p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex2_files/figure-html/unnamed-chunk-130-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>From the 4 charts, we note that the points surround more closely to the predicted blue line for the doubly constrained model. This suggests that the doubly constrained model is performing better than the others.</p>
</section>
</section>
<section id="conclusion-and-future-work" class="level1">
<h1><strong>7. Conclusion and future work</strong></h1>
<p>The doubly constrained model appears to be able to predict more accurately the no. of trips taken between the zone pairs. However, we do not the existence of a number outlier zone pairs from the charts which suggest that there is opportunity to test if we want to perform prediction without some of these outliers, and address them seperately with another model or approach. This study indicates that geospatial data can indeed help to asssess and predict certain patterns which can help a policy maker decided on next steps. Having said that, our city planning does overlap in zones where there are high attractiveness and propulsiveness, i.e.&nbsp;schools, malls, interchanges, are often located centrally in certain zones. Considerations can be made if we can further breakdown the analysis to cater to specifc demographics who, in this particular study, is more prone to taking bus as a public transport.</p>
</section>
<section id="references" class="level1">
<h1>8. References</h1>
<p>Tin Seong Kam. “15 Processing and Visualszing Flow Data” From R for Geospatial Data Science and Analytics https://r4gdsa.netlify.app/chap15</p>
<p>Tin Seong Kam. “In-Class Exercise 4: Preparing Spatial Interaction Modelling Variables” https://isss624.netlify.app/in-class_ex/in-class_ex4/in-class_ex4-gds#data-integration-and-final-touch-up</p>
<p>Tin Seong Kam. “2 Choropleth Mapping with R” From R for Geospatial Data Science and Analytics https://r4gdsa.netlify.app/chap02if i</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>